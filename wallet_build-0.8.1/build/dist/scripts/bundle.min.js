var baseClientApp=angular.module("baseClient",["ngStorage","restangular","datatables","datatables.bootstrap","angularMoment","ngSanitize","ui.mask","validation","validation.rule","cc.autorefresh","checklist-model","chart.js","nvd3","pascalprecht.translate","cgBusy","truncate","angular-confirm"]);angular.module("baseClient").constant("baseConfig",{SESSION_STORAGE_NAMESPACE:"com.client",FALLBACK_HOST_URL:"http://185.103.75.217:23457/",AUTO_PAGE_REFRESH_INTERVAL:6e4,TOKEN_QUANTS:1e8,TX_DEADLINE:60,apiEndPoint:"api",SESSION_CURRENT_BLOCK:"current_block",SESSION_APP_OPTIONS:"app_options",SESSION_PEER_ENDPOINTS:"peerEndpoints",SESSION_MAX_RETRIES:"2",SESSION_CURRENT_TRY:"0",EPOCH:1484046e3}),angular.module("baseClient").config(["$localStorageProvider","baseConfig",function(e,t){e.setKeyPrefix(t.SESSION_STORAGE_NAMESPACE)}]),angular.module("baseClient").constant("peerConfig",{apiUrl:"http://185.103.75.217:8888",peerEndPoint:"api/nodes",SESSION_PEER_URL_KEY:"peerKey"}),angular.module("baseClient").constant("localhostConfig",{apiUrl:"http://localhost:23457",endPoint:"api",SESSION_PEER_URL_KEY:"peerKey"}),angular.module("baseClient").constant("peerEndpoints",["http://185.35.137.7:8888/api/nodes","http://185.35.139.102:8888/api/nodes","http://185.35.139.103:8888/api/nodes","http://185.35.139.104:8888/api/nodes","http://185.35.139.105:8888/api/nodes","http://46.244.20.41:8888/api/nodes","http://185.35.139.101:8888/api/nodes","http://208.95.1.177:8888/api/nodes","http://199.127.137.169:8888/api/nodes","http://185.103.75.217:8888/api/nodes"]),angular.module("baseClient").constant("peerEndpointsMap",{DEFAULT:["http://185.35.137.7:8888/api/nodes","http://185.35.139.102:8888/api/nodes","http://185.35.139.103:8888/api/nodes","http://185.35.139.104:8888/api/nodes","http://185.35.139.105:8888/api/nodes","http://46.244.20.41:8888/api/nodes","http://185.35.139.101:8888/api/nodes","http://208.95.1.177:8888/api/nodes","http://199.127.137.169:8888/api/nodes","http://185.103.75.217:8888/api/nodes"],DEVTESTNET:["http://185.35.138.132:9999/api/nodes"],TESTNET:["http://185.35.138.140:8888/api/v1/nodes"]}),angular.module("baseClient").constant("nodeEndpoints",["http://185.103.75.217:23457/","http://185.35.137.7:23457/","http://185.35.139.102:23457/","http://185.35.139.103:23457/","http://185.35.139.104:23457/","http://185.35.139.105:23457/","http://46.244.20.41:23457/","http://185.35.139.101:23457/","http://208.95.1.177:23457/","http://199.127.137.169:23457/"]),angular.module("baseClient").constant("chainEndpoints",["http://185.103.75.217:23457/","http://185.35.137.7:23457/","http://185.35.139.102:23457/","http://185.35.139.103:23457/","http://185.35.139.104:23457/","http://185.35.139.105:23457/","http://46.244.20.41:23457/","http://185.35.139.101:23457/","http://208.95.1.177:23457/","http://199.127.137.169:23457/"]),angular.module("baseClient").constant("loginConfig",{SESSION_ACCOUNT_DETAILS_KEY:"account_details",SESSION_ACCOUNT_PRIVATE_KEY:"account_private_key"}),angular.module("baseClient").constant("controlConfig",{SESSION_ACCOUNT_CONTROL_HASCONTROL_KEY:"account_control_hascontrol",SESSION_ACCOUNT_CONTROL_JSONCONTROL_KEY:"account_control_jsoncontrol"}),angular.module("baseClient").factory("PeerRestangular",["Restangular","peerConfig",function(e,t){return e.withConfig(function(e){e.setBaseUrl(t.apiUrl)})}]),angular.module("baseClient").service("PeerService",["PeerRestangular","peerConfig","SessionStorageService","baseConfig","peerEndpoints","$injector","peerEndpointsMap",function(e,t,n,r,o,i,a){var s=this;this.getPeers=function(){return e.setBaseUrl(s.getPeerEndPoints()[0]),e.all("").customGET("",{})},this.getStats=function(){return e.setBaseUrl(s.getPeerEndPoints()[0]),e.all("getStats").customGET("",{})},this.searchIp=function(t){e.setBaseUrl(s.getPeerEndPoints()[0]);var n={ip:t};return e.all("").customGET("",n)},this.getPeerEndPoints=function(e){var t=i.get("OptionsService");return e=e||t.getOption("CONNECTION_MODE"),a[e]||a.DEFAULT}}]),angular.module("baseClient").service("PeerTestService",["PeerRestangular","peerConfig",function(e,t){var n=["http://localhost:1234","http://localhost:2345",t.peerEndPoint];this.getPeers=function(){return e.all(n[0]).customGET("",{})}}]),angular.module("baseClient").service("CommonsService",["SessionStorageService","loginConfig","Restangular","baseConfig","NodeService","OptionsService","$sanitize",function(e,t,n,r,o,i,a){function s(e){return isNaN(e)?a(e):e}function l(e,t){for(var n in e)e.hasOwnProperty(n)&&("object"==typeof e[n]?e[n]=l(e[n],t):e[n]=t(e[n]));return e}var c=this;this.convertToArray=function(e){return e?(Array.isArray(e)||(e=[e]),e):[]},this.getAccountDetailsFromSession=function(n){var r=e.getFromSession(t.SESSION_ACCOUNT_DETAILS_KEY);return n&&r?r[n]:r},this.broadcastTransaction=function(e){n.setBaseUrl(o.getNodeUrl(i.getOption("CONNECTION_MODE"),i.getOption("RANDOMIZE_NODES")));var t={requestType:"broadcastTransaction",transactionBytes:e};return n.all(r.apiEndPoint).customPOST("","",t,"")},this.iterateAndExecuteFunctionOnJson=function(e,t){return l(e,t)},this.sanitizeJson=function(e){return c.iterateAndExecuteFunctionOnJson(e,s)}}]),angular.module("baseClient").service("LocalHostService",["Restangular","localhostConfig",function(e,t){this.getPeerState=function(n){var r={requestType:"getPeerState"};return n||(n=t.apiUrl),e.setBaseUrl(n),e.all(t.endPoint).customGET("",r)},this.isValidUrl=function(e){return this.getPeerState(e).then(function(e){return!0},function(e){return!1})}}]),angular.module("baseClient").service("SessionStorageService",["$sessionStorage",function(e){this.saveToSession=function(t,n){e[t]=n},this.getFromSession=function(t){return e[t]},this.deleteFromSession=function(t){try{delete e[t]}catch(n){e[t]=void 0}},this.resetSession=function(){e.$reset()}}]),angular.module("baseClient").directive("stopccp",function(){return{scope:{alert:"@"},link:function(e,t){t.on("cut copy paste",function(t){t.preventDefault(),"true"===e.alert&&alert("Copy paste is disabled for security purpose")})}}}),angular.module("baseClient").directive("dynamic",["$compile",function(e){return{restrict:"A",replace:!0,link:function(t,n,r){t.$watch(r.dynamic,function(r){n.html(r),e(n.contents())(t)})}}}]),angular.module("baseClient").directive("focusInput",["$timeout",function(e){return{restrict:"A",link:function(t,n,r){e(function(){n[0].focus()})}}}]),angular.module("baseClient").value("cgBusyDefaults",{message:"Connecting...",backdrop:!0,delay:0,minDuration:333}),angular.module("baseClient").filter("timestamp",["$sce","moment","baseConfig",function(e,t,n){return function(e){try{var r=e+n.EPOCH;return t.unix(r).format("YYYY-MM-DDTHH:mm:ss")}catch(t){return e}}}]),angular.module("baseClient").filter("amountTQT",["$sce","baseConfig",function(e,t){return function(e){return e||(e=0),(e/t.TOKEN_QUANTS).toLocaleString("en-US",{minimumFractionDigits:2})}}]),angular.module("baseClient").filter("amountToDecimal",["$sce","baseConfig",function(e,t){return function(e,t){return e||(e=0),e*=Math.pow(10,t),e.toLocaleString("en-US",{minimumFractionDigits:t})}}]),angular.module("baseClient").filter("numericalString",["$sce","baseConfig",function(e,t){return function(e){return e||(e=0),e.toLocaleString("en-US",{minimumFractionDigits:2})}}]),angular.module("baseClient").filter("amountToQuant",["$sce","baseConfig",function(e,t){return function(e){return e||(e=0),parseInt(parseFloat(e)*t.TOKEN_QUANTS)}}]),angular.module("baseClient").filter("quantToAmount",["$sce","baseConfig",function(e,t){return function(e){return e||(e=0),parseFloat(e)/t.TOKEN_QUANTS}}]),angular.module("baseClient").filter("fiatUSD",["$sce","baseConfig",function(e,t){return function(e){return e||(e=0),e*=0}}]),angular.module("baseClient").filter("amountTKN",["$sce",function(e){return function(e){return e||(e=0),parseFloat(e).toLocaleString("en-US",{minimumFractionDigits:2})}}]),angular.module("baseClient").filter("supply",["$sce",function(e){return function(e,t){var n=t;return e/=Math.pow(10,n),e.toLocaleString("en-US",{minimumFractionDigits:2})}}]),angular.module("baseClient").filter("quantityToShare",["$sce",function(e){return function(e,t){var n=t,r=Math.pow(10,n);return e=parseFloat(e)/r}}]),angular.module("baseClient").filter("shareToQuantiy",["$sce",function(e){return function(e,t){var n=t,r=Math.pow(10,n);return e=parseFloat(e)*r}}]),angular.module("baseClient").filter("decimals",["$sce",function(e){return function(e,t){return e/=Math.pow(10,t),e.toLocaleString("en-US",{minimumFractionDigits:2})}}]),angular.module("baseClient").filter("numberString",["$sce",function(e){return function(e,t){return t=t||2,e.toLocaleString("en-US",{maximumFractionDigits:t,minimumFractionDigits:t})}}]),angular.module("baseClient").filter("transactionConf",["$sce",function(e){return function(e){return e||(e=0),0===e?'<span class="label label-default">'+e+"</span>":e>0&&e<10?'<span class="label label-danger">'+e+"</span>":e>=10&&e<100?'<span class="label label-warning">'+e+"</span>":e>=100&&e<720?'<span class="label label-success">'+e+"</span>":e>=720?'<span class="label label-success"> +720</span>':'<span class="label label-primary">'+e+"</span>"}}]),angular.module("baseClient").filter("transactionType",["$sce",function(e){return function(e,t){switch(e){case 0:return'<i class="fa fa-usd" aria-hidden="true"></i>';case 1:return'<i class="fa fa-envelope" aria-hidden="true"></i>';case 2:return'<span class="glyphicon glyphicon-signal" aria-hidden="true"></span>';case 4:return'<span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span>';case 5:return' <i class="fa fa-random" aria-hidden="true"></i> ';case 7:return'<i class="fa fa-users" aria-hidden="true"></i>'}}}]),angular.module("baseClient").filter("transactionIconSubType",["$sce",function(e){return function(e,t){switch(e){case 0:switch(t){case 0:return'<i class="fa fa-usd" aria-hidden="true" popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover="Ordinary Payment"></i>';default:return t}break;case 1:switch(t){case 0:return'<i class="fa fa-envelope-o" aria-hidden="true" popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover="Encrypted Message"></i>';case 1:return'<i class="fa fa-share-alt" aria-hidden="true" popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover="Alias Assigment"></i>';case 2:return'<i class="fa fa-signal" aria-hidden="true" popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover="Poll Creation"></i>';case 3:return'<i class="fa fa-signal" aria-hidden="true" popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover="Vote Casting"></i>';case 4:return'<i class="fa fa-credit-card" aria-hidden="true" popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover="Hub Announcement"></i>';case 5:return'<i class="fa fa-credit-card" aria-hidden="true" popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover="Account Info"></i>';case 6:return'<i class="fa fa-share-alt" aria-hidden="true" popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover="Alias Sell"></i>';case 7:return'<i class="fa fa-share-alt" aria-hidden="true" popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover="Alias Buy"></i>';case 8:return'<i class="fa fa-share-alt" aria-hidden="true" popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover="Alias Delete"></i>';case 9:return'<i class="fa fa-signal" aria-hidden="true" popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover="Phasing Vote Casting"></i>';case 10:return'<i class="fa fa-credit-card" aria-hidden="true" popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover="Account Property"></i>';case 11:return'<i class="fa fa-credit-card" aria-hidden="true" popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover="Account Property delete"></i>';default:return t}break;case 2:switch(t){case 0:return'<i class="fa fa-bar-chart" aria-hidden="true" popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover="Asset Issuance"></i>';case 1:return'<i class="fa fa-bar-chart" aria-hidden="true" popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover="Asset Transfer"></i>';case 2:return'<i class="fa fa-bar-chart" aria-hidden="true" popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover="Ask Order Placement"></i>';case 3:return'<i class="fa fa-bar-chart" aria-hidden="true" popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover="Bid Order Placement"></i>';case 4:return'<i class="fa fa-bar-chart" aria-hidden="true" popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover="Ask Order Cancellation"></i>';case 5:return'<i class="fa fa-bar-chart" aria-hidden="true" popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover="Bid Order Cancellation"></i>';case 6:return'<i class="fa fa-bar-chart" aria-hidden="true" popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover="Dividend Payment"></i>';case 7:return'<i class="fa fa-bar-chart" aria-hidden="true" popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover="Shares Delete"></i>';case 8:return'<i class="fa fa-bar-chart" aria-hidden="true" popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover="Asset Delete"></i>';default:return t}break;case 4:switch(t){case 0:return'<i class="fa fa-credit-card" aria-hidden="true" popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover="Effective Balance Lease"></i>';case 1:return'<i class="fa fa-credit-card" aria-hidden="true" popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover="Account Control"></i>';default:return t}break;case 5:switch(t){case 0:return'<i class="fa fa-random" aria-hidden="true" popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover="Currency Issuance"></i>';case 1:return'<i class="fa fa-random" aria-hidden="true" popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover="Reserve Increase"></i>';case 2:return'<i class="fa fa-random" aria-hidden="true" popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover="Resverve Claim"></i>';case 3:return'<i class="fa fa-random" aria-hidden="true" popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover="Currency Transfer"></i>';case 4:return'<i class="fa fa-random" aria-hidden="true" popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover="Publish Exchange Offer"></i>';case 5:return'<i class="fa fa-random" aria-hidden="true" popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover="Exchange Buy"></i>';case 6:return'<i class="fa fa-random" aria-hidden="true" popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover="Exchange Sell"></i>';case 7:return'<i class="fa fa-random" aria-hidden="true" popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover="Currency Minting"></i>';case 8:return'<i class="fa fa-random" aria-hidden="true" popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover="Currency Deletion"></i>';default:return t}break;case 7:switch(t){case 0:return'<i class="fa fa-user-secret" aria-hidden="true" popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover="Shuffling Creation"></i>';case 1:return'<i class="fa fa-user-secret" aria-hidden="true" popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover="Shuffling Register"></i>';case 2:return'<i class="fa fa-user-secret" aria-hidden="true" popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover="Shuffling Processing"></i>';case 3:return'<i class="fa fa-user-secret" aria-hidden="true" popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover="Shuffling Recipients"></i>';case 4:return'<i class="fa fa-user-secret" aria-hidden="true" popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover="Shuffling Verification"></i>';case 5:return'<i class="fa fa-user-secret" aria-hidden="true" popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover="Shuffling Cancel"></i>';default:return t}break;case 21:switch(t){case 0:return'<i class="fa fa-handshake-o" aria-hidden="true" popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover="Escrow Creation"></i>';case 1:return'<i class="fa fa-handshake-o" aria-hidden="true" popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover="Escrow Sign"></i>';case 2:return'<i class="fa fa-handshake-o" aria-hidden="true" popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover="Escrow Results"></i>';case 3:return'<i class="fa fa-hourglass" aria-hidden="true" popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover="Subscription Creation"></i>';case 4:return'<i class="fa fa-hourglass-o" aria-hidden="true" popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover="Subscription Cancel"></i>';case 5:return'<i class="fa fa-hourglass-half" aria-hidden="true" popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover="Subscription Payment"></i>';default:return t}break;case 22:switch(t){case 0:return'<i class="fa fa-cogs" aria-hidden="true" popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover="AT Creation"></i>';case 1:return'<i class="fa fa-cogs" aria-hidden="true" popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover="AT Payment"></i>';default:return t}break;default:return t}}}]),angular.module("baseClient").filter("transactionTextSubType",["$sce",function(e){return function(e,t){switch(e){case 0:switch(t){case 0:return"Ordinary Payment";default:return t}break;case 1:switch(t){case 0:return"Arbitary Message";case 1:return"Alias Assignment";case 2:return"Poll Creation";case 3:return"Vote Casting";case 4:return"Hub Announcement";case 5:return"Account Info";case 6:return"Alias Sell";case 7:return"Alias Buy";case 8:return"Alias Delete";case 9:return"Phasing Vote Casting";case 10:return"Account Property";case 11:return"Account Property delete";default:return t}break;case 2:switch(t){case 0:return"Asset Issuance";case 1:return"Asset Transfer";case 2:return"Ask Order Placement";case 3:return"Bid Order Placement";case 4:return"Ask Order Cancellation";case 5:return"Bid Order Cancellation";case 6:return"Dividend Payment";case 7:return"Asset Delete";default:return t}break;case 4:switch(t){case 0:return"Effective Balance Lease";case 1:return"Phasing Only";default:return t}break;case 5:switch(t){case 0:return"Currency Issuance";case 1:return"Reserve Increase";case 2:return"Resverve Claim";case 3:return"Currency Transfer";case 4:return"Publish Exchange Offer";case 5:return"Exchange Buy";case 6:return"Exchange Sell";case 7:return"Currency Minting";case 8:return"Currency Deletion";default:return t}break;case 7:switch(t){case 0:return"Shuffling Creation";case 1:return"Shuffling Registration";case 2:return"Shuffling Processing";case 3:return"Shuffling Recipients";case 4:return"Shuffling Verification";case 5:return"Shuffling Cancel";default:return t}break;case 21:switch(t){case 0:return"Escrow Creation";case 1:return"Escrow Sign";case 2:return"Escrow Results";case 3:return"Subscription Creation";case 4:return"Subscription Cancel";case 5:return"Subscription Payment";default:return t}break;case 22:switch(t){case 0:return"AT Creation";case 1:return"AT Payment";default:return t}break;default:return t}}}]),angular.module("baseClient").filter("blockTransactions",["$sce",function(e){return function(e){return 0===e?'<span class="label label-default">'+e+"</span>":e>0&&e<100?'<span class="label label-success">'+e+"</span>":e>=100&&e<200?'<span class="label label-warning">'+e+"</span>":e>=200?'<span class="label label-danger">'+e+"</span>":void 0}}]),angular.module("baseClient").filter("isEmpty",["$sce",function(e){return function(e){return void 0===e||""===e?"No Data Available":e}}]),angular.module("baseClient").filter("notSet",["$sce",function(e){return function(e){return void 0===e||""===e?"Not set":e}}]),angular.module("baseClient").filter("noOutbound",["$sce",function(e){return function(e){return void 0===e||""===e?"No public key available, no outbound transaction made.":e}}]),angular.module("baseClient").filter("searchTerm",["$sce",function(e){return function(e){return e?'<a href="" ng-controller="SearchCtrl" ng-click="searchValue(\''+e+"')\">"+e+"</a>":""}}]),angular.module("baseClient").directive("compile",["$compile",function(e){return function(t,n,r){t.$watch(function(e){return e.$eval(r.compile)},function(r){n.html(r),e(n.contents())(t)})}}]),angular.module("baseClient").directive("dynamic",["$compile",function(e){return{restrict:"A",replace:!0,link:function(t,n,r){t.$watch(r.dynamic,function(r){n.html(r),e(n.contents())(t)})}}}]),angular.module("baseClient").filter("currencyModel",["$sce",function(e){return function(e){switch(e){case 1:return"Exchangeable";case 8:return"Claimable";case 16:return"Mintable";case 2:return"Controllable";case 4:return"Reservable";case 32:return"Non Shuffleable";default:return e}}}]),angular.module("baseClient").filter("range",function(){return function(e,t){t=parseInt(t);for(var n=0;n<t;n++)e.push(n);return e}}),angular.module("baseClient").filter("JSONStringify",["$sce",function(e){return function(e){return JSON.stringify(e)}}]),angular.module("baseClient").filter("isEnabled",["$sce",function(e){return function(e){switch(e){case!0:return'</small> <i class="fa fa-check" aria-hidden="true"></i></small>';case!1:return'</small> <i class="fa fa-times" aria-hidden="true"></i></small>';default:return'</small> <i class="fa fa-times" aria-hidden="true"></i> </small>'}}}]),angular.module("baseClient").filter("isMessage",["$sce",function(e){return function(e,t){return 1===e&&0===t?'</small> <i class="fa fa-check" aria-hidden="true"></i> </small>':'</small> <i class="fa fa-times" aria-hidden="true"></i> </small>'}}]),angular.module("baseClient").filter("isMultisig",["$sce",function(e){return function(e,t){return 1===e&&0===t?'</small> <i class="fa fa-check" aria-hidden="true"></i> </small>':'</small> <i class="fa fa-times" aria-hidden="true"></i> </small>'}}]),angular.module("baseClient").filter("hasMessage",["$sce",function(e){return function(e,t){return e.attachment.encryptedMessage?t===e.senderRS?' <i class="fa fa-upload" aria-hidden="true" style="color: black;"></i> ':t===e.recipientRS?'<i class="fa fa-download" aria-hidden="true" style="color:black;"></i>':'</small> <i class="fa fa-check" aria-hidden="true"></i> </small>':'</small> <i class="fa fa-times" aria-hidden="true"></i> </small>'}}]),angular.module("baseClient").filter("hasMessageDirection",["$sce",function(e){return function(e,t){return t===e.senderRS?' <i class="fa fa-upload" aria-hidden="true" style="color:back;"></i> ':'<i class="fa fa-download" aria-hidden="true" style="color:back;"></i>'}}]),angular.module("baseClient").filter("controlModel",["$sce",function(e){return function(e){switch(e=parseInt(e)){case 0:return"Account";case 1:return"Balance";case 2:return"Asset";case 3:return"Currency";default:return e}}}]),angular.module("baseClient").filter("votingModel",["$sce",function(e){return function(e){switch(e=parseInt(e)){case 0:return"Account";case 1:return"Balance";case 2:return"Asset";case 3:return"Currency";default:return e}}}]),angular.module("baseClient").filter("shufflingStage",["$sce",function(e){return function(e){switch(e=parseInt(e)){case 0:return"Registration";case 1:return"Processing";case 2:return"Verification";case 3:return"Blame";case 4:return"Cancelled";case 5:return"Done";default:return e}}}]),angular.module("baseClient").filter("holdingType",["$sce",function(e){return function(e){switch(e=parseInt(e)){case 0:return"XIN";case 1:return"Asset";case 2:return"Currency";default:return e}}}]),angular.module("baseClient").filter("votingModelLabel",["$sce",function(e){return function(e){switch(e=parseInt(e)){case 0:return'<i class="fa fa-user-o" aria-hidden="true" popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover="Account"></i>';case 1:return'<i class="fa fa-credit-card" aria-hidden="true" popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover="Balance"></i>';case 2:return'<i class="fa fa-bar-chart" aria-hidden="true" popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover="Asset"></i>';case 3:return'<i class="fa fa-random" aria-hidden="true" popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover="Currency"></i>';default:return e}}}]),angular.module("baseClient").filter("buysell",["$sce",function(e){return function(e){switch(e){case"buy":return'<span class="label label-success">B</span>';case"sell":return'<span class="label label-danger">S</span>';default:return'<span class="label label-default">U</span>'}}}]),angular.module("baseClient").filter("txIsValid",["$sce",function(e){return function(e){switch(e){case!0:return'</small> <i class="fa fa-check" aria-hidden="true" style="color:green"></i></small>';case!1:return'</small> <i class="fa fa-times" aria-hidden="true" style="color:red"></i></small>';default:return'</small> <i class="fa fa-times" aria-hidden="true" style="color:red"></i> </small>'}}}]),angular.module("baseClient").filter("isService",["$sce",function(e){return function(e){return void 0===e||""===e?"Service":e}}]),angular.module("baseClient").filter("isSync",["$sce",function(e){return function(e){switch(e){case!0:return"NO";case!1:return"Yes";default:return"NO"}}}]),angular.module("baseClient").filter("replaceQuotes",["$sce",function(e){return function(e){return e.replace(/("|')/g,"")}}]),angular.module("baseClient").filter("txDirection",["$sce",function(e){return function(e,t){return e===t.senderRS?' <i class="fa fa-chevron-circle-up" aria-hidden="true" style="color:red;"></i> ':'<i class="fa fa-chevron-circle-down" aria-hidden="true" style="color:green;"></i>'}}]),angular.module("baseClient").filter("pollDays",["$sce",function(e){return function(e){return e||(e=0),e<=0?'<span class="label label-default" style="width:50px;">'+e+"</span>":e>0&&e<3?'<span class="label label-danger" style="width:50%;">'+e+"</span>":e>=3&&e<7?'<span class="label label-warning" style="width:50px;">'+e+"</span>":e>=7?'<span class="label label-success" style="width:50px;">'+e+"</span>":'<span class="label label-primary" style="width:50px;">'+e+"</span>"}}]),angular.module("baseClient").filter("upDown",["$sce",function(e){return function(e){return e||(e=0),0===e?'<span class="label label-default" >'+e+"</span>":e>0?'<span class="label label-success" >'+e+"</span>":e<0?'<span class="label label-danger"  >'+e+"</span>":'<span class="label label-primary" >'+e+"</span>"}}]),angular.module("baseClient").filter("newsType",["$sce",function(e){return function(e){return e||(e=0),e=parseInt(e),0===e?'<span class="label label-info"> News </span>':1===e?'<span class="label label-warning"> Announcement </span>':2===e?'<span class="label label-danger"> Voting Result </span>':'<span class="label label-default"> News </span>'}}]),angular.module("baseClient").filter("newsSection",["$sce",function(e){return function(e){return e||(e=0),e=parseInt(e),0===e?'<span class="label label-info"> Info </span>':1===e?'<span class="label label-success"> Feature </span>':2===e?'<span class="label label-success"> Update </span>':3===e?'<span class="label label-warning"> Security </span>':4===e?'<span class="label label-warning"> Voting </span>':5===e?'<span class="label label-info"> Improvement </span>':6===e?'<span class="label label-danger"> Alert </span>':'<span class="label label-info"> Info </span>'}}]),angular.module("baseClient").filter("newsPriority",["$sce",function(e){return function(e){return e||(e=0),e=parseInt(e),0===e?'<span class="label label-default"> Low </span>':5===e?'<span class="label label-warning"> medium </span>':10===e?'<span class="label label-danger"> High </span>':'<span class="label label-default"> Low </span>'}}]),angular.module("baseClient").filter("isOnline",["$sce",function(e){return function(e){switch(e){case!0:return'<small> <span class="glyphicon glyphicon-ok" style="color:green"></span> </small>';case!1:return'<small> <span class="glyphicon glyphicon-remove" style="color:red"></span> </small>';default:return'<small> <span class="glyphicon glyphicon-remove" style="color:black"></span> </small>'}}}]),angular.module("baseClient").filter("ledgerHolding",["$sce",function(e){return function(e){return"UNCONFIRMED_XIN_BALANCE"===e?" Unconfirmed Balance ":"XIN_BALANCE"===e?" Confirmed Balance ":"UNCONFIRMED_ASSET_BALANCE"===e?" Unconfirmed Asssets ":"ASSET_BALANCE"===e?" Asset Balance ":"UNCONFIRMED_CURRENCY_BALANCE"===e?" Unconfirmed Currencies ":"CURRENCY_BALANCE"===e?" Currency Balance ":"Unknown Holding"}}]),angular.module("baseClient").filter("ledgerTXTypes",["$sce",function(e){return function(e){return"BLOCK_GENERATED"===e?" Block Generated":"REJECT_PHASED_TRANSACTION"===e?"Rejected Phased Transaction":"TRANSACTION_FEE"===e?"Transaction Fee":"ORDINARY_PAYMENT"===e?"Ordinary Payment":"ACCOUNT_INFO"===e?"Account Info":"ALIAS_ASSIGNMENT"===e?"Alias Assignment":"ALIAS_BUY"===e?"Alias Buy":"ALIAS_DELETE"===e?"Alias Delete":"ALIAS_SELL"===e?"Alias Sell":"ARBITRARY_MESSAGE"===e?"Message":"HUB_ANNOUNCEMENT"===e?"Hub Announcement":"PHASING_VOTE_CASTING"===e?"Phased Vote Casting":"POLL_CREATION"===e?"Poll Creation":"VOTE_CASTING"===e?"Vote Casting":"ACCOUNT_PROPERTY"===e?"Account Property":"ACCOUNT_PROPERTY_DELETE"===e?"Account Property Delete":"ASSET_ASK_ORDER_CANCELLATION"===e?"Ask Order Cancellation":"ASSET_ASK_ORDER_PLACEMENT"===e?"Ask Order Placement":"ASSET_BID_ORDER_CANCELLATION"===e?"Bit Order Cancellation":"ASSET_BID_ORDER_PLACEMENT"===e?"Bit Order Placement":"ASSET_DIVIDEND_PAYMENT"===e?"Dividend Payment":"ASSET_ISSUANCE"===e?"Asset Issuance":"ASSET_TRADE"===e?"Asset Trade":"ASSET_TRANSFER"===e?"Asset Transfer":"ASSET_DELETE"===e?"Asset Delete":"ACCOUNT_CONTROL_EFFECTIVE_BALANCE_LEASING"===e?"Effective Balance Leasing":"ACCOUNT_CONTROL_PHASING_ONLY"===e?"Account Control":"CURRENCY_DELETION"===e?"Currency Deletion":"CURRENCY_DISTRIBUTION"===e?"Currency Distribution":"CURRENCY_EXCHANGE"===e?"Currency Exchange":"CURRENCY_EXCHANGE_BUY"===e?"Currency Buy":"CURRENCY_EXCHANGE_SELL"===e?"Currency Sell":"CURRENCY_ISSUANCE"===e?"Currency Issuance":"CURRENCY_MINTING"===e?"Currency Minting":"CURRENCY_OFFER_EXPIRED"===e?"Currency Offer Expired":"CURRENCY_OFFER_REPLACED"===e?"Currency Offer Replaced":"CURRENCY_PUBLISH_EXCHANGE_OFFER"===e?"Currency Offer":"CURRENCY_RESERVE_CLAIM"===e?"Currency Reserve Claim":"CURRENCY_RESERVE_INCREASE"===e?"Currency Reserve Increase":"CURRENCY_TRANSFER"===e?"Currency Transfer":"CURRENCY_UNDO_CROWDFUNDING"===e?"Currency Undo Crowdfunding":"SHUFFLING_REGISTRATION"===e?"Shuffling Registration":"SHUFFLING_PROCESSING"===e?"Shuffling Processing":"SHUFFLING_CANCELLATION"===e?"Shuffling Cancellation":"SHUFFLING_DISTRIBUTION"===e?"Shuffling Distribution":"SUBSCRIPTION_CANCEL"===e?"Subscription Cancellation":"SUBSCRIPTION_PAYMENT"===e?"Sunscription Payment":"SUBSCRIPTION_SUBSCRIBE"===e?"Subscription Subscribe":"ESCROW_CREATION"===e?"Escrow Creation":"ESCROW_SIGN"===e?"Escrow Signing":"ESCROW_RESULT"===e?"Escrow Result":"AUTOMATED_TRANSACTION_CREATION"===e?"AT Creation":"AT_PAYMENT"===e?"AT Payment":"Unknown Holding"}}]),angular.module("baseClient").filter("unsafe",["$sce",function(e){return function(t){return e.trustAsHtml(t)}}]),angular.module("baseClient").directive("fiatView",function(){return{restrict:"EA",scope:{amount:"=",amountTqt:"=",template:"@"},controller:["$scope","$rootScope","FiatService","$q","quantToAmountFilter",function(e,t,n,r,o){function i(t){var o=n.getBtcPrice(),i=n.getXinPrice();r.all([o,i]).then(function(n){var r=n[0],o=n[1];e.xinUSDBTC=r.averages.day||0,e.xinPriceUSD=o[0].price_usd||0,e.xinPriceBTC=o[0].price_btc||0,e.xinVolume24=o[0]["24h_volume_usd"]||0,e.xinChange24=o[0].percent_change_24h||0,e.finalAmount=t*o[0].price_usd},function(e){console.log(e)})}e.$watch("amountTqt",function(e){if(e){i(o(e))}}),e.$watch("amount",function(e){e&&i(e)})}],
templateUrl:function(e,t){return t.template||"global/views/fiat-template.html"}}}),angular.module("baseClient").constant("fiatConfig",{btcEndpoint:"http://185.35.139.104/",xinEndpoint:"http://185.35.139.104/"}),angular.module("baseClient").service("FiatService",["Restangular","fiatConfig",function(e,t){this.getBtcPrice=function(){return e.setBaseUrl(t.btcEndpoint),e.all("bitcoinaverage.json").customGET("")},this.getXinPrice=function(){return e.setBaseUrl(t.xinEndpoint),e.all("xin.json").customGET("")}}]),angular.module("baseClient").provider("FeeService",function(){function e(e){return e?e.length:0}this.$get=function(){return this},this.getSetAccountFee=function(t,n){var r=e(t)+e(n),o=1;if(r>0){var i=r-1;o+=2*(Math.floor(i/32)-0)}return o},this.getIssueAssetFee=function(){return 1e3},this.getDeleteAssetFee=function(){return 1},this.getDeleteCurrencyFee=function(){return 1},this.transferAssetFee=function(){return 1},this.getTransferCurrencyFee=function(){return 1},this.getIssueCurrencyFee=function(t){switch(e(t)){case 3:return 25e3;case 4:return 1e3;case 5:return 40}return-1},this.getCreatePollFee=function(){return 10},this.getCastVoteFee=function(){return 1},this.getSetAliasFee=function(){return 2},this.getDeleteAliasFee=function(){return 2}}),angular.module("baseClient").config(["$validationProvider","FeeServiceProvider",function(e,t,n){function r(e){if(e)for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!0;return!1}angular.extend(e,{validCallback:function(e){$(e).parents(".form-group:first").removeClass("has-error")},invalidCallback:function(e){$(e).parents(".form-group:first").addClass("has-error")}}),e.setErrorHTML(function(e){return'<label class="control-label has-error">'+e+"</label>"}),e.setSuccessHTML(function(e){return'<label class="control-label has-error">'+e+"</label>"}),e.showSuccessMessage=!1,e.setExpression({secretphrase:function(e,t,n,r,o){return t.hasPrivateKeyInSession()||e},fee:function(e,n,r,o,i){var a;if("sendToken"===i)return a=t.getSetAccountFee(n.sendForm.message),e>=a;if("setAccount"===i)return a=t.getSetAccountFee(n.setAccountInfoForm.accountName,n.setAccountInfoForm.accountDescription),e>=a;if("issueAsset"===i)a=t.getIssueAssetFee();else if("deleteAsset"===i)a=t.getDeleteAssetFee();else if("transferAsset"===i)a=t.transferAssetFee();else if("deleteCurrency"===i)a=t.getDeleteCurrencyFee();else if("transferCurrency"===i)a=t.getTransferCurrencyFee();else if("createPoll"===i)a=t.getCreatePollFee();else if("castVote"===i)a=t.getCastVoteFee();else if("setAlias"===i)a=t.getSetAliasFee();else{if("deleteAlias"!==i)return{result:!1,message:"Fee must be valid"};a=t.getDeleteAliasFee()}return e>=a},accountname:function(e,t,n,r,o){return"undefined"===e||""===e||null===e||!(e.length>100)},accountdesc:function(e,t,n,r,o){return"undefined"===e||""===e||null===e||!(e.length>1e3)},currencycode:function(e,t,n,r,o){return!!(e&&e.length>=3&&e.length<=5)},currencytype:function(e,t,n,o,i){return r(t.issueCurrencyForm.types)},newPrefix:function(e,t,n,r,o){return"new"!==t.setAliasForm.prefix||e},aliasSearch:function(e,t,n,r,o){return!!(e&&e.length>=3)},nodeUrl:function(e,t,n,r,o){return"AUTO"===t.optionsForm.CONNECTION_MODE||!!e&&t.isValidUrl(e)}}).setDefaultMsg({fee:{error:"Fee is too low",success:"Thanks!"},accountname:{error:"Name must be less than 100 chars",success:"Account Name is valid"},accountdesc:{error:"Name must be less than 1000 chars",success:"Account Name is valid"},secretphrase:{error:"Secret Phrase is not avialbel. Please input",success:"Secret is available"},currencycode:{error:"Currency code must be between 3 to 5 chars",success:"Currency code is valid"},currencytype:{error:"Atleast one currency type must be selected",success:"Currency type is valid"},newPrefix:{error:"New alias type must be valid",success:"Alias type is valid"},aliasSearch:{error:"",success:""},nodeUrl:{error:"Node Url is not valid",success:"Url is valid"},afterValidate:{error:"",success:""}})}]),angular.module("baseClient").controller("BaseCtrl",["$scope","$uibModal","CommonsService","$injector",function(e,t,n,r){e.openAddressBookModal=function(e,n){t.open({animation:!1,templateUrl:"addressbook/views/addressbook.html",controller:"AddressBookCtrl",resolve:{params:function(){return{accountRS:e,tag:n}}}})},e.openOptionsModal=function(){t.open({animation:!1,templateUrl:"options/views/options.html",controller:"OptionsCtrl",resolve:{params:function(){return{}}}})},e.searchAliases=function(e,t,n){return r.get("AliasService").searchAlias(e).then(function(r){for(var o=r.aliases||[],i=0;i<o.length;i++){var a=o[i];if(a.aliasName.toUpperCase()===e.toUpperCase()){var s=a.aliasURI,l=s.split(":");if("acct"===l[0]){var c=l[1].split("@")[0];t[n]=c;break}}}},function(e){})}}]),angular.module("baseClient").controller("GlobalErrorModalCtrl",["$scope","$uibModalInstance","$q","params",function(e,t,n,r){e.cancel=function(){t.dismiss("cancel")},e.showResult=function(){e.message=r.message}}]),angular.module("baseClient").run(["$rootScope","$uibModal",function(e,t){e.openErrorModal=function(e){t.open({animation:!0,templateUrl:"global/views/error-modal.html",size:"sm",controller:"GlobalErrorModalCtrl",resolve:{params:function(){return{message:e}}}})}}]),angular.module("baseClient").controller("GlobalNavbar",["$rootScope","$q","$scope","OptionsService",function(e,t,n,r){var o=r.getOption("CONNECTION_MODE");n.setTestNet=function(){return"TESTNET"==o},n.setHttpsNet=function(){return"HTTPS"==o},n.setDevNet=function(){return"DEVTESTNET"==o},n.setMainNet=function(){return"TESTNET"!==o&&"DEVTESTNET"!==o}}]),angular.module("baseClient").controller("GlobalMenu",["$rootScope","$q","$scope","OptionsService",function(e,t,n,r){var o=r.getOption("TESTNET")||!1;n.setStatus="disabled",o&&(n.setStatus="");var i=r.getOption("EXTENSIONS")||!1;n.setExtensions="disabled",i&&(n.setExtensions="")}]),angular.module("baseClient").factory("httpResponseErrorInterceptor",["$q","$injector","baseConfig","peerEndpoints","$sanitize",function(e,t,n,r,o){function i(e,t){return"object"==typeof e.data&&(e.data=t.sanitizeJson(e.data)),e}return{response:function(e){var r=e.config.url,o=t.get("CommonsService");if(-1!==r.indexOf("/api/nodes")&&Array.isArray(e.data)&&0===e.data.length){var a=t.get("$http"),s=t.get("SessionStorageService"),l=t.get("PeerService"),c=s.getFromSession(n.SESSION_PEER_ENDPOINTS)||l.getPeerEndPoints(),u=c.indexOf(r);return c[u+1]?(e.config.url=c[u+1],a(e.config).then(function(e){return i(e,o)},function(e){return i(e,o)})):i(e,o)}return i(e,o)},responseError:function(r){var o=t.get("$http"),i=t.get("SessionStorageService"),a=t.get("PeerService"),s=r.config.url;if(-1!==s.indexOf("/api/nodes")&&-1===r.status){var l=i.getFromSession(n.SESSION_PEER_ENDPOINTS)||a.getPeerEndPoints(),c=l.indexOf(s);return l[c+1]?(r.config.url=l[c+1],o(r.config)):e.reject(r)}if(-1!==s.indexOf("api")&&r.config.params&&r.config.params.requestType&&"getPeerState"!==r.config.params.requestType&&-1===r.status){var u=t.get("OptionsConfigurationService"),d=t.get("NodeService"),p=i.getFromSession(n.SESSION_CURRENT_TRY)||0;return p>n.SESSION_MAX_RETRIES?(i.saveToSession(n.SESSION_CURRENT_TRY,0),e.reject(r)):(i.saveToSession(n.SESSION_CURRENT_TRY,p+1),a.getPeers().then(function(e){return u.loadOptions(),r.config.url=d.getNodeUrl("AUTO",!1)+"/api",o(r.config)},function(t){return e.reject(r)}))}return e.reject(r)}}}]),angular.module("baseClient").config(["$httpProvider",function(e){e.interceptors.push("httpResponseErrorInterceptor")}]),angular.module("baseClient").service("StateAuthService",["$rootScope","CommonsService","$state",function(e,t,n){function r(){return t.getAccountDetailsFromSession()}this.authenticate=function(e,t){-1!==t.name.indexOf("signedin")&&(r()||(e.preventDefault(),n.go("client.login")))}}]),angular.module("crypto",[]),angular.module("crypto").factory("converters",["$window",function(e){if(e.converters){e.thirdParty=e.thirdParty||{},e.thirdParty.converters=e.converters;try{delete e.converters}catch(t){e.converters=void 0}}return e.thirdParty.converters}]),angular.module("crypto").factory("PassPhraseGenerator",["$window",function(e){if(e.PassPhraseGenerator){e.thirdParty=e.thirdParty||{},e.thirdParty.PassPhraseGenerator=e.PassPhraseGenerator;try{delete e.PassPhraseGenerator}catch(t){e.PassPhraseGenerator=void 0}}return e.thirdParty.PassPhraseGenerator}]),angular.module("crypto").factory("curve25519",["$window",function(e){e.thirdParty=e.thirdParty||{},e.thirdParty.curve25519=e.curve25519;try{delete e.curve25519}catch(t){e.curve25519=void 0}return e.thirdParty.curve25519}]),angular.module("crypto").factory("pako",["$window",function(e){e.thirdParty=e.thirdParty||{},e.thirdParty.pako=e.pako;try{delete e.pako}catch(t){e.pako=void 0}return e.thirdParty.pako}]),angular.module("crypto").factory("curve25519_",["$window",function(e){e.thirdParty=e.thirdParty||{},e.thirdParty.curve25519_=e.curve25519_;try{delete e.curve25519_}catch(t){e.curve25519_=void 0}return e.thirdParty.curve25519_}]),angular.module("crypto").factory("CryptoJS_SHA256",["$window",function(e){e.thirdParty=e.thirdParty||{},e.thirdParty.CryptoJS_SHA256=e.CryptoJS.SHA256;try{delete e.CryptoJS.SHA256}catch(t){e.CryptoJS.SHA256=void 0}return e.thirdParty.CryptoJS_SHA256}]),angular.module("crypto").factory("CryptoJS_CipherParams",["$window",function(e){e.thirdParty=e.thirdParty||{},e.thirdParty.CryptoJS_CipherParams=e.CryptoJS.lib.CipherParams;try{delete e.CryptoJS.lib.CipherParams}catch(t){e.CryptoJS.lib.CipherParams=void 0}return e.thirdParty.CryptoJS_CipherParams}]),angular.module("crypto").factory("AES",["$window",function(e){e.thirdParty=e.thirdParty||{},e.thirdParty.AES=e.CryptoJS.AES;try{delete e.CryptoJS.AES}catch(t){e.CryptoJS.AES=void 0}return e.thirdParty.AES}]),angular.module("crypto").factory("RsAddress",["$window",function(e){e.thirdParty=e.thirdParty||{},e.thirdParty.rsAddress=e.rsAddress;try{delete e.rsAddress}catch(t){e.rsAddress=void 0}return e.thirdParty.rsAddress}]),angular.module("crypto").factory("_hash",["$window",function(e){return{init:e.SHA256_init,update:e.SHA256_write,getBytes:e.SHA256_finalize}}]),angular.module("crypto").factory("cryptoUtils",[function(){return{byteArrayToBigInteger:function(e,t){for(var n,r,o=new BigInteger("0",10),i=e.length-1;i>=0;i--)n=o.multiply(new BigInteger("256",10)),r=n.add(new BigInteger(e[i].toString(10),10)),o=r;return o}}}]),angular.module("crypto").factory("sha256",["$window",function(e){e.thirdParty=e.thirdParty||{},e.thirdParty.sha256=e.CryptoJS.algo.SHA256;try{delete e.CryptoJS.algo.SHA256}catch(t){e.CryptoJS.algo.SHA256=void 0}return e.thirdParty.sha256}]),angular.module("crypto").service("CryptoService",["PassPhraseGenerator","converters","curve25519","cryptoUtils","RsAddress","_hash","sha256","curve25519_","pako","CryptoJS_SHA256","CryptoJS_CipherParams","AES",function(e,t,n,r,o,i,a,s,l,c,u,d){function p(e){return e[0]&=65528,e[15]&=32767,e[15]|=16384,e}function m(e,n){var r=a.create();r.update(t.byteArrayToWordArray(e)),n&&r.update(t.byteArrayToWordArray(n));var o=r.finalize();return t.wordArrayToByteArrayImpl(o,!1)}function f(e){var n=m(t.stringToByteArray(e));return t.shortArrayToHexString(p(t.byteArrayToShortArray(n)))}function g(e,n){return t.shortArrayToByteArray(s(t.byteArrayToShortArray(e),t.byteArrayToShortArray(n),null))}function h(e){return window.crypto?window.crypto.getRandomValues(e):window.msCrypto.getRandomValues(e),e}function S(e){for(var t=new BigInteger("0",10),n=e.length-1;n>=0;n--)t=t.multiply(new BigInteger("256",10)).add(new BigInteger(e[n].toString(10),10));return t}function C(e){for(var t=unescape(encodeURIComponent(e)),n=[],r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}this.encryptMessage=function(e,n,r){for(var o=t.hexStringToString(n),i=t.hexStringToByteArray(f(o)),a=t.hexStringToByteArray(r),s=g(i,a),u=h(new Uint8Array(32)),p=t.stringToByteArray(e),m=l.gzip(new Uint8Array(p)),S=t.byteArrayToWordArray(m),C=0;C<32;C++)s[C]^=u[C];var T=c(t.byteArrayToWordArray(s)),b=h(new Uint8Array(16)),y=t.byteArrayToWordArray(b),O=d.encrypt(S,T,{iv:y}),v=t.wordArrayToByteArray(O.iv),A=t.wordArrayToByteArray(O.ciphertext),w=v.concat(A);return{nonce:t.byteArrayToHexString(u),data:t.byteArrayToHexString(w)}},this.decryptMessage=function(e,n,r,o){var i=t.hexStringToString(r),a=t.hexStringToByteArray(f(i)),s=t.hexStringToByteArray(o),p=t.hexStringToByteArray(n),m=g(a,s),h=t.hexStringToByteArray(e);(h.length<16||h.length%16!=0)&&console.log("Invalid Ciphertext");var S,C=t.byteArrayToWordArray(h.slice(0,16)),T=t.byteArrayToWordArray(h.slice(16));if(p){for(var b=0;b<32;b++)m[b]^=p[b];S=c(t.byteArrayToWordArray(m))}else S=t.byteArrayToWordArray(m);var y=u.create({ciphertext:T,iv:C,key:S}),O=d.decrypt(y,S,{iv:C}),v=t.wordArrayToByteArray(O),A=new Uint8Array(v);return t.byteArrayToString(l.inflate(A))},this.generatePassPhrase=function(){return e.generatePassPhrase()},this.getAccountDetails=function(e){var t={};return t.publicKey=this.secretPhraseToPublicKey(e),t.accountId=this.publicKeyToAccountId(t.publicKey),t.accountRs=this.accountIdToAccountRS(t.accountId),t},this.secretPhraseToPublicKey=function(e){var r=t.stringToByteArray(e),o=m(r);return t.byteArrayToHexString(n.keygen(o).p)},this.getBlockTime=function(e){return Math.floor(Date.now()/1e3)-e},this.generateToken=function(e,n,r,o){var i=C(e),a=t.hexStringToByteArray(r),s=a,l=[],c=o;l[0]=255&c,l[1]=c>>8&255,l[2]=c>>16&255,l[3]=c>>24&255,i=i.concat(a,l),s=s.concat(l,t.hexStringToByteArray(this.signatureHex(t.byteArrayToHexString(i),n)));for(var u="",d=0;d<100;d+=5){var p=[];p[0]=255&s[d],p[1]=255&s[d+1],p[2]=255&s[d+2],p[3]=255&s[d+3],p[4]=255&s[d+4];var m=S(p);m<32?u+="0000000":m<1024?u+="000000":m<32768?u+="00000":m<1048576?u+="0000":m<33554432?u+="000":m<1073741824?u+="00":m<34359738368&&(u+="0"),u+=m.toString(32)}return u},this.secretPhraseToPrivateKey=function(e){return t.stringToHexString(e)},this.secretPhraseFromPrivateKey=function(e){return t.hexStringToString(e)},this.publicKeyToAccountId=function(e){var n=t.hexStringToByteArray(e);i.init(),i.update(n);var o=i.getBytes();o=t.byteArrayToHexString(o);var a=t.hexStringToByteArray(o).slice(0,8);return r.byteArrayToBigInteger(a).toString()},this.accountIdToAccountRS=function(e){var t=new o;return t.set(e)?t.toString():""},this.signatureHex=function(e,r){var o=t.hexStringToByteArray(e),i=t.hexStringToByteArray(r),a=m(i),s=n.keygen(a).s,l=m(o),c=m(l,s),u=n.keygen(c).p,d=m(l,u),p=n.sign(d,c,s);return t.byteArrayToHexString(p.concat(d))},this.signTransactionHex=function(e,t){return e.substr(0,192)+t+e.substr(320)}}]),angular.module("crypto").controller("CryptoController",["PassPhraseGenerator","$scope","converters","curve25519","cryptoUtils","RsAddress","_hash",function(e,t,n,r,o,i,a){}]),angular.module("node",["baseClient"]),angular.module("baseClient").constant("nodeConfig",{SESSION_HAS_LOCAL:"node.has_local",SESSION_LOCAL_NODE:"node.local",SESSION_PEER_NODES:"node.peers"}),angular.module("node").service("NodeService",["nodeConfig","SessionStorageService","PeerService","OptionsService","$rootScope","LocalHostService","baseConfig",function(e,t,n,r,o,i,a){function s(){var n=t.getFromSession(e.SESSION_LOCAL_NODE);return n||r.getOption("USER_NODE_URL")}function l(){return t.getFromSession(e.SESSION_HAS_LOCAL)}function c(r){var i=t.getFromSession(e.SESSION_PEER_NODES);return i?i[r]:n.getPeers().then(function(n){return t.saveToSession(e.SESSION_PEER_NODES,n),o.$broadcast("peers-updated"),n[r]})}this.clearNodeConfig=function(){t.deleteFromSession(e.SESSION_PEER_NODES),t.deleteFromSession(e.SESSION_HAS_LOCAL),t.deleteFromSession(e.SESSION_LOCAL_NODE)},this.getNodesCount=function(){return(t.getFromSession(e.SESSION_PEER_NODES)||[]).length},this.getNode=function(e,t){if("AUTO"===e||0===e){var n=0;return t&&(n=Math.floor(Math.random()*this.getNodesCount())),c(n)}return"HTTPS"===e?r.getOption("HTTPS_URL"):"FOUNDATION"===e?r.getOption("FOUNDATION_URL"):"MANUAL"===e?r.getOption("USER_NODE_URL"):"DEVTESTNET"===e?r.getOption("DEVTESTNET_URL"):"TESTNET"===e?r.getOption("TESTNET_URL"):"LOCALTESTNET"===e?r.getOption("LOCALTESTNET_URL"):s()},this.getNodeUrl=function(e,t){var n=this.getNode(e,t);if("string"==typeof n)return n;if(!n._id)return a.FALLBACK_HOST_URL;var r=n._id+":"+n.apiServerPort;return"HTTPS"===e&&(r="https://"+n._id),/^https?:\/\//i.test(r)||(r="http://"+r),r},this.hasLocal=function(){return l()},this.getLocalNodeUrl=function(){var e=this.getNode(!0);if(e){return"http://localhost:"+e.apiServerPort}throw new Error("Local node not available")}}]),angular.module("node").controller("NodeController",["NodeService","OptionsService","$scope",function(e,t,n){n.init=function(){n.connectedURL=e.getNodeUrl(t.getOption("CONNECTION_MODE")),n.totalNodes=e.getNodesCount()}}]),angular.module("node").service("TransactionService",["SessionStorageService","baseConfig","Restangular","loginConfig","CryptoService","controlConfig","$rootScope","NodeService","OptionsService",function(e,t,n,r,o,i,a,s,l){function c(e,t){e=e||{},t=t||{};for(var n in e)e.hasOwnProperty(n)&&(t[n]=t[n]||e[n]);return t}function u(){var n=e.getFromSession(i.SESSION_ACCOUNT_CONTROL_HASCONTROL_KEY),r={};if(n){var o=e.getFromSession(i.SESSION_ACCOUNT_CONTROL_JSONCONTROL_KEY);r.phased=!0,r.phasingVotingModel=o.votingModel,r.phasingQuorum=o.quorum,r.phasingMinBalance=o.minBalance,r.phasingMinBalanceModel=o.minBalanceModel,r.phasingWhitelisted=d(o.whitelist);var s=e.getFromSession(t.SESSION_CURRENT_BLOCK)||0;r.phasingFinishHeight=s+a.options.TX_HEIGHT}return r}function d(e){for(var t=[],n=0;n<e.length;n++)t[n]=e[n].whitelisted;return t}this.createTransaction=function(r,o,i){var a={};return this.getBlockChainStatus().then(function(d){return e.saveToSession(t.SESSION_CURRENT_BLOCK,d.numberOfBlocks),i||(i=u()),a=c(r,a),a=c(i,a),a=c(o,a),n.setBaseUrl(s.getNodeUrl(l.getOption("CONNECTION_MODE"),l.getOption("RANDOMIZE_NODES"))),n.all(t.apiEndPoint).customPOST("","",a,"")})},this.getBlockChainStatus=function(){n.setBaseUrl(s.getNodeUrl(l.getOption("CONNECTION_MODE"),l.getOption("RANDOMIZE_NODES")));var e={requestType:"getBlockchainStatus"};return n.all(t.apiEndPoint).customGET("",e)}}]),angular.module("clientAlert",["baseClient","ui.router","ui.bootstrap"]),angular.module("clientAlert").constant("alertConfig",{mainAlertName:"main",sendTokenModalAlert:"sendToken",setInfoModalAlert:"setInfo",leaseBalanceModalAlert:"leaseBalance",startFundingMonitorModalAlert:"startFundingMonitor",blockGenerationModalAlert:"blockGeneration",setApproveTransactionAlert:"approveTransaction",issueAssetModalAlert:"issueAsset",deleteAssetModalAlert:"deleteAsset",cancelBidOrderModalAlert:"cancelBidOrder",transferAssetModalAlert:"transferAsset",deleteCurrencyModalAlert:"deleteCurrency",transferCurrencyModalAlert:"transferCurrency",setAccountControlModalAlert:"setAccountControl",optionModalAlert:"options",createPollModalAlert:"createPoll",buyAliasModalAlert:"buyAlias",cancelAliasModalAlert:"cancelAlias",deleteAliasModalAlert:"deleteAlias",editAliasModalAlert:"editAlias",setAliasModalAlert:"setAlias",transferAliasModalAlert:"transferAlias",dividendPaymentModalAlert:"dividendPayment",placeAssertOrderModalAlert:"placeAssertOrder",issueCurrencyModalAlert:"issueCurrency",readMessageModalAlert:"readMessage",sendMessageModalAlert:"sendMessage",castVoteModalAlert:"castVote",controlApproveModalAlert:"controlApprove",controlRemoveModalAlert:"controlRemove",publishExchangeOfferModalAlert:"publishExchangeOffer",buyCurrencyModalAlert:"buyCurrency",sellCurrencyModalAlert:"sellCurrency",currencyReserveClaimModalAlert:"currencyReserveClaim",currencyReserveIncreaseModalAlert:"currencyReserveIncrease",welcomeFaucetModalAlert:"welcomeFaucet",claimSecretTransaction:"claimSecretTransaction",decodeToken:"decodeToken",parseTransaction:"parseTransaction",broadcastTransaction:"broadcastTransaction",calculateHash:"calculateHash",chainStatistics:"chainStatistics",expectedAssetOrderModalAlert:"expectedAssetOrder",setPropertyAlert:"setProperty",deletePropertyAlert:"deleteProperty",createCampaignAlert:"createCampaign",reserveCampaignAlert:"reserveCampaign",createSubscriptionAlert:"createSubscription",createEscrowAlert:"createEscrow",signEscrowAlert:"signEscrow",createShuffleModalAlert:"createShuffle",registerShuffleModalAlert:"registerShuffle",startShuffleModalAlert:"startShuffle",stopShuffleModalAlert:"stopShuffle",cancelShuffleModalAlert:"cancelShuffle",readNewsAlert:"readNews",deleteAssetFullModalAlert:"deleteAssetFull",createATModalAlert:"createAT",startFundingMonitorAlert:"startFundingMonitor",stopFundingMonitorAlert:"stopFundingMonitor"}),angular.module("clientAlert").service("AlertService",["$rootScope","alertConfig",function(e,t){function n(e){return e||r}this.alerts=[],this.alertHandlers=[];var r=t.mainAlertName;this.addAlert=function(e,t){t=n(t),this.alerts[t]||(this.alerts[t]=[]),this.alerts[t].push(e),this.notify(t)},this.closeAlert=function(e,t){t=n(t),this.alerts[t]||(this.alerts[t]=[]),this.alerts[t].splice(e,1),this.notify()},this.getAlerts=function(){return this.alerts},this.subscribe=function(t,r,o){var i=e.$on(n(o),r);t.$on("$destroy",i)},this.notify=function(t){e.$emit(n(t))},this.getNoConnectionMessage=function(e){return{type:"danger",msg:"Sorry, an error occured! Reason: Bad Connection"}},this.getAlertName=function(e){return n(e)}}]),angular.module("clientAlert").controller("AlertDemoCtrl",["$scope","AlertService",function(e,t){function n(){e.alerts=t.getAlerts()}e.alerts=[],e.addAlert=function(e,n){t.addAlert(e,n)},e.closeAlert=function(e,n){t.closeAlert(e,n)},e.alertInit=function(r){t.subscribe(e,n,r)}}]),angular.module("addressbook",["baseClient","ui.router","ui.bootstrap","indexedDB"]),angular.module("addressbook").constant("addressBookConfig",{tableAddressBook:"addressBook"}),angular.module("addressbook").config(["$indexedDBProvider","addressBookConfig",function(e,t){e.connection("clientIndexedDB").upgradeDatabase(1,function(e,n,r){var o=n.createObjectStore(t.tableAddressBook,{keyPath:["publicKey","accountRS"]});o.createIndex("tag_idx","tags",{unique:!1}),o.createIndex("public_key_idx","publicKey",{unique:!1}),o.createIndex("account_rs_idx","accountRS",{unique:!1})})}]),angular.module("addressbook").service("AddressService",["$indexedDB","addressBookConfig","SessionStorageService","loginConfig",function(e,t,n,r){this.createAddress=function(n,r,o,i,a){e.openStore(t.tableAddressBook,function(e){e.insert({publicKey:n,accountRS:r,tags:o}).then(i,a)})},this.getAllContacts=function(n,r,o){e.openStore(t.tableAddressBook,function(e){var t=e.query();t=t.$eq(n),t=t.$index("public_key_idx"),e.eachWhere(t).then(r,o)})},this.clearContacts=function(n,r){e.openStore(t.tableAddressBook,function(e){e.clear().then(n,r)})},this.getContactsCount=function(n,r){e.openStore(t.tableAddressBook,function(e){e.count().then(function(e){n(e)})})},this.getAccountDetailsFromSession=function(e){var t=n.getFromSession(r.SESSION_ACCOUNT_DETAILS_KEY);return e?t[e]:t},this.deleteContact=function(n,r,o,i){e.openStore(t.tableAddressBook,function(e){var t=[n,r];e.delete(t).then(o,i)})}}]),angular.module("addressbook").controller("AddressBookCtrl",["$scope","AddressService","DTOptionsBuilder","DTColumnBuilder","searchTermFilter","$uibModalInstance","$compile","params",function(e,t,n,r,o,i,a,s){function l(t,n,r,o){return $("td",t).unbind("click"),$("td",t).bind("click",function(){e.$apply(function(){s.closeOnClick&&i.close(n)})}),t}function c(){e.dtInstance._renderer.rerender()}var u=e.$on("reload-address-book",c);e.$on("$destroy",u),e.contact={},e.contact.account=s.accountRS,e.contact.tag=s.tag,e.cancel=function(){i.dismiss("cancel")},e.dtOptions=n.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("serverSide",!1).withDataProp("accounts").withOption("processing",!0).withOption("info",!1).withOption("paging",!0).withOption("ordering",!1).withOption("processing",!0).withOption("bFilter",!1).withOption("rowCallback",l).withOption("fnRowCallback",function(t,n,r,o){a(t)(e),l(t,n,r,o)}).withOption("ajax",function(e,n,r){var o=t.getAccountDetailsFromSession("publicKey");t.getAllContacts(o,function(e){e||(e=[]);var t={accounts:e};n({iTotalRecords:t.accounts.length,iTotalDisplayRecords:t.accounts.length,accounts:t.accounts||[]})},function(e){})}).withDisplayLength(5).withBootstrap(),e.dtColumns=[r.newColumn("accountRS").withTitle("Account").notSortable().renderWith(function(e,t,n,r){return o(e)}),r.newColumn("tags").withTitle("Tag").notSortable().renderWith(function(e,t,n,r){return e}),r.newColumn("accountRS").withTitle("Action").notSortable().renderWith(function(e,t,n,r){return"<a href ng-click=\"deleteContact('"+e+'\')" ng-controller="AddressBookEditCtrl"> <button ng-disabled="" class="btn btn-danger btn-xs"> <i class="fa fa-close" aria-hidden="true"></i> </button> </a>'})],e.dtColumnsLite=[r.newColumn("accountRS").withTitle("Account").notSortable().renderWith(function(e,t,n,r){return o(e)}),r.newColumn("tags").withTitle("Tag").notSortable().renderWith(function(e,t,n,r){return e}),r.newColumn("accountRS").withTitle("Actions").notSortable().renderWith(function(e,t,n,r){return'<button ng-disabled="" class="btn btn-success btn-xs" autofocus> <i class="fa fa-plus" aria-hidden="true"></i> </button>'})],e.dtInstanceCallback=function(t){e.dtInstance=t}}]),angular.module("addressbook").controller("AddressBookEditCtrl",["$scope","AddressService","$rootScope",function(e,t,n){e.createNewContact=function(e,r){var o=t.getAccountDetailsFromSession("publicKey");t.createAddress(o,e,r,function(){n.$broadcast("reload-address-book")},function(e){console.log("error "+e)})},e.deleteContact=function(e){var r=t.getAccountDetailsFromSession("publicKey");t.deleteContact(r,e,function(){n.$broadcast("reload-address-book")},function(){console.log("error")})}}]),angular.module("options",["baseClient","ui.router","ui.bootstrap","indexedDB","node","clientAlert"]),angular.module("options").constant("optionsConfig",{tableOptions:"options"}),angular.module("options").constant("DEFAULT_OPTIONS",{DEADLINE:"60",REFRESH_INTERVAL_MILLI_SECONDS:"60000",TX_HEIGHT:10080,USER_NODE_URL:"http://localhost:23457",USE_LOCAL_NODE:0,AUTO_UPDATE:1,CONNECTION_MODE:"TESTNET",VERSION:"0.8.1b",RANDOMIZE_NODES:1,TESTNET:1,TESTNET_URL:"http://185.35.138.140:9876",DEVTESTNET_URL:"http://185.35.138.140:9000",LOCALTESTNET_URL:"http://localhost:9876",FOUNDATION_URL:"http://46.244.20.41:23457",HTTPS_URL:"https://ssl.infinity-economics.org",LOCAL_HOST_URL:"http://localhost:23457",EXTENSIONS:1}),angular.module("options").config(["$indexedDBProvider","optionsConfig",function(e,t){e.connection("clientIndexedDB").upgradeDatabase(2,function(e,n,r){var o=n.createObjectStore(t.tableOptions,{keyPath:["publicKey","optionName"]});o.createIndex("value_idx","value",{unique:!1}),o.createIndex("public_key_idx","publicKey",{unique:!1}),o.createIndex("option_name_idx","optionName",{unique:!1})})}]),angular.module("options").service("OptionsService",["$indexedDB","optionsConfig","SessionStorageService","DEFAULT_OPTIONS","$rootScope","baseConfig",function(e,t,n,r,o,i){this.insertOption=function(n,r,o,i,a){e.openStore(t.tableOptions,function(e){e.insert({publicKey:n,optionName:r,value:o}).then(i,a)})},this.insertOptions=function(n,r,o){e.openStore(t.tableOptions,function(e){e.insert(n).then(r,o)})},this.updateOptions=function(n,r,o){e.openStore(t.tableOptions,function(e){e.upsert(n).then(r,o)})},this.getAllOptions=function(n,r,o){n&&e.openStore(t.tableOptions,function(e){var t=e.query();t=t.$eq(n),t=t.$index("public_key_idx"),e.eachWhere(t).then(r,o)})},this.clearOptions=function(n,r){e.openStore(t.tableOptions,function(e){e.clear().then(n,r)})},this.getContactsCount=function(t,n){e.openStore(addressBookConfig.tableAddressBook,function(e){e.count().then(function(e){console.log(e),t(e)})})},this.loadOptions=function(e,t,o){this.getAllOptions(e,function(e){for(var o=JSON.parse(JSON.stringify(r)),a=0;a<e.length;a++){var s=e[a];o[s.optionName]=s.value}n.saveToSession(i.SESSION_APP_OPTIONS,o),t(o)},function(e){o(e)})},this.clearContacts=function(n,r){e.openStore(t.tableOptions,function(e){e.clear().then(n,r)})},this.getOption=function(e,t){var o=n.getFromSession(i.SESSION_APP_OPTIONS);return o?void 0===o[e]?r[e]:o[e]:r[e]}}]),angular.module("options").service("OptionsConfigureService",["CommonsService","NodeService","SessionStorageService","LocalHostService","nodeConfig","$rootScope",function(e,t,n,r,o,i){function a(){var e=n.getFromSession(o.SESSION_LOCAL_NODE);if(e){return new URL(i.options.USER_NODE_URL).hostname===e._id}return!1}this.setUserPeerNode=function(){"AUTO"===i.options.CONNECTION_MODE||a()||r.getPeerState(i.options.USER_NODE_URL).then(function(e){var t=new URL(i.options.USER_NODE_URL);e._id=t.hostname,n.saveToSession(o.SESSION_LOCAL_NODE,e),n.saveToSession(o.SESSION_HAS_LOCAL,!0)},function(e){n.saveToSession(o.SESSION_HAS_LOCAL,!1)})}}]),angular.module("options").controller("OptionsCtrl",["$scope","OptionsService","$uibModalInstance","$compile","params","$rootScope","DEFAULT_OPTIONS","CommonsService","NodeService","LocalHostService","$validation","AlertService","alertConfig","SessionStorageService","baseConfig","$state",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g){function h(e,t){e=e||{},t=t||{};for(var n in e)e.hasOwnProperty(n)&&(isNaN(e[n])||(e[n]=parseInt(e[n])),t[n]=e[n]);return t}function S(e){var t={};for(var n in a)a.hasOwnProperty(n)&&(t[n]=e[n]);return t}e.$watchCollection("optionsForm",function(e){}),e.loadOptions=function(){var n=s.getAccountDetailsFromSession("publicKey");t.loadOptions(n,function(t){h(t,e.optionsForm),i.options=t,m.saveToSession(f.SESSION_APP_OPTIONS,t)},function(e){console.log(e),i.options=a,m.saveToSession(f.SESSION_APP_OPTIONS,a)})},e.getOption=function(e){return t.getOption(e)},e.validateForm=function(){e.optionsForm.CONNECTION_MODE;return isRequired?e.isValidUrl():Promise.reject("Form is not valid")},e.validateAndUpdate=function(t){var n=t.USER_NODE_URL,r=t.CONNECTION_MODE;e.updateConnectionMode(t),"AUTO"===r?e.updateOptions(t):n&&c.getPeerState(n).then(function(n){e.updateOptions(t)},function(e){console.log("error"),d.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: This node URL is not valid"},p.optionModalAlert)})},e.updateOptions=function(n){var r=s.getAccountDetailsFromSession("publicKey"),o=S(e.optionsForm),c=[];for(var u in o)if(o.hasOwnProperty(u)){var d={publicKey:r,optionName:u,value:o[u]};c.push(d)}t.updateOptions(c,function(n){var r=s.getAccountDetailsFromSession("publicKey");t.loadOptions(r,function(t){i.options=t,m.saveToSession(f.SESSION_APP_OPTIONS,t),l.clearNodeConfig(),i.$broadcast("reload-options"),e.cancel(),g.reload()},function(t){console.log(t),i.options=a,m.saveToSession(f.SESSION_APP_OPTIONS,a),e.cancel(),g.reload()})},function(t){e.cancel()})},e.validateForm=function(e){u.validate(e)},e.CONNECTION_MODES=["AUTO","HTTPS","FOUNDATION","MANUAL","LOCAL_HOST","TESTNET","LOCALTESTNET","DEVTESTNET"],e.updateConnectionMode=function(t){var n=t.CONNECTION_MODE;"LOCAL_HOST"===n?(t.USER_NODE_URL="http://localhost:23457",t.RANDOMIZE_NODES=0,t.TESTNET=!1,t.EXTENSIONS=1):"MANUAL"===n?(t.RANDOMIZE_NODES=0,t.TESTNET=!1,t.EXTENSIONS=1):"HTTPS"===n?(t.USER_NODE_URL="https://ssl.infinity-economics.org",t.RANDOMIZE_NODES=0,t.TESTNET=!1,t.EXTENSIONS=1):"AUTO"===n?(t.RANDOMIZE_NODES=1,t.TESTNET=!1,t.EXTENSIONS=1):"FOUNDATION"===n?(t.USER_NODE_URL="http://46.244.20.41:23457",t.RANDOMIZE_NODES=0,t.TESTNET=!1,t.EXTENSIONS=1):"TESTNET"===n?(t.USER_NODE_URL="http://185.35.138.140:9876",t.RANDOMIZE_NODES=0,t.TESTNET=!0,t.EXTENSIONS=1):"LOCALTESTNET"===n?(t.USER_NODE_URL="http://localhost:9876",t.RANDOMIZE_NODES=0,t.TESTNET=!0,t.EXTENSIONS=1):"DEVTESTNET"===n&&(t.USER_NODE_URL="http://185.35.138.140:9000",t.RANDOMIZE_NODES=0,t.TESTNET=!0,t.DEVNET=!0,t.EXTENSIONS=1),e.validateForm(t)},e.isValidUrl=function(){var t=e.optionsForm.USER_NODE_URL;return!!t&&c.isValidUrl(t)},e.cancel=function(){n.dismiss("cancel")}}]),angular.module("exchanges",["baseClient"]),
angular.module("exchanges").constant("exchangesConfig",{BLOCKR_URL_END_POINT:"https://blockexplorer.com/api/",BLOCKR_ADDRESS_END_POINT:"addr"}),angular.module("exchanges").factory("BlockrRestangular",["Restangular","exchangesConfig",function(e,t){return e.withConfig(function(e){e.setBaseUrl(t.BLOCKR_URL_END_POINT)})}]),angular.module("exchanges").service("BlockrService",["BlockrRestangular","exchangesConfig",function(e,t){this.getAddressBalance=function(n){return e.all(t.BLOCKR_ADDRESS_END_POINT).one(n).get()}}]),angular.module("exchanges").controller("BlockrMainController",["$scope","BlockrService","$uibModal",function(e,t,n){e.openBtcDetailsModal=function(e){n.open({animation:!0,templateUrl:"exchanges/modals/btc-details.html",size:"lg",controller:"BlockrController",resolve:{params:function(){return{address:e}}}})}}]),angular.module("exchanges").controller("BlockrController",["$scope","BlockrService","$uibModalInstance","params","DTColumnBuilder","DTOptionsBuilder","$compile",function(e,t,n,r,o,i,a){e.cancel=function(){n.dismiss("cancel")},e.getBtcAdressBalance=function(){e.BlockrServicePromise=t.getAddressBalance(r.address).then(function(t){e.addrStr=t.addrStr,e.balance=t.balance,e.totalReceived=t.totalReceived,e.totalSent=t.totalSent,e.unconfirmedBalance=t.unconfirmedBalance,e.txApperances=t.txApperances,e.balance=t.balance},function(e){})},e.dtInstanceCallback=function(t){e.dtInstance=t}}]),angular.module("login",["baseClient","crypto","ui.router","ui.bootstrap","multiStepForm","node","addressbook","options"]),angular.module("login").config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("client.welcome",{url:"^/welcome",templateUrl:"./login/views/welcome.html",controller:"LoginCtrl"}).state("client.login",{url:"^/login",templateUrl:"./login/views/login.html",controller:"LoginCtrl"}).state("client.signedin.dashboard",{url:"^/dashboard",templateUrl:"./commons/signedin.html",controller:"LoginCtrl"}).state("client.logout",{url:"^/logout",templateUrl:"./login/views/welcome.html",controller:"LoginCtrl",params:{sessionCleared:!1,localCleared:!1}})}]),angular.module("login").service("LoginService",["CryptoService","loginConfig","SessionStorageService","$rootScope",function(e,t,n,r){this.calculateAccountDetailsFromSecret=function(o,i){n.deleteFromSession(t.SESSION_ACCOUNT_DETAILS_KEY),n.deleteFromSession(t.SESSION_ACCOUNT_PRIVATE_KEY);var a=e.getAccountDetails(o);return i&&n.saveToSession(t.SESSION_ACCOUNT_DETAILS_KEY,a),r.$broadcast("reload-options"),a},this.calculatePrivateKeyFromSecret=function(r,o){n.deleteFromSession(t.SESSION_ACCOUNT_PRIVATE_KEY);var i=e.secretPhraseToPrivateKey(r);return o&&n.saveToSession(t.SESSION_ACCOUNT_PRIVATE_KEY,i),i},this.generatePassPhrase=function(){return e.generatePassPhrase()}}]),angular.module("login").controller("LoginCtrl",["$scope","LoginService","SessionStorageService","loginConfig","$state","$uibModal","peerConfig","nodeConfig","NodeService","$stateParams","OptionsService","CommonsService","$rootScope","OptionsConfigureService","baseConfig","LocalHostService","PeerService",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g,h){e.loginToAccount=function(e,n){n=!0,t.calculateAccountDetailsFromSecret(e,!0),n&&t.calculatePrivateKeyFromSecret(e,!0),o.go("client.signedin.account.details")},e.accountDetails={},e.getAccountFromSession=function(){e.accountDetails=n.getFromSession(r.SESSION_ACCOUNT_DETAILS_KEY),e.privateKey=n.getFromSession(r.SESSION_ACCOUNT_PRIVATE_KEY),e.activePeer=l.getNode(!1),e.localPeer=n.getFromSession(s.SESSION_LOCAL_NODE)},e.openSignUpModal=function(){i.open({animation:!0,templateUrl:"login/views/signup-form.html",size:"lg",controller:"SignUpCtrl",resolve:{params:function(){return{}}}})},e.openSignOutModal=function(){i.open({animation:!0,templateUrl:"login/views/modals/logout-confirm.html",size:"lg",controller:"SignOutCtrl"})},e.postLogOut=function(){e.sessionCleared=c.sessionCleared,e.localCleared=c.localCleared},e.$on("reload-options",function(){d.getAccountDetailsFromSession("publicKey");g.getPeerState(u.getOption("USER_NODE_URL")).then(function(e){var t=new URL(u.getOption("USER_NODE_URL"));e._id=t.hostname,n.saveToSession(s.SESSION_LOCAL_NODE,e),n.saveToSession(s.SESSION_HAS_LOCAL,!0)},function(e){n.saveToSession(s.SESSION_HAS_LOCAL,!1)}),h.getPeers().then(function(e){n.saveToSession(s.SESSION_PEER_NODES,e),p.$broadcast("peers-updated")})})}]),angular.module("login").controller("SignUpCtrl",["$scope","LoginService","SessionStorageService","loginConfig","$state","$uibModalInstance",function(e,t,n,r,o,i){e.cancel=function(){i.dismiss("cancel")},e.steps=[{templateUrl:"login/views/signup-disclaimer.html",title:"Step 1/3 - Accept Disclaimer"},{templateUrl:"login/views/signup-passphrase.html",title:"Step 2/3 - Generate Passphrase"},{templateUrl:"login/views/signup-confirm.html",title:"Step 3/3 - Confirm PassPhrase and Sign In"}],e.createNewAccount=function(){e.secret=t.generatePassPhrase(),e.accountDetails=t.calculateAccountDetailsFromSecret(e.secret,!1)},e.confirmAndLogin=function(n,r){r=!0,n===e.secret?(t.calculateAccountDetailsFromSecret(n,!0),r&&t.calculatePrivateKeyFromSecret(e.secret,!0),e.cancel(),o.go("client.signedin.account.details")):e.error="Invalid pass phrase"}}]),angular.module("login").controller("SignOutCtrl",["$scope","LoginService","SessionStorageService","loginConfig","$state","$uibModalInstance","AddressService","OptionsService",function(e,t,n,r,o,i,a,s){e.cancel=function(){i.dismiss("cancel")},e.logout=function(e){n.resetSession(),e&&(a.clearContacts(),s.clearOptions()),i.dismiss("cancel"),o.go("client.logout",{sessionCleared:!0,localCleared:e})}}]),angular.module("assets",["baseClient","crypto","ui.router","ui.bootstrap","multiStepForm","node","options"]),angular.module("assets").constant("assetsConfig",{assetsEndPoint:"api"}),angular.module("assets").config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("client.signedin.assets",{url:"^/assets",templateUrl:"./assets/views/main.html",abstract:!0}).state("client.signedin.assets.myassets",{url:"^/assets/myassets",templateUrl:"./assets/views/myassets.html",controller:"MyAssetsCtrl"}).state("client.signedin.assets.assets",{url:"^/assets/assets",templateUrl:"./assets/views/assets.html",controller:"AssetsCtrl"}).state("client.signedin.assets.openorders",{url:"^/assets/orders",templateUrl:"./assets/views/openorders.html",controller:"AssetsOpenOrdersCtrl"}).state("client.signedin.assets.trade",{url:"^/assets/{assetId}/trade",templateUrl:"./assets/views/trade-desk.html",controller:"TradeDeskInputController"}).state("client.signedin.assets.lasttrades",{url:"^/assets/lastrades",templateUrl:"./assets/views/lasttrades.html",controller:"AllTradesCtrl"}).state("client.signedin.assets.lasttransfers",{url:"^/assets/lasttransfers",templateUrl:"./assets/views/lasttransfers.html",controller:"MyTransfersCtrl"}).state("client.signedin.assets.mytrades",{url:"^/assets/mytrades",templateUrl:"./assets/views/mytrades.html",controller:"MytradesCtrl"})}]),angular.module("assets").service("AssetsService",["nodeConfig","SessionStorageService","NodeService","baseConfig","assetsConfig","Restangular","loginConfig","CryptoService","TransactionService","$rootScope","OptionsService","controlConfig",function(e,t,n,r,o,i,a,s,l,c,u,d){this.GET_ASSET_ORDERS={BID_ORDER:"getBidOrders",ASK_ORDER:"getAskOrders"},this.getAssets=function(e,t,r,a){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE"),u.getOption("RANDOMIZE_NODES")));var s={requestType:"getAllAssets",firstIndex:e,lastIndex:t,includeCounts:!0,order:r,orderColumn:a};return i.all(o.assetsEndPoint).customGET("",s)},this.getAsset=function(e,t){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE"),u.getOption("RANDOMIZE_NODES")));var r={requestType:"getAsset",asset:e,includeCounts:t};return i.all(o.assetsEndPoint).customGET("",r)},this.getAccountAssets=function(e){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE"),u.getOption("RANDOMIZE_NODES")));var t={requestType:"getAccountAssets",account:e,includeAssetInfo:!0,includeCounts:!0};return i.all(o.assetsEndPoint).customGET("",t)},this.getAccountSingleAsset=function(e,t){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE"),u.getOption("RANDOMIZE_NODES")));var r={requestType:"getAccountAssets",account:e,asset:t,includeAssetInfo:!0};return i.all(o.assetsEndPoint).customGET("",r)},this.getMultipleAssetLastTrades=function(e){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE"),u.getOption("RANDOMIZE_NODES")));var t={requestType:"getLastTrades",assets:e};return i.all(o.assetsEndPoint).customGET("",t)},this.getAccountCurrentBidOrders=function(e,t,r){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE"),u.getOption("RANDOMIZE_NODES")));var a={requestType:"getAccountCurrentBidOrders",account:e,firstIndex:t,lastIndex:r};return i.all(o.assetsEndPoint).customGET("",a)},this.getAccountCurrentAskOrders=function(e,t,r){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE"),u.getOption("RANDOMIZE_NODES")));var a={requestType:"getAccountCurrentAskOrders",account:e,firstIndex:t,lastIndex:r};return i.all(o.assetsEndPoint).customGET("",a)},this.issueAsset=function(e,t,o,a,s,c){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE"),u.getOption("RANDOMIZE_NODES")));var d={requestType:"issueAsset",publicKey:s,quantityQNT:parseInt(o),name:e,description:t,feeTQT:parseInt(c*r.TOKEN_QUANTS,10),deadline:u.getOption("DEADLINE"),broadcast:"false",decimals:parseInt(a)};return l.createTransaction(d)},this.deleteAssetShares=function(e,t,o,a){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE"),u.getOption("RANDOMIZE_NODES")));var s={requestType:"deleteAssetShares",publicKey:a,quantityQNT:parseInt(t),asset:e,feeTQT:parseInt(o*r.TOKEN_QUANTS,10),deadline:u.getOption("DEADLINE"),broadcast:"false"};return l.createTransaction(s)},this.deleteAssetFull=function(e,t,o){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE"),u.getOption("RANDOMIZE_NODES")));var a={requestType:"deleteAsset",publicKey:o,asset:e,feeTQT:parseInt(t*r.TOKEN_QUANTS,10),deadline:u.getOption("DEADLINE"),broadcast:"false"};return l.createTransaction(a)},this.serachAssets=function(e){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE"),u.getOption("RANDOMIZE_NODES")));var t={requestType:"searchAssets",query:e};return i.all(o.assetsEndPoint).customGET("",t)},this.cancelOrder=function(e,t,o,a){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE"),u.getOption("RANDOMIZE_NODES")));var s;"bid"===a?s="cancelBidOrder":"ask"===a&&(s="cancelAskOrder");var c={requestType:s,publicKey:o,order:e,feeTQT:parseInt(t*r.TOKEN_QUANTS,10),deadline:u.getOption("DEADLINE"),broadcast:"false"};return l.createTransaction(c)},this.transferAsset=function(e,t,o,a,s){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE"),u.getOption("RANDOMIZE_NODES")));var c={requestType:"transferAsset",recipient:t,asset:o,publicKey:e,feeTQT:parseInt(s*r.TOKEN_QUANTS,10),deadline:u.getOption("DEADLINE"),broadcast:"false",quantityQNT:parseInt(a)};return l.createTransaction(c)},this.dividendPayment=function(e,o,a,s,c){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE"),u.getOption("RANDOMIZE_NODES")));var p={requestType:"dividendPayment",asset:o,publicKey:e,feeTQT:parseInt(c*r.TOKEN_QUANTS,10),deadline:u.getOption("DEADLINE"),broadcast:"false",amountTQTPerQNT:parseInt(s),height:parseInt(a)};return t.getFromSession(d.SESSION_ACCOUNT_CONTROL_HASCONTROL_KEY)&&(p.phasingFinishHeight=parseInt(a)+1e3),l.createTransaction(p)},this.placeOrder=function(e,t,o,a,s,c){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE"),u.getOption("RANDOMIZE_NODES")));var d;d="bid"===c?"placeBidOrder":"placeAskOrder";var p={requestType:d,priceTQT:parseInt(t),asset:o,publicKey:e,feeTQT:parseInt(s*r.TOKEN_QUANTS,10),deadline:u.getOption("DEADLINE"),broadcast:"false",quantityQNT:parseInt(a)};return l.createTransaction(p)},this.getAssetLastTrades=function(e,t,r){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE"),u.getOption("RANDOMIZE_NODES")));var a={requestType:"getTrades",asset:e,includeAssetInfo:!0,firstIndex:t,lastIndex:r};return i.all(o.assetsEndPoint).customGET("",a)},this.getAssetOrders=function(e,t,r,a){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE"),u.getOption("RANDOMIZE_NODES")));var s={requestType:t,asset:e,firstIndex:r,lastIndex:a};return i.all(o.assetsEndPoint).customGET("",s)},this.getAllTrades=function(e,t){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE"),u.getOption("RANDOMIZE_NODES")));var r={requestType:"getAllTrades",includeAssetInfo:!0,firstIndex:e,lastIndex:t};return i.all(o.assetsEndPoint).customGET("",r)},this.getAllOpenAskOrders=function(e,t){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE"),u.getOption("RANDOMIZE_NODES")));var r={requestType:"getAllOpenAskOrders",firstIndex:e,lastIndex:t};return i.all(o.assetsEndPoint).customGET("",r)},this.getAllOpenBidOrders=function(e,t){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE"),u.getOption("RANDOMIZE_NODES")));var r={requestType:"getAllOpenBidOrders",firstIndex:e,lastIndex:t};return i.all(o.assetsEndPoint).customGET("",r)},this.getAllLastTransfers=function(e,t,r){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE"),u.getOption("RANDOMIZE_NODES")));var a={requestType:"getAssetTransfers",account:e,includeAssetInfo:!0,firstIndex:t,lastIndex:r};return i.all(o.assetsEndPoint).customGET("",a)},this.getMyTrades=function(e,t,r){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE"),u.getOption("RANDOMIZE_NODES")));var a={requestType:"getTrades",account:e,includeAssetInfo:!0,firstIndex:t,lastIndex:r};return i.all(o.assetsEndPoint).customGET("",a)},this.getExpectedAskOrders=function(e){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE")));var t={requestType:"getExpectedAskOrders",asset:e,sortByPrice:!0};return i.all(o.assetsEndPoint).customGET("",t)},this.getExpectedBidOrders=function(e){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE")));var t={requestType:"getExpectedBidOrders",asset:e,sortByPrice:!0};return i.all(o.assetsEndPoint).customGET("",t)},this.getExpectedAssetDeletes=function(e,t){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE")));var r={requestType:"getExpectedAssetDeletes",includeAssetInfo:!0};return i.all(o.assetsEndPoint).customGET("",r)},this.getExpectedAssetTransfers=function(e,t){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE")));var r={requestType:"getExpectedAssetTransfers",includeAssetInfo:!0};return i.all(o.assetsEndPoint).customGET("",r)},this.getExpectedOrderCancellations=function(){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE")));var e={requestType:"getExpectedOrderCancellations"};return i.all(o.assetsEndPoint).customGET("",e)},this.getBidOrderTrades=function(e,t,r){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE")));var a={requestType:"getOrderTrades",bidOrder:e,firstIndex:t,lastIndex:r,includeAssetInfo:!0};return i.all(o.assetsEndPoint).customGET("",a)},this.getAskOrderTrades=function(e,t,r){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE")));var a={requestType:"getOrderTrades",askOrder:e,firstIndex:t,lastIndex:r,includeAssetInfo:!0};return i.all(o.assetsEndPoint).customGET("",a)},this.getDividendsHistory=function(e,t,r,a){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE")));var s={requestType:"getAssetDividends",asset:e,firstIndex:t,lastIndex:r,timestamp:a};return i.all(o.assetsEndPoint).customGET("",s)}}]),angular.module("assets").controller("AssetsMainCtrl",["$scope","AssetsService","amountTQTFilter","timestampFilter","DTOptionsBuilder","DTColumnBuilder","$uibModal","$compile","baseConfig","supplyFilter","searchTermFilter","$state",function(e,t,n,r,o,i,a,s,l,c,u,d){e.openIssueAssetModal=function(){a.open({animation:!0,templateUrl:"assets/modals/issue-asset-form.html",size:"lg",controller:"AssetsFormCtrl",resolve:{params:function(){return{}}}})},e.openDeleteAssetModal=function(e,t){a.open({animation:!0,templateUrl:"assets/modals/delete-asset-form.html",size:"lg",controller:"AssetsFormCtrl",resolve:{params:function(){return{assetId:e,decimals:t}}}})},e.openDeleteAsseFulltModal=function(e,t){a.open({animation:!0,templateUrl:"assets/modals/delete-asset-full-form.html",size:"lg",controller:"AssetsFormCtrl",resolve:{params:function(){return{assetId:e,decimals:t}}}})},e.openPlaceOrderModal=function(e){a.open({animation:!0,templateUrl:"assets/modals/place-order-form.html",size:"lg",controller:"AssetsFormCtrl",resolve:{params:function(){return{assetId:e}}}})},e.openTradeDeskModal=function(e,t){d.go("client.signedin.assets.trade",{assetId:e})},e.openSearchAssetModal=function(){a.open({animation:!0,templateUrl:"assets/modals/search-asset-form.html",size:"lg",controller:"AssetsFormCtrl",resolve:{params:function(){return{}}}})},e.openExpectedOrderModal=function(){a.open({animation:!0,templateUrl:"assets/modals/expected-order-form.html",size:"lg",controller:"AssetsFormCtrl",resolve:{params:function(){return{}}}})},e.openOrderTradesModal=function(){a.open({animation:!0,templateUrl:"assets/modals/order-trades-form.html",size:"lg",controller:"AssetsFormCtrl",resolve:{params:function(){return{}}}})},e.openExpectedTransfersModal=function(){a.open({animation:!0,templateUrl:"assets/modals/expected-transfers-form.html",size:"lg",controller:"AssetsFormCtrl",resolve:{params:function(){return{}}}})},e.openExpectedDeletesModal=function(){a.open({animation:!0,templateUrl:"assets/modals/expected-deletes-form.html",size:"lg",controller:"AssetsFormCtrl",resolve:{params:function(){return{}}}})},e.openExpectedBidModal=function(){a.open({animation:!0,templateUrl:"assets/modals/expected-bid-form.html",size:"lg",controller:"AssetsFormCtrl",resolve:{params:function(){return{}}}})},e.openExpectedCancellationsModal=function(){a.open({animation:!0,templateUrl:"assets/modals/expected-cancellations-form.html",size:"lg",controller:"AssetsFormCtrl",resolve:{params:function(){return{}}}})},e.openCancelOrderModal=function(e,t,n,r,o,i){a.open({animation:!0,templateUrl:"assets/modals/cancel-order-form.html",size:"lg",controller:"AssetsFormCtrl",resolve:{params:function(){return{orderId:e,assetId:t,quantity:n,price:r,decimals:o,type:i}}}})},e.openTransferAssetModal=function(e,t){a.open({animation:!0,templateUrl:"assets/modals/transfer-asset-form.html",size:"lg",controller:"AssetsFormCtrl",resolve:{params:function(){return{assetId:e,decimals:t}}}})},e.openSendAssetModal=function(){a.open({animation:!0,templateUrl:"assets/modals/send-asset-form.html",size:"lg",controller:"AssetsFormCtrl",resolve:{params:function(){return{}}}})},e.openDividendPaymentModal=function(e,t){a.open({animation:!0,templateUrl:"assets/modals/dividend-payment-form.html",size:"lg",controller:"AssetsFormCtrl",resolve:{params:function(){return{assetId:e,decimals:t}}}})},e.openAssetDetailsModal=function(e){a.open({animation:!0,templateUrl:"assets/modals/asset-details.html",size:"lg",controller:"AssetDetailsCtrl",resolve:{params:function(){return{assetId:e}}}})},e.openDividendsDetailsModal=function(e){a.open({animation:!0,templateUrl:"assets/modals/dividends-details.html",size:"lg",controller:"DividendsDetailsCtrl",resolve:{params:function(){return{assetId:e}}}})}}]),angular.module("assets").controller("AssetsCtrl",["$scope","AssetsService","amountTQTFilter","timestampFilter","DTOptionsBuilder","DTColumnBuilder","$uibModal","$compile","baseConfig","supplyFilter","searchTermFilter",function(e,t,n,r,o,i,a,s,l,c,u){e.sort_order="desc",e.sort_orderColumn="height",e.sort_default=function(){e.sort_order="desc",e.sort_orderColumn="height",e.reloadAssets()},e.sort_supply=function(){e.sort_orderColumn="quantity",e.reloadAssets()},e.sort_height=function(){e.sort_orderColumn="height",e.reloadAssets()},e.sort_decimals=function(){e.sort_orderColumn="decimals",e.reloadAssets()},e.sort_name=function(){e.sort_orderColumn="name",e.reloadAssets()},e.sort_toggle=function(){"desc"===e.sort_order?e.sort_order="asc":"asc"===e.sort_order&&(e.sort_order="desc"),e.reloadAssets()},e.dtOptions=o.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("info",!1).withOption("ordering",!1).withOption("serverSide",!0).withDataProp("assets").withOption("processing",!0).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){s(t)(e)}).withOption("ajax",function(n,r,o){var i=n.start+n.length-1;t.getAssets(n.start,i,e.sort_order,e.sort_orderColumn).then(function(e){r({iTotalRecords:1e3,iTotalDisplayRecords:1e3,assets:e.assets})})}).withDisplayLength(10).withBootstrap(),e.dtColumns=[i.newColumn("asset").withTitle("Details").notSortable().renderWith(function(e,t,n,r){return'<button type="button" class="btn btn-success btn-xs" ng-controller="SearchCtrl" ng-click="searchValue(\''+e+'\')"><i class="fa fa-list-ul" aria-hidden="true" style="width:15px;"></i></button>'}),i.newColumn("name").withTitle("Name").notSortable().renderWith(function(e,t,n,r){return"<a ng-click=\"openAssetDetailsModal('"+n.asset+'\')" ng-controller="AssetsMainCtrl"> '+e+"</a>"}),i.newColumn("accountRS").withTitle("Issuer").notSortable().renderWith(function(e,t,n,r){return u(e)}),i.newColumn("quantityQNT").withTitle("Current Supply").notSortable().renderWith(function(e,t,n,r){return c(e,n.decimals)}),i.newColumn("numberOfAccounts").withTitle("Shareholders").notSortable().renderWith(function(e,t,n,r){return e}),i.newColumn("numberOfTrades").withTitle("Trades").notSortable().renderWith(function(e,t,n,r){return e}),i.newColumn("numberOfTransfers").withTitle("Transfers").notSortable().renderWith(function(e,t,n,r){return e}),i.newColumn("asset").withTitle("Action").notSortable().renderWith(function(e,t,n,r){return'<button type="button" class="btn btn-default btn-xs"   popover-placement="left" popover-trigger="\'mouseenter\'" uib-popover= "TradeDesk" ng-controller="AssetsMainCtrl" ng-click="openTradeDeskModal(\''+e+"','"+n.decimals+'\')"> <i class="fa fa-bar-chart" aria-hidden="true" style="width:15px;"></i> </button> <button type="button" class="btn btn-default btn-xs"   popover-placement="left" popover-trigger="\'mouseenter\'" uib-popover= "Dividends History" ng-controller="AssetsMainCtrl" ng-click="openDividendsDetailsModal(\''+e+"','"+n.decimals+'\')"> <i class="fa fa-usd" aria-hidden="true" style="width:15px;"></i> </button>'})],e.dtInstanceCallback=function(t){e.dtInstance=t},e.reloadAssets=function(){e.dtInstance&&e.dtInstance._renderer.rerender()}}]),angular.module("assets").controller("MyAssetsCtrl",["$scope","AssetsService","amountTQTFilter","timestampFilter","DTOptionsBuilder","DTColumnBuilder","$uibModal","$compile","baseConfig","supplyFilter","searchTermFilter","CommonsService",function(e,t,n,r,o,i,a,s,l,c,u,d){e.accountRS=d.getAccountDetailsFromSession("accountRs"),e.dtOptionsAssets=o.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("info",!1).withOption("ordering",!1).withOption("serverSide",!1).withDataProp("accountAssets").withOption("paging",!0).withOption("ordering",!1).withOption("processing",!1).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){s(t)(e)}).withOption("ajax",function(e,n,r){var o=d.getAccountDetailsFromSession("accountId");t.getAccountAssets(o).then(function(e){n({iTotalRecords:e.accountAssets.length,iTotalDisplayRecords:e.accountAssets.length,accountAssets:e.accountAssets})})}).withDisplayLength(10).withBootstrap(),e.dtColumnsAssets=[i.newColumn("asset").withTitle("Details").notSortable().renderWith(function(e,t,n,r){return'<button type="button" class="btn btn-success btn-xs" ng-controller="SearchCtrl" ng-click="searchValue(\''+e+'\')"><i class="fa fa-list-ul" aria-hidden="true" style="width:15px;"></i></button>'}),i.newColumn("name").withTitle("Name").notSortable().renderWith(function(e,t,n,r){return"<a ng-click=\"openAssetDetailsModal('"+n.asset+'\')" ng-controller="AssetsMainCtrl"> '+e+"</a>"}),i.newColumn("quantityQNT").withTitle("Quantity").notSortable().renderWith(function(e,t,n,r){return c(e,n.decimals)}),i.newColumn("currentQuantityQNT").withTitle("Holding").notSortable().renderWith(function(e,t,n,r){return(100*n.quantityQNT/n.currentQuantityQNT).toLocaleString("en-US",{minimumFractionDigits:2})+"%"}),i.newColumn("numberOfAccounts").withTitle("Shareholders").notSortable().renderWith(function(e,t,n,r){return e}),i.newColumn("numberOfTrades").withTitle("Trades").notSortable().renderWith(function(e,t,n,r){return e}),i.newColumn("numberOfTransfers").withTitle("Transfers").notSortable().renderWith(function(e,t,n,r){return e}),i.newColumn("asset").withTitle("Actions").notSortable().renderWith(function(t,n,r,o){var i=!0;e.accountRS===r.issuerAccountRS&&(i=!1),e.accountRS===r.issuerAccountRS&&1===r.numberOfAccounts&&0===r.numberOfTrades&&r.numberOfTransfers;var a='<button class="btn btn-default btn-xs"  popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover= "Delete Shares" ng-click="openDeleteAssetModal(\''+t+"','"+r.decimals+'\')" ng-controller="AssetsMainCtrl"> <i class="fa fa-minus" aria-hidden="true" style="width:15px;"></i> </button>';return'<button class="btn btn-default btn-xs"  popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover= "Trade Desk" ng-click="openTradeDeskModal(\''+t+'\')" ng-controller="AssetsMainCtrl"> <i class="fa fa-bar-chart" aria-hidden="true" style="width:15px;"></i> </button>&nbsp<button class="btn btn-default btn-xs"  popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover= "Transfer Assets" ng-click="openTransferAssetModal(\''+t+"','"+r.decimals+'\')" ng-controller="AssetsMainCtrl"> <i class="fa fa-user" aria-hidden="true" style="width:15px;"></i> </button>&nbsp<button class="btn btn-default btn-xs"  popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover= "Divident Payments" ng-click="openDividendPaymentModal(\''+t+"','"+r.decimals+'\')" ng-controller="AssetsMainCtrl" ng-disabled="'+i+'"> <i class="fa fa-dollar" aria-hidden="true" style="width:15px;"></i> </button>&nbsp'+a+'&nbsp<button class="btn btn-default btn-xs"  popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover= "Delete Asset" ng-click="openDeleteAsseFulltModal(\''+t+"','"+r.decimals+'\')" ng-controller="AssetsMainCtrl" ng-disabled="'+!0+'"> <i class="fa fa-times" aria-hidden="true" style="width:15px;"></i> </button>'})],e.dtInstanceCallbackAssets=function(t){e.dtInstance=t},e.reloadAssets=function(){e.dtInstance&&e.dtInstance._renderer.rerender()}}]),angular.module("assets").controller("AssetsOpenOrdersCtrl",["$scope","AssetsService","amountTQTFilter","timestampFilter","DTOptionsBuilder","DTColumnBuilder","$uibModal","$compile","baseConfig","supplyFilter","searchTermFilter","CommonsService","numberStringFilter",function(e,t,n,r,o,i,a,s,l,c,u,d,p){e.dtBidOrdersOptions=o.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("info",!1).withOption("ordering",!1).withOption("serverSide",!0).withDataProp("bidOrders").withOption("processing",!0).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){s(t)(e)}).withOption("ajax",function(e,n,r){var o=d.getAccountDetailsFromSession("accountRs"),i=e.start+e.length-1;t.getAccountCurrentBidOrders(o,e.start,i).then(function(e){n({iTotalRecords:1e3,iTotalDisplayRecords:1e3,bidOrders:e.bidOrders})})}).withDisplayLength(10).withBootstrap(),e.dtBidOrdersColumns=[i.newColumn("order").withTitle("Order").notSortable().renderWith(function(e,t,n,r){return'<button type="button" class="btn btn-success btn-xs" ng-controller="SearchCtrl" ng-click="searchValue(\''+e+'\')"><i class="fa fa-list-ul" aria-hidden="true" style="width:15px;"></i></button>'}),i.newColumn("name").withTitle("Asset").notSortable().renderWith(function(e,t,n,r){return"<a ng-click=\"openAssetDetailsModal('"+n.asset+'\')" ng-controller="AssetsMainCtrl"> '+e+"</a>"}),i.newColumn("priceTQT").withTitle("Price").notSortable().renderWith(function(e,t,n,r){return(e*Math.pow(10,n.decimals)/1e8).toLocaleString("en-US",{minimumFractionDigits:n.decimals})}),i.newColumn("quantityQNT").withTitle("Quantity").notSortable().renderWith(function(e,t,n,r){return(parseInt(e)/Math.pow(10,n.decimals)).toLocaleString("en-US",{minimumFractionDigits:n.decimals})}),i.newColumn("order").withTitle("Action").notSortable().renderWith(function(e,t,n,r){return'<button class="btn btn-default btn-xs"   popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover= "Cancel" ng-click="openCancelOrderModal(\''+e+"','"+n.asset+"','"+n.quantityQNT+"','"+n.priceTQT+"','"+n.decimals+'\',\'bid\')" ng-controller="AssetsMainCtrl"> <i class="fa fa-times" aria-hidden="true"></i> </button> <button type="button" class="btn btn-default btn-xs"   popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover= "TradeDesk" ng-controller="AssetsMainCtrl" ng-click="openTradeDeskModal(\''+n.asset+"','"+n.decimals+'\')"> <i class="fa fa-bar-chart" aria-hidden="true" style="width:15px;"></i> </button>'})],e.dtBidOrdersInstanceCallback=function(t){e.dtInstanceBidOrder=t},e.reloadBidOrders=function(){e.dtInstanceBidOrder&&e.dtInstanceBidOrder._renderer.rerender()},e.dtAskOrdersOptions=o.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("info",!1).withOption("ordering",!1).withOption("serverSide",!0).withDataProp("askOrders").withOption("processing",!0).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){s(t)(e)}).withOption("ajax",function(e,n,r){var o=d.getAccountDetailsFromSession("accountRs"),i=e.start+e.length-1;t.getAccountCurrentAskOrders(o,e.start,i).then(function(e){n({iTotalRecords:1e3,iTotalDisplayRecords:1e3,askOrders:e.askOrders})})}).withDisplayLength(10).withBootstrap(),e.dtAskOrdersColumns=[i.newColumn("order").withTitle("Order").notSortable().renderWith(function(e,t,n,r){return'<button type="button" class="btn btn-success btn-xs" ng-controller="SearchCtrl" ng-click="searchValue(\''+e+'\')"><i class="fa fa-list-ul" aria-hidden="true" style="width:15px;"></i></button>'}),i.newColumn("name").withTitle("Asset").notSortable().renderWith(function(e,t,n,r){return"<a ng-click=\"openAssetDetailsModal('"+n.asset+'\')" ng-controller="AssetsMainCtrl"> '+e+"</a>"}),i.newColumn("priceTQT").withTitle("Price").notSortable().renderWith(function(e,t,n,r){return(e*Math.pow(10,n.decimals)/1e8).toLocaleString("en-US",{minimumFractionDigits:n.decimals})}),i.newColumn("quantityQNT").withTitle("Quantity").notSortable().renderWith(function(e,t,n,r){return(parseInt(e)/Math.pow(10,n.decimals)).toLocaleString("en-US",{minimumFractionDigits:n.decimals})}),i.newColumn("order").withTitle("Action").notSortable().renderWith(function(e,t,n,r){return'<button class="btn btn-default btn-xs"   popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover= "Cancel" ng-click="openCancelOrderModal(\''+e+"','"+n.asset+"','"+n.quantityQNT+"','"+n.priceTQT+"','"+n.decimals+'\',\'ask\')" ng-controller="AssetsMainCtrl"> <i class="fa fa-times" aria-hidden="true" style="width:15px;"></i> </button> <button type="button" class="btn btn-default btn-xs"   popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover= "TradeDesk" ng-controller="AssetsMainCtrl" ng-click="openTradeDeskModal(\''+n.asset+"','"+n.decimals+'\')"> <i class="fa fa-bar-chart" aria-hidden="true" style="width:15px;"></i> </button>'})],e.dtAskOrdersInstanceCallback=function(t){e.dtInstanceAskOrder=t},e.reloadAskOrders=function(){e.dtInstanceAskOrder&&e.dtInstanceAskOrder._renderer.rerender()}}]),angular.module("assets").controller("AssetsFormCtrl",["$scope","$uibModalInstance","params",function(e,t,n){e.cancel=function(){t.dismiss("cancel")},e.$on("close-modal",function(){t.dismiss("cancel")});var r=[{templateUrl:"assets/modals/issue-asset-details.html",title:"Issue Asset Details",controller:"IssueAssetFormController",isolatedScope:!0},{templateUrl:"assets/modals/issue-asset-confirm.html",title:"Issue Asset Confirmation",controller:"IssueAssetFormController",isolatedScope:!0}],o=[{templateUrl:"assets/modals/delete-asset-details.html",title:"Delete Asset Details",
controller:"DeleteAssetFormController",isolatedScope:!0,data:n},{templateUrl:"assets/modals/delete-asset-confirm.html",title:"Delete Asset Confirmation",controller:"DeleteAssetFormController",isolatedScope:!0}],i=[{templateUrl:"assets/modals/place-order-confirm.html",title:"Place Order Confirmation",controller:"PlaceOrderFormController",isolatedScope:!0,data:n}],a=[{templateUrl:"assets/modals/trade-desk-details.html",title:"PLace Order Details",controller:"TradeDeskInputController",isolatedScope:!0,data:n}],s=[{templateUrl:"assets/modals/search-asset-details.html",title:"Search Asset Details",controller:"SearchAssetFormCtrl",isolatedScope:!0,data:n},{templateUrl:"assets/modals/search-asset-confirm.html",title:"Search Asset Results",controller:"SearchAssetFormCtrl",isolatedScope:!0}],l=[{templateUrl:"assets/modals/expected-order-details.html",title:"Expected Order Details",controller:"ExpectedOrderFormCtrl",isolatedScope:!0,data:n},{templateUrl:"assets/modals/expected-order-confirm.html",title:"Expected Order Results",controller:"ExpectedOrderFormCtrl",isolatedScope:!0}],c=[{templateUrl:"assets/modals/expected-transfers-confirm.html",title:"Expected Asset Transfers",controller:"ExpectedAssetTransfersFormCtrl",isolatedScope:!0}],u=[{templateUrl:"assets/modals/order-trades-details.html",title:"Order Trade Details",controller:"OrderTradesFormCtrl",isolatedScope:!0,data:n},{templateUrl:"assets/modals/order-trades-confirm.html",title:"Order Trade  Results",controller:"OrderTradesFormCtrl",isolatedScope:!0}],d=[{templateUrl:"assets/modals/expected-deletes-confirm.html",title:"Expected Asset Deletes",controller:"ExpectedAssetDeletesFormCtrl",isolatedScope:!0}],p=[{templateUrl:"assets/modals/expected-cancellations-confirm.html",title:"Expected Order Cancellation",controller:"ExpectedOrderCancellationFormCtrl",isolatedScope:!0}],m=[{templateUrl:"assets/modals/cancel-order-confirm.html",title:"Cancel Order Confirmation",controller:"CancelOrderFormController",isolatedScope:!0,data:n}],f=[{templateUrl:"assets/modals/transfer-asset-details.html",title:"Transfer Asset Details",controller:"TransferAssetFormController",isolatedScope:!0,data:n},{templateUrl:"assets/modals/transfer-asset-confirm.html",title:"Transfer Asset Confirmation",controller:"TransferAssetFormController",isolatedScope:!0}],g=[{templateUrl:"assets/modals/send-asset-details.html",title:"Send Asset Details",controller:"TransferAssetFormController",isolatedScope:!0,data:n},{templateUrl:"assets/modals/send-asset-confirm.html",title:"Send Asset Confirmation",controller:"TransferAssetFormController",isolatedScope:!0}],h=[{templateUrl:"assets/modals/dividend-payment-details.html",title:"Dividend Payment Details",controller:"DividendPaymentFormController",isolatedScope:!0,data:n},{templateUrl:"assets/modals/dividend-payment-confirm.html",title:"Dividend Payment Confirmation",controller:"DividendPaymentFormController",isolatedScope:!0}],S=[{templateUrl:"assets/modals/delete-asset-full-details.html",title:"Delete Asset Details",controller:"DeleteAssetFullFormController",isolatedScope:!0,data:n},{templateUrl:"assets/modals/delete-asset-full-confirm.html",title:"Delete Asset Confirmation",controller:"DeleteAssetFullFormController",isolatedScope:!0}];e.steps={},e.steps.issueAssetForm=r,e.steps.deleteAssetForm=o,e.steps.placeOrderForm=i,e.steps.tradeDeskForm=a,e.steps.searchAssetForm=s,e.steps.expectedOrderForm=l,e.steps.expectedCancellationForm=p,e.steps.expectedTransfersForm=c,e.steps.orderTradesForm=u,e.steps.expectedDeletesForm=d,e.steps.cancelOrderForm=m,e.steps.transferAssetForm=f,e.steps.sendAssetForm=g,e.steps.dividendPaymentForm=h,e.steps.deleteAssetFullForm=S}]),angular.module("assets").controller("AllTradesCtrl",["$scope","AssetsService","amountTQTFilter","timestampFilter","DTOptionsBuilder","DTColumnBuilder","$uibModal","$compile","baseConfig","supplyFilter","searchTermFilter","CommonsService","buysellFilter","numericalStringFilter","numberStringFilter",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f){e.dtOptionsLastTrades=o.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("info",!1).withOption("ordering",!1).withOption("serverSide",!1).withDataProp("lastTrades").withOption("paging",!0).withOption("processing",!1).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){s(t)(e)}).withOption("ajax",function(e,n,r){var o=e.start+e.length-1;t.getAllTrades(e.start,o).then(function(e){n({iTotalRecords:e.trades.length,iTotalDisplayRecords:e.trades.length,lastTrades:e.trades})})}).withDisplayLength(10).withBootstrap(),e.dtColumnsLastTrades=[i.newColumn("askOrder").withTitle("Details").notSortable().renderWith(function(e,t,n,r){var o=n.askOrder;return"buy"===n.tradeType&&(o=n.bidOrder),'<button type="button" class="btn btn-success btn-xs" ng-controller="SearchCtrl" ng-click="searchValue(\''+o+'\')"><i class="fa fa-list-ul" aria-hidden="true" style="width:15px;"></i></button>'}),i.newColumn("name").withTitle("Name").notSortable().renderWith(function(e,t,n,r){return"<a ng-click=\"openAssetDetailsModal('"+n.asset+'\')" ng-controller="AssetsMainCtrl"> '+e+"</a>"}),i.newColumn("timestamp").withTitle("Date").notSortable().renderWith(function(e,t,n,o){return r(e)}),i.newColumn("tradeType").withTitle("Type").notSortable().renderWith(function(e,t,n,r){return p(e)}),i.newColumn("buyerRS").withTitle("Buyer").notSortable().renderWith(function(e,t,n,r){return u(e)}),i.newColumn("sellerRS").withTitle("Seller").notSortable().renderWith(function(e,t,n,r){return u(e)}),i.newColumn("priceTQT").withTitle("Price").notSortable().renderWith(function(e,t,n,r){return(e*Math.pow(10,n.decimals)/1e8).toLocaleString("en-US",{minimumFractionDigits:n.decimals})}),i.newColumn("quantityQNT").withTitle("Quantity").notSortable().renderWith(function(e,t,n,r){return(parseInt(e)/Math.pow(10,n.decimals)).toLocaleString("en-US",{minimumFractionDigits:n.decimals})}),i.newColumn("asset").withTitle("Action").notSortable().renderWith(function(e,t,n,r){return'<button type="button" class="btn btn-default btn-xs"   popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover= "TradeDesk" ng-controller="AssetsMainCtrl" ng-click="openTradeDeskModal(\''+e+"','"+n.decimals+'\')"> <i class="fa fa-bar-chart" aria-hidden="true" style="width:15px;"></i> </button>'})],e.dtInstanceCallbackLastTrades=function(t){e.dtInstance=t},e.reloadLastTrades=function(){e.dtInstance&&e.dtInstance._renderer.rerender()}}]),angular.module("assets").controller("AssetDetailsCtrl",["$scope","AssetsService","amountTQTFilter","timestampFilter","DTOptionsBuilder","DTColumnBuilder","$uibModal","$compile","baseConfig","supplyFilter","searchTermFilter","CommonsService","params","$uibModalInstance",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m){e.initAssetDetails=function(){t.getAsset(p.assetId,!0).then(function(t){e.assetDetails=t},function(e){})},e.cancel=function(){m.dismiss("cancel")}}]),angular.module("assets").controller("MyTransfersCtrl",["$scope","AssetsService","amountTQTFilter","timestampFilter","DTOptionsBuilder","DTColumnBuilder","$uibModal","$compile","baseConfig","supplyFilter","searchTermFilter","CommonsService","buysellFilter","numericalStringFilter","numberStringFilter","AccountService",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g){e.dtOptionsLastTransfers=o.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("info",!1).withOption("ordering",!1).withOption("serverSide",!1).withDataProp("lastTransfers").withOption("paging",!0).withOption("processing",!1).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){s(t)(e)}).withOption("ajax",function(e,n,r){var o=g.getAccountDetailsFromSession("accountRs"),i=e.start+e.length-1;t.getAllLastTransfers(o,e.start,i).then(function(e){n({iTotalRecords:e.transfers.length,iTotalDisplayRecords:e.transfers.length,lastTransfers:e.transfers})})}).withDisplayLength(10).withBootstrap(),e.dtColumnsLastTransfers=[i.newColumn("assetTransfer").withTitle("Details").notSortable().renderWith(function(e,t,n,r){return'<button type="button" class="btn btn-success btn-xs" ng-controller="SearchCtrl" ng-click="searchValue(\''+e+'\')"><i class="fa fa-list-ul" aria-hidden="true" style="width:15px;"></i></button>'}),i.newColumn("timestamp").withTitle("Date").notSortable().renderWith(function(e,t,n,o){return r(e)}),i.newColumn("name").withTitle("Name").notSortable().renderWith(function(e,t,n,r){return"<a ng-click=\"openAssetDetailsModal('"+n.asset+'\')" ng-controller="AssetsMainCtrl"> '+e+"</a>"}),i.newColumn("quantityQNT").withTitle("Quantity").notSortable().renderWith(function(e,t,n,r){return c(e,n.decimals)}),i.newColumn("recipientRS").withTitle("Recipient").notSortable().renderWith(function(e,t,n,r){return u(e)}),i.newColumn("asset").withTitle("Action").notSortable().renderWith(function(e,t,n,r){return'<button type="button" class="btn btn-default btn-xs"   popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover= "TradeDesk" ng-controller="AssetsMainCtrl" ng-click="openTradeDeskModal(\''+e+"','"+n.decimals+'\')"> <i class="fa fa-bar-chart" aria-hidden="true" style="width:15px;"></i> </button>'})],e.dtInstanceCallbackLastTransfers=function(t){e.dtInstance=t},e.reloadLastTransfers=function(){e.dtInstance&&e.dtInstance._renderer.rerender()}}]),angular.module("assets").controller("MytradesCtrl",["$scope","AssetsService","amountTQTFilter","timestampFilter","DTOptionsBuilder","DTColumnBuilder","$uibModal","$compile","baseConfig","supplyFilter","searchTermFilter","CommonsService","buysellFilter","numericalStringFilter","numberStringFilter","AccountService",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g){e.dtOptionsMyTrades=o.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("info",!1).withOption("ordering",!1).withOption("serverSide",!1).withDataProp("mytrades").withOption("paging",!0).withOption("processing",!1).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){s(t)(e)}).withOption("ajax",function(e,n,r){var o=g.getAccountDetailsFromSession("accountRs"),i=e.start+e.length-1;t.getMyTrades(o,e.start,i).then(function(e){n({iTotalRecords:e.trades.length,iTotalDisplayRecords:e.trades.length,mytrades:e.trades})})}).withDisplayLength(10).withBootstrap(),e.dtColumnsMyTrades=[i.newColumn("askOrder").withTitle("Details").notSortable().renderWith(function(e,t,n,r){var o=n.askOrder;return"buy"===n.tradeType&&(o=n.bidOrder),'<button type="button" class="btn btn-success btn-xs" ng-controller="SearchCtrl" ng-click="searchValue(\''+o+'\')"><i class="fa fa-list-ul" aria-hidden="true" style="width:15px;"></i></button>'}),i.newColumn("name").withTitle("Name").notSortable().renderWith(function(e,t,n,r){return"<a ng-click=\"openAssetDetailsModal('"+n.asset+'\')" ng-controller="AssetsMainCtrl"> '+e+"</a>"}),i.newColumn("timestamp").withTitle("Date").notSortable().renderWith(function(e,t,n,o){return r(e)}),i.newColumn("tradeType").withTitle("Type").notSortable().renderWith(function(e,t,n,r){return p(e)}),i.newColumn("buyerRS").withTitle("Buyer").notSortable().renderWith(function(e,t,n,r){return u(e)}),i.newColumn("sellerRS").withTitle("Seller").notSortable().renderWith(function(e,t,n,r){return u(e)}),i.newColumn("priceTQT").withTitle("Price").notSortable().renderWith(function(e,t,n,r){return(e*Math.pow(10,n.decimals)/1e8).toLocaleString("en-US",{minimumFractionDigits:n.decimals})}),i.newColumn("quantityQNT").withTitle("Quantity").notSortable().renderWith(function(e,t,n,r){return(parseInt(e)/Math.pow(10,n.decimals)).toLocaleString("en-US",{minimumFractionDigits:n.decimals})}),i.newColumn("asset").withTitle("Action").notSortable().renderWith(function(e,t,n,r){return'<button type="button" class="btn btn-default btn-xs" ng-controller="AssetsMainCtrl" ng-click="openTradeDeskModal(\''+e+"','"+n.decimals+'\')"> <i class="fa fa-bar-chart" aria-hidden="true" style="width:15px;"></i> </button>'})],e.dtInstanceCallbackMyTrades=function(t){e.dtInstance=t},e.reloadMyTrades=function(){e.dtInstance&&e.dtInstance._renderer.rerender()}}]),angular.module("assets").controller("DividendsDetailsCtrl",["$scope","AssetsService","amountTQTFilter","timestampFilter","DTOptionsBuilder","DTColumnBuilder","$uibModal","$compile","baseConfig","supplyFilter","searchTermFilter","CommonsService","buysellFilter","numericalStringFilter","numberStringFilter","AccountService","params","$uibModalInstance",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g,h,S){e.dtOptionsDividendsDetails=o.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("info",!1).withOption("ordering",!1).withOption("serverSide",!1).withDataProp("data").withOption("paging",!0).withOption("processing",!1).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){s(t)(e)}).withOption("ajax",function(e,n,r){var o=e.start+e.length-1;t.getDividendsHistory(h.assetId,e.start,o,"").then(function(e){n({iTotalRecords:e.dividends.length,iTotalDisplayRecords:e.dividends.length,data:e.dividends})})}).withDisplayLength(5).withBootstrap(),e.dtColumnsDividendsDetails=[i.newColumn("assetDividend").withTitle("Details").notSortable().renderWith(function(e,t,n,r){return'<button type="button" class="btn btn-success btn-xs" ng-controller="SearchCtrl" ng-click="searchValue(\''+e+'\')"><i class="fa fa-list-ul" aria-hidden="true" style="width:15px;"></i></button>'}),i.newColumn("dividendHeight").withTitle("Height").notSortable().renderWith(function(e,t,n,r){return e}),i.newColumn("timestamp").withTitle("Date").notSortable().renderWith(function(e,t,n,o){return r(e)}),i.newColumn("numberOfAccounts").withTitle("Accounts").notSortable().renderWith(function(e,t,n,r){return e}),i.newColumn("totalDividend").withTitle("Amount").notSortable().renderWith(function(e,t,n,r){return parseInt(e/1e8)})],e.cancel=function(){S.dismiss("cancel")},e.dtInstanceCallbackDividendsDetails=function(t){e.dtInstance=t}}]),angular.module("assets").controller("IssueAssetFormController",["$scope","AssetsService","SessionStorageService","$state","CryptoService","loginConfig","AlertService","alertConfig","$validation","$uibModal","multiStepFormScope","FeeService","$rootScope","CommonsService",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m){e.issueAssetForm=angular.copy(u.issueAssetForm),e.$watchCollection("[issueAssetForm.shares,issueAssetForm.decimals ]",function(){e.issueAssetForm.units=e.issueAssetForm.shares*Math.pow(10,e.issueAssetForm.decimals)}),e.$on("$destroy",function(){u.issueAssetForm=angular.copy(e.issueAssetForm)}),e.hasPrivateKeyInSession=function(){return!!n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY)},e.issueAsset=function(){var r=u.issueAssetForm,l=r.name,c=r.description,d=r.shares,p=r.decimals,f=r.fee,g=d*Math.pow(10,p),h=m.getAccountDetailsFromSession("publicKey"),S=r.secretPhrase;if(1===d)return void a.addAlert({type:"info",msg:"Note: Singleton Assets are temporarily disabled. Please see forum for more informations."},s.issueAssetModalAlert);var C;C=S?o.secretPhraseToPrivateKey(S):n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY),f||(f=1),e.issueAssetPromise=t.issueAsset(l,c,g,p,h,f).then(function(t){if(t.errorCode)a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},s.issueAssetModalAlert);else{var n=t.unsignedTransactionBytes,r=o.signatureHex(n,C);e.transactionBytes=o.signTransactionHex(n,r),e.validBytes=!0,e.tx_fee=t.transactionJSON.feeTQT/1e8,e.tx_amount=t.transactionJSON.amountTQT/1e8,e.tx_total=e.tx_fee+e.tx_amount}},function(e){a.addAlert(a.getNoConnectionMessage(e),s.issueAssetModalAlert)})},e.broadcastTransaction=function(t){e.issueAssetPromise=m.broadcastTransaction(t).then(function(t){e.$emit("close-modal"),p.$broadcast("reload-dashboard"),t.errorCode?a.addAlert({type:"danger",msg:"Unable to broadcast transaction. Reason: "+t.errorDescription}):a.addAlert({type:"success",msg:"Transaction succesfull broadcasted with Id : "+t.transaction})},function(e){a.addAlert(a.getNoConnectionMessage(e),s.issueAssetModalAlert)})}}]),angular.module("assets").controller("DeleteAssetFormController",["$scope","AssetsService","SessionStorageService","$state","CryptoService","loginConfig","AlertService","alertConfig","$validation","$uibModal","multiStepFormScope","FeeService","$rootScope","CommonsService","multiStepFormInstance","shareToQuantiyFilter",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g){e.deleteAssetForm=angular.copy(u.deleteAssetForm),e.initStep1=function(){var n=e.$getActiveStep().data;n&&(e.deleteAssetForm.assetId=n.assetId,e.deleteAssetForm.decimals=n.decimals,t.getAsset(n.assetId).then(function(t){e.deleteAssetForm.asset=t.name}))},e.$on("$destroy",function(){u.deleteAssetForm=angular.copy(e.deleteAssetForm)}),e.hasPrivateKeyInSession=function(){return!!n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY)},e.deleteAsset=function(){var r,l=u.deleteAssetForm,c=l.assetId,d=1,p=g(l.quantity,e.deleteAssetForm.decimals),f=m.getAccountDetailsFromSession("publicKey"),h=l.secretPhrase;r=h?o.secretPhraseToPrivateKey(h):n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY),d||(d=1),e.deleteAssetPromise=t.deleteAssetShares(c,p,d,f).then(function(t){if(t.errorCode)a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},s.deleteAssetModalAlert);else{var n=t.unsignedTransactionBytes,i=o.signatureHex(n,r);e.transactionBytes=o.signTransactionHex(n,i),e.validBytes=!0,e.tx_fee=t.transactionJSON.feeTQT/1e8,e.tx_amount=t.transactionJSON.amountTQT/1e8,e.tx_total=e.tx_fee+e.tx_amount}},function(e){a.addAlert(a.getNoConnectionMessage(e),s.deleteAssetModalAlert)})},e.broadcastTransaction=function(t){e.deleteAssetPromise=m.broadcastTransaction(t).then(function(t){e.$emit("close-modal"),p.$broadcast("reload-dashboard"),t.errorCode?a.addAlert({type:"danger",msg:"Unable to broadcast transaction. Reason: "+t.errorDescription}):a.addAlert({type:"success",msg:"Transaction succesfull broadcasted with Id : "+t.transaction})},function(e){a.addAlert(a.getNoConnectionMessage(e),s.deleteAssetModalAlert)})}}]),angular.module("assets").controller("DeleteAssetFullFormController",["$scope","AssetsService","SessionStorageService","$state","CryptoService","loginConfig","AlertService","alertConfig","$validation","$uibModal","multiStepFormScope","FeeService","$rootScope","CommonsService","multiStepFormInstance","shareToQuantiyFilter",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g){e.deleteAssetFullForm=angular.copy(u.deleteAssetFullForm),e.initStep1=function(){var n=e.$getActiveStep().data;n&&(e.deleteAssetFullForm.assetId=n.assetId,t.getAsset(n.assetId).then(function(t){e.deleteAssetFullForm.asset=t.name}))},e.$on("$destroy",function(){u.deleteAssetFullForm=angular.copy(e.deleteAssetFullForm)}),e.hasPrivateKeyInSession=function(){return!!n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY)},e.deleteAsset=function(){var r,l=u.deleteAssetFullForm,c=l.assetId,d=1,p=m.getAccountDetailsFromSession("publicKey"),f=l.secretPhrase;r=f?o.secretPhraseToPrivateKey(f):n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY),d||(d=1),e.deleteAssetFullPromise=t.deleteAssetFull(c,d,p).then(function(t){if(t.errorCode)a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},s.deleteAssetFullModalAlert);else{var n=t.unsignedTransactionBytes,i=o.signatureHex(n,r);e.transactionBytes=o.signTransactionHex(n,i),e.validBytes=!0,e.tx_fee=t.transactionJSON.feeTQT/1e8,e.tx_amount=t.transactionJSON.amountTQT/1e8,e.tx_total=e.tx_fee+e.tx_amount}},function(e){a.addAlert(a.getNoConnectionMessage(e),s.deleteAssetFullModalAlert)})},e.broadcastTransaction=function(t){e.deleteAssetPromise=m.broadcastTransaction(t).then(function(t){e.$emit("close-modal"),p.$broadcast("reload-dashboard"),t.errorCode?a.addAlert({type:"danger",msg:"Unable to broadcast transaction. Reason: "+t.errorDescription}):a.addAlert({type:"success",msg:"Transaction succesfull broadcasted with Id : "+t.transaction})},function(e){a.addAlert(a.getNoConnectionMessage(e),s.deleteAssetModalAlert)})}}]),angular.module("assets").controller("SearchAssetFormCtrl",["$scope","AssetsService","SessionStorageService","$state","DTOptionsBuilder","DTColumnBuilder","searchTermFilter","$compile","multiStepFormScope","$validation","supplyFilter","$q",function(e,t,n,r,o,i,a,s,l,c,u,d){e.searchAssetForm={},e.onSubmit=function(){c.validate(e.searchAssetForm),e.searchAssetForm.$valid&&e.$nextStep()},e.searchAssetForm=angular.copy(l.searchAssetForm),e.$on("$destroy",function(){l.searchAssetForm=angular.copy(e.searchAssetForm)}),e.dtOptions=o.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("serverSide",!1).withDataProp("assets").withOption("processing",!0).withOption("info",!1).withOption("paging",!0).withOption("ordering",!1).withOption("processing",!0).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){s(t)(e)}).withOption("ajax",function(n,r,o){var i=e.searchAssetForm.query,a=t.serachAssets(i),s=t.getAsset(i);d.all([a,s]).then(function(e){e[1].asset&&(e[0].assets=e[0].assets||[],e[0].assets.push(e[1])),r({iTotalRecords:1e3,iTotalDisplayRecords:1e3,assets:e[0].assets})})}).withDisplayLength(10).withBootstrap(),e.dtColumns=[i.newColumn("name").withTitle("Name").notSortable().renderWith(function(e,t,n,r){return e}),i.newColumn("accountRS").withTitle("Issuer").notSortable().renderWith(function(e,t,n,r){return a(e)}),i.newColumn("asset").withTitle("Action").notSortable().renderWith(function(e,t,n,r){return'<button type="button" class="btn btn-default btn-sm" ng-controller="AssetsMainCtrl" ng-click="openAssetDetailsModal(\''+n.asset+'\')"> <i class="fa fa-info-circle" aria-hidden="true"></i> </button>&nbsp;<button type="button" class="btn btn-default btn-sm" ng-controller="AssetsMainCtrl" ng-click="openTradeDeskModal(\''+e+"','"+n.decimals+'\')"> <i class="fa fa-bar-chart" aria-hidden="true"></i> </button>'})],e.dtInstanceCallback=function(t){e.dtInstance=t}}]),angular.module("assets").controller("CancelOrderFormController",["$scope","AssetsService","SessionStorageService","$state","CryptoService","loginConfig","AlertService","alertConfig","$validation","$uibModal","multiStepFormScope","FeeService","$rootScope","CommonsService","multiStepFormInstance",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f){e.$on("$destroy",function(){u.cancelOrderForm=angular.copy(e.cancelOrderForm)}),e.hasPrivateKeyInSession=function(){return!!n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY)},e.cancelOrder=function(){e.cancelOrderForm={};var r=e.$getActiveStep().data;r&&(e.cancelOrderForm.orderId=r.orderId,e.cancelOrderForm.type=r.type,e.cancelOrderForm.quantity=r.quantity,e.cancelOrderForm.price=r.price,e.cancelOrderForm.decimals=r.decimals,e.cancelOrderForm.fee=1,t.getAsset(r.assetId).then(function(t){e.cancelOrderForm.asset=t.name}));var l,c=e.cancelOrderForm,u=c.orderId,d=c.fee,p=m.getAccountDetailsFromSession("publicKey"),f=c.secretPhrase,g=c.type;l=f?o.secretPhraseToPrivateKey(f):n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY),d||(d=1),e.cancelOrderPromise=t.cancelOrder(u,d,p,g).then(function(t){if(t.errorCode)a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},s.cancelBidOrderModalAlert);else{var n=t.unsignedTransactionBytes,r=o.signatureHex(n,l);e.transactionBytes=o.signTransactionHex(n,r),e.validBytes=!0,e.tx_fee=t.transactionJSON.feeTQT/1e8,e.tx_amount=t.transactionJSON.amountTQT/1e8,e.tx_total=e.tx_fee+e.tx_amount}},function(e){a.addAlert(a.getNoConnectionMessage(e),s.cancelBidOrderModalAlert)})},e.broadcastTransaction=function(t){e.cancelOrderPromise=m.broadcastTransaction(t).then(function(t){e.$emit("close-modal"),p.$broadcast("reload-dashboard"),t.errorCode?a.addAlert({type:"danger",msg:"Unable to broadcast transaction. Reason: "+t.errorDescription}):a.addAlert({type:"success",msg:"Transaction succesfull broadcasted with Id : "+t.transaction})},function(e){a.addAlert(a.getNoConnectionMessage(e),s.cancelBidOrderModalAlert)})}}]),angular.module("assets").controller("TransferAssetFormController",["$scope","AssetsService","SessionStorageService","$state","CryptoService","loginConfig","AlertService","alertConfig","$validation","$uibModal","multiStepFormScope","FeeService","$rootScope","CommonsService","shareToQuantiyFilter",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f){e.transferAssetForm=angular.copy(u.transferAssetForm),e.initStep1=function(){var n=e.$getActiveStep().data;n&&(e.transferAssetForm.assetId=n.assetId,e.transferAssetForm.decimals=n.decimals,e.transferAssetForm.name=n.name,n.assetId&&t.getAsset(n.assetId).then(function(t){e.transferAssetForm.name=t.name}))},e.nextStep=function(){if(e.transferAssetForm.assetId&&void 0!==e.transferAssetForm.decimals&&e.transferAssetForm.name)e.$nextStep();else{var n=e.transferAssetForm.assetId;t.getAsset(n,!0).then(function(t){t.asset?(e.transferAssetForm.assetId=t.asset,e.transferAssetForm.decimals=t.decimals,e.transferAssetForm.name=t.name,e.$nextStep()):a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},s.transferAssetModalAlert)},function(e){a.addAlert(a.getNoConnectionMessage(e),s.transferAssetModalAlert)})}},e.$on("$destroy",function(){u.transferAssetForm=angular.copy(e.transferAssetForm)}),e.openAddressBookModal=function(){c.open({animation:!1,templateUrl:"addressbook/views/addressbook-light.html",controller:"AddressBookCtrl",resolve:{params:function(){return{closeOnClick:!0}}}}).result.then(function(t){e.transferAssetForm.recipient=t.accountRS})},e.hasPrivateKeyInSession=function(){return!!n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY)},e.transferAsset=function(){var r,l=u.transferAssetForm,c=l.assetId,d=f(l.quantity,e.transferAssetForm.decimals),p=l.fee,g=l.recipient,h=m.getAccountDetailsFromSession("publicKey"),S=l.secretPhrase;r=S?o.secretPhraseToPrivateKey(S):n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY),p||(p=1),e.sendAssetPromise=t.transferAsset(h,g,c,d,p).then(function(t){if(t.errorCode)a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},s.transferAssetModalAlert);else{var n=t.unsignedTransactionBytes,i=o.signatureHex(n,r);e.transactionBytes=o.signTransactionHex(n,i),e.validBytes=!0,e.tx_fee=t.transactionJSON.feeTQT/1e8,e.tx_amount=t.transactionJSON.amountTQT/1e8,e.tx_total=e.tx_fee+e.tx_amount}},function(e){a.addAlert(a.getNoConnectionMessage(e),s.transferAssetModalAlert)})},e.broadcastTransaction=function(t){e.sendAssetPromise=m.broadcastTransaction(t).then(function(t){e.$emit("close-modal"),p.$broadcast("reload-dashboard"),t.errorCode?a.addAlert({type:"danger",msg:"Unable to broadcast transaction. Reason: "+t.errorDescription}):a.addAlert({type:"success",msg:"Transaction succesfull broadcasted with Id : "+t.transaction})},function(e){a.addAlert(a.getNoConnectionMessage(e),s.transferAssetModalAlert)})}}]),angular.module("assets").controller("DividendPaymentFormController",["$scope","AssetsService","SessionStorageService","$state","CryptoService","loginConfig","AlertService","alertConfig","$validation","$uibModal","multiStepFormScope","FeeService","$rootScope","CommonsService","shareToQuantiyFilter","amountToQuantFilter","CurrenciesService","controlConfig",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g,h,S){e.dividendPaymentForm=angular.copy(u.dividendPaymentForm),e.initStep1=function(){var n=e.$getActiveStep().data;n&&(e.dividendPaymentForm.assetId=n.assetId,e.dividendPaymentForm.decimals=n.decimals,t.getAsset(n.assetId).then(function(t){e.dividendPaymentForm.asset=t.name})),h.getBlockChainStatus().then(function(t){e.dividendPaymentForm.height=t.numberOfBlocks,e.dividendPaymentForm.height=e.dividendPaymentForm.height-1})},e.$on("$destroy",function(){u.dividendPaymentForm=angular.copy(e.dividendPaymentForm)}),e.hasPrivateKeyInSession=function(){return!!n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY)},e.dividendPayment=function(){var r=u.dividendPaymentForm,l=r.assetId,c=g(r.amountPerQuant);if((c=parseInt(c/Math.pow(10,parseInt(r.decimals))))<1)return void a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: Amount per share less than asset decimals: ("+r.decimals+"). Dividend would be (0) per smallest asset unit."},s.dividendPaymentModalAlert);var d,p=1,f=r.height,h=m.getAccountDetailsFromSession("publicKey"),S=r.secretPhrase;d=S?o.secretPhraseToPrivateKey(S):n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY),p||(p=1),e.dividendPaymentPromise=t.dividendPayment(h,l,f,c,p).then(function(t){if(t.errorCode)a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},s.dividendPaymentModalAlert);else{var n=t.unsignedTransactionBytes,r=o.signatureHex(n,d);e.transactionBytes=o.signTransactionHex(n,r),e.validBytes=!0,e.tx_fee=t.transactionJSON.feeTQT/1e8,e.tx_amount=t.transactionJSON.amountTQT/1e8,e.tx_total=e.tx_fee+e.tx_amount}},function(e){a.addAlert(a.getNoConnectionMessage(e),s.dividendPaymentModalAlert)})},e.broadcastTransaction=function(t){e.dividendPaymentPromise=m.broadcastTransaction(t).then(function(t){e.$emit("close-modal"),p.$broadcast("reload-dashboard"),t.errorCode?a.addAlert({type:"danger",msg:"Unable to broadcast transaction. Reason: "+t.errorDescription}):a.addAlert({type:"success",msg:"Transaction succesfull broadcasted with Id : "+t.transaction})},function(e){a.addAlert(a.getNoConnectionMessage(e),s.dividendPaymentModalAlert)})}}]),angular.module("assets").controller("PlaceOrderFormController",["$scope","AssetsService","SessionStorageService","$state","CryptoService","loginConfig","AlertService","alertConfig","$validation","$uibModal","multiStepFormScope","FeeService","$rootScope","CommonsService","shareToQuantiyFilter","amountToQuantFilter","quantityToShareFilter",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g,h){e.$on("$destroy",function(){u.placeOrderForm=angular.copy(e.placeOrderForm)}),e.hasPrivateKeyInSession=function(){return!!n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY)},e.placeOrder=function(){e.placeOrderForm={};var r=e.$getActiveStep().data;r&&(e.placeOrderForm.assetId=r.assetId,e.placeOrderForm.requestType=r.requestType,e.placeOrderForm.asset=r.asset,e.placeOrderForm.quantity=r.quantity,e.placeOrderForm.price=r.price,e.placeOrderForm.decimals=r.decimals,e.placeOrderForm.fee=1,e.placeOrderForm.asset=r.asset);var l,c=e.placeOrderForm,u=c.assetId,d=c.fee,p=parseInt(f(c.quantity,c.decimals)),g=parseInt(1e8*c.price/Math.pow(10,c.decimals)),h=m.getAccountDetailsFromSession("publicKey"),S=c.secretPhrase,C=c.requestType;l=S?o.secretPhraseToPrivateKey(S):n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY),d||(d=1),e.placeAssetOrderPromise=t.placeOrder(h,g,u,p,d,C).then(function(t){if(t.errorCode)a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},s.placeAssertOrderModalAlert);else{var n=t.unsignedTransactionBytes,r=o.signatureHex(n,l);e.transactionBytes=o.signTransactionHex(n,r),e.validBytes=!0,e.tx_fee=t.transactionJSON.feeTQT/1e8,e.tx_amount=t.transactionJSON.amountTQT/1e8,e.tx_total=e.tx_fee+e.tx_amount}},function(e){a.addAlert(a.getNoConnectionMessage(e),s.placeAssertOrderModalAlert)})},e.broadcastTransaction=function(t){e.placeAssetOrderPromise=m.broadcastTransaction(t).then(function(t){e.$emit("close-modal"),p.$broadcast("reload-dashboard"),p.$broadcast("order-placed"),t.errorCode?a.addAlert({type:"danger",msg:"Unable to broadcast transaction. Reason: "+t.errorDescription}):a.addAlert({type:"success",msg:"Transaction succesfull broadcasted with Id : "+t.transaction})},function(e){a.addAlert(a.getNoConnectionMessage(e),s.placeAssertOrderModalAlert)})}}]),
angular.module("assets").controller("TradeDeskInputController",["$scope","AssetsService","SessionStorageService","$state","CryptoService","loginConfig","AlertService","alertConfig","$validation","$uibModal","FeeService","$rootScope","CommonsService","DTOptionsBuilder","DTColumnBuilder","amountTQTFilter","searchTermFilter","$compile","quantityToShareFilter","shareToQuantiyFilter","$stateParams","timestampFilter","numericalStringFilter","quantToAmountFilter","buysellFilter","numberStringFilter","amountToDecimalFilter","$q",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g,h,S,C,T,b,y,O,v,A,w,E,N){function F(t,n,r){return $("td",t).unbind("click"),$("td",t).bind("click",function(){e.$apply(function(){d.$broadcast(r,n)})}),t}function I(t){var n=t.length;n>50&&(n=50);for(var r=[],o=[],i=0;i<n;i++){var a={},s={};a.key=n-i,a.value=v(T(t[i].priceTQT,e.decimals)),s.key=n-i,s.value=C(t[i].quantityQNT,e.decimals),r.push(a),o.push(s)}return[{key:"Quantity",bar:!0,values:o},{key:"Price",values:r}].map(function(e){return e.values=e.values.map(function(e){return{x:e.key,y:e.value}}),e})}e.getAsset=function(){var n=b.assetId;e.assetId=n,t.getAsset(n,!0).then(function(r){e.assetDetails=r,e.decimals=r.decimals;var o=p.getAccountDetailsFromSession("accountRs");t.getAccountSingleAsset(o,n).then(function(t){e.accountDetails=t,e.quantityQNT=t.quantityQNT,e.unconfirmedQuantityQNT=t.unconfirmedQuantityQNT},function(e){console.log(e)})},function(e){console.log(e)})},e.$watchCollection("buyOrderForm",function(t){if(e.buyOrderForm.totalPrice=O(parseFloat(t.quantity*t.price)),t.price&&t.quantity){T(t.quantity,e.decimals)<=e.assetDetails.quantityQNT?e.enableBuy=!0:e.enableBuy=!1}else e.enableBuy=!1}),e.$watchCollection("askOrderForm",function(t){if(e.askOrderForm.totalPrice=O(parseFloat(t.quantity*t.price)),e.unconfirmedQuantityQNT&&t.price&&t.quantity){T(t.quantity,e.decimals)<=e.unconfirmedQuantityQNT?e.enableSell=!0:e.enableSell=!1}else e.enableSell=!1}),e.$on("buy-form",function(t,n){e.buyOrderForm.price=n.priceTQT*Math.pow(10,e.decimals)/1e8,e.buyOrderForm.quantity=C(n.quantityQNT,e.decimals)}),e.$on("ask-form",function(t,n){e.askOrderForm.price=n.priceTQT*Math.pow(10,e.decimals)/1e8,e.askOrderForm.quantity=C(n.quantityQNT,e.decimals)}),e.placeOrderClick=function(t,n){c.open({animation:!0,templateUrl:"assets/modals/place-order-form.html",size:"lg",controller:"AssetsFormCtrl",resolve:{params:function(){return{assetId:e.assetId,price:t.price,quantity:t.quantity,requestType:n,decimals:e.decimals,asset:e.assetDetails.name}}}})},e.hasPrivateKeyInSession=function(){return!!n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY)},e.dtAskOrdersOptions=m.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("info",!1).withOption("ordering",!1).withOption("serverSide",!0).withDataProp("askOrders").withOption("processing",!0).withOption("ordering",!1).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){S(t)(e),F(t,n,"buy-form")}).withOption("ajax",function(n,r,o){var i=n.start+n.length-1,a=[],s=t.getAssetOrders(e.assetId,t.GET_ASSET_ORDERS.ASK_ORDER,n.start,i),l=t.getAsset(e.assetId,!0);a.push(s),e.decimals||a.push(l),N.all(a).then(function(t){var n=t[0],o=t[1];o&&(e.decimals=o.decimals),r({iTotalRecords:100,iTotalDisplayRecords:100,askOrders:n.askOrders})})}).withDisplayLength(5).withBootstrap(),e.fireFormFillEvent=function(e){d.$broadcast(e)},e.dtAskOrdersColumns=[f.newColumn("priceTQT").withTitle("Price per share").notSortable().renderWith(function(t,n,r,o){return O(Math.pow(10,e.decimals)*v(t))}),f.newColumn("quantityQNT").withTitle("Quantity").notSortable().renderWith(function(t,n,r,o){return O(C(t,e.decimals))}),f.newColumn("priceTQT").withTitle("Sum").notSortable().renderWith(function(e,t,n,r){return O(v(e)*n.quantityQNT)}),f.newColumn("priceTQT").withTitle("Actions").notSortable().renderWith(function(e,t,n,r){return'<button type="button" class="btn btn-default btn-xs"> <i class="fa fa-check-circle" aria-hidden="true"></i> </button>'})],e.dtAskOrdersInstanceCallback=function(t){e.dtAskOrderInstance=t},e.reloadAskOrders=function(){e.dtAskOrderInstance&&e.dtAskOrderInstance._renderer.rerender()},e.dtBidOrdersOptions=m.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("info",!1).withOption("ordering",!1).withOption("serverSide",!0).withDataProp("bidOrders").withOption("processing",!0).withOption("ordering",!1).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){S(t)(e),F(t,n,"ask-form")}).withOption("ajax",function(n,r,o){var i=n.start+n.length-1,a=[],s=t.getAssetOrders(e.assetId,t.GET_ASSET_ORDERS.BID_ORDER,n.start,i),l=t.getAsset(e.assetId,!0);a.push(s),e.decimals||a.push(l),N.all(a).then(function(t){var n=t[0],o=t[1];o&&(e.decimals=o.decimals),r({iTotalRecords:100,iTotalDisplayRecords:100,bidOrders:n.bidOrders})})}).withDisplayLength(5).withBootstrap(),e.dtBidOrdersColumns=[f.newColumn("priceTQT").withTitle("Price per share").notSortable().renderWith(function(t,n,r,o){return t*Math.pow(10,e.decimals)/1e8}),f.newColumn("quantityQNT").withTitle("Quantity").notSortable().renderWith(function(t,n,r,o){return O(C(t,e.decimals))}),f.newColumn("priceTQT").withTitle("Sum").notSortable().renderWith(function(t,n,r,o){return O(T(v(t),e.decimals)*C(r.quantityQNT,e.decimals))}),f.newColumn("priceTQT").withTitle("Actions").notSortable().renderWith(function(e,t,n,r){return'<button type="button" class="btn btn-default btn-xs"> <i class="fa fa-check-circle" aria-hidden="true"></i> </button>'})],e.dtBidOrdersInstanceCallback=function(t){e.dtBidOrderInstance=t},e.reloadBidOrders=function(){e.dtBidOrderInstance&&e.dtBidOrderInstance._renderer.rerender()},e.dtTradeOptions=m.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("info",!1).withOption("ordering",!1).withOption("serverSide",!1).withDataProp("trades").withOption("paging",!0).withOption("processing",!1).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){S(t)(e)}).withOption("ajax",function(n,r,o){var i=n.start+n.length-1;t.getAssetLastTrades(e.assetId,n.start,i).then(function(t){e.tradeData=I(t.trades),e.labels=Array.apply(null,{length:t.trades.length}).map(Number.call,Number),e.lastTrade=t.trades[0],r({iTotalRecords:1e3,iTotalDisplayRecords:1e3,trades:t.trades})})}).withDisplayLength(10).withBootstrap(),e.dtTradeColumns=[f.newColumn("askOrder").withTitle("Details").notSortable().renderWith(function(e,t,n,r){var o=n.bidOrder;return"buy"===n.tradeType&&(o=n.askOrder),'<button type="button" class="btn btn-success btn-xs" ng-controller="SearchCtrl" ng-click="searchValue(\''+o+'\')"><i class="fa fa-list-ul" aria-hidden="true"></i></button>'}),f.newColumn("timestamp").withTitle("Date").notSortable().renderWith(function(e,t,n,r){return y(e)}),f.newColumn("quantityQNT").withTitle("Quantity").notSortable().renderWith(function(e,t,n,r){return(parseInt(e)/Math.pow(10,n.decimals)).toLocaleString("en-US",{maximumFractionDigits:n.decimals,minimumFractionDigits:n.decimals})}),f.newColumn("priceTQT").withTitle("Price").notSortable().renderWith(function(e,t,n,r){return(parseInt(e)*Math.pow(10,n.decimals)/1e8).toLocaleString("en-US",{maximumFractionDigits:n.decimals,minimumFractionDigits:n.decimals})}),f.newColumn("priceTQT").withTitle("Sum").notSortable().renderWith(function(t,n,r,o){return(parseInt(r.quantityQNT)/Math.pow(10,e.decimals)*(parseInt(t)*Math.pow(10,e.decimals))/1e8).toLocaleString("en-US",{maximumFractionDigits:r.decimals,minimumFractionDigits:r.decimals})}),f.newColumn("buyerRS").withTitle("Buyer").notSortable().renderWith(function(e,t,n,r){return h(e)}),f.newColumn("sellerRS").withTitle("Seller").notSortable().renderWith(function(e,t,n,r){return h(e)}),f.newColumn("tradeType").withTitle("Type").notSortable().renderWith(function(e,t,n,r){return A(e)})],e.$on("order-placed",function(){e.dtAskOrderInstance._renderer.rerender(),e.dtBidOrderInstance._renderer.rerender()}),e.dtLastTradesInstanceCallback=function(t){e.dtLastTradesrInstance=t},e.reloadLastTrades=function(){e.dtLastTradesrInstance&&e.dtLastTradesrInstance._renderer.rerender()},e.chartOptions={chart:{type:"linePlusBarChart",height:"245",margin:{top:20,right:75,bottom:10,left:75},bars:{forceY:[0]},bars2:{forceY:[0]},focusEnable:!1,isArea:"true",color:["#bdbdbd","#00C851"],xAxis:{axisLabel:"",showMaxMin:!0,show:!1,tickFormat:function(e){return null}},y1Axis:{axisLabelDistance:3,tickFormat:function(t){return t.toLocaleString("en-US",{maximumFractionDigits:e.decimals,minimumFractionDigits:e.decimals})}},y2Axis:{axisLabelDistance:3,tickFormat:function(t){return t.toLocaleString("en-US",{maximumFractionDigits:e.decimals,minimumFractionDigits:e.decimals})}}}}}]),angular.module("assets").controller("ExpectedOrderFormCtrl",["$scope","AssetsService","SessionStorageService","$state","DTOptionsBuilder","DTColumnBuilder","searchTermFilter","$compile","multiStepFormScope","$validation","supplyFilter","numericalStringFilter","quantToAmountFilter","quantityToShareFilter","$q","AlertService","alertConfig",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g,h){function S(e){g.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+e.errorDescription},h.expectedAssetOrderModalAlert)}e.expectedOrderForm={};var C=!1;e.onSubmit=function(){c.validate(e.expectedOrderForm),e.expectedOrderForm.$valid&&e.nextStep()},e.nextStep=function(){var n=e.expectedOrderForm.asset;t.getAsset(n).then(function(t){t.asset?e.$nextStep():C||(S(t),C=!0)},function(e){S(e)})},e.expectedOrderForm=angular.copy(l.expectedOrderForm),e.$on("$destroy",function(){l.expectedOrderForm=angular.copy(e.expectedOrderForm)}),e.dtAskOptions=o.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("serverSide",!1).withDataProp("askOrders").withOption("processing",!0).withOption("info",!1).withOption("paging",!0).withOption("ordering",!1).withOption("processing",!0).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){s(t)(e)}).withOption("ajax",function(n,r,o){var i=e.expectedOrderForm.asset,a=t.getAsset(i,!0),s=t.getExpectedAskOrders(i);f.all([a,s]).then(function(t){e.decimals=t[0].decimals,r({iTotalRecords:t[1].askOrders.length,iTotalDisplayRecords:t[1].askOrders.length,askOrders:t[1].askOrders})})}).withDisplayLength(5).withBootstrap(),e.dtAskColumns=[i.newColumn("priceTQT").withTitle("Price per share").notSortable().renderWith(function(t,n,r,o){return d(Math.pow(10,e.decimals)*p(t))}),i.newColumn("quantityQNT").withTitle("Quantity").notSortable().renderWith(function(t,n,r,o){return d(m(t,e.decimals))}),i.newColumn("priceTQT").withTitle("Sum").notSortable().renderWith(function(e,t,n,r){return d(p(e)*n.quantityQNT)})],e.dtAskInstanceCallback=function(t){e.dtInstance=t},e.dtBidOptions=o.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("serverSide",!1).withDataProp("bidOrders").withOption("processing",!0).withOption("info",!1).withOption("paging",!0).withOption("ordering",!1).withOption("processing",!0).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){s(t)(e)}).withOption("ajax",function(n,r,o){var i=e.expectedOrderForm.asset,a=t.getAsset(i,!0),s=t.getExpectedBidOrders(i);f.all([a,s]).then(function(t){e.decimals=t[0].decimals,r({iTotalRecords:t[1].bidOrders.length,iTotalDisplayRecords:t[1].bidOrders.length,bidOrders:t[1].bidOrders})})}).withDisplayLength(10).withBootstrap(),e.dtBidColumns=[i.newColumn("priceTQT").withTitle("Price per share").notSortable().renderWith(function(t,n,r,o){return d(Math.pow(10,e.decimals)*p(t))}),i.newColumn("quantityQNT").withTitle("Quantity").notSortable().renderWith(function(t,n,r,o){return d(m(t,e.decimals))}),i.newColumn("priceTQT").withTitle("Sum").notSortable().renderWith(function(e,t,n,r){return d(p(e)*n.quantityQNT)})],e.dtBidInstanceCallback=function(t){e.dtInstance=t}}]),angular.module("assets").controller("ExpectedOrderCancellationFormCtrl",["$scope","AssetsService","SessionStorageService","$state","DTOptionsBuilder","DTColumnBuilder","searchTermFilter","$compile","multiStepFormScope","$validation","supplyFilter","numericalStringFilter","quantToAmountFilter","quantityToShareFilter","$q",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f){e.expectedOrderCancellationForm={},e.onSubmit=function(){c.validate(e.expectedOrderCancellationForm),e.expectedOrderCancellationForm.$valid&&e.$nextStep()},e.expectedOrderCancellationForm=angular.copy(l.expectedOrderCancellationForm),e.$on("$destroy",function(){l.expectedOrderCancellationForm=angular.copy(e.expectedOrderCancellationForm)}),e.dtOptions=o.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("serverSide",!1).withDataProp("orderCancellations").withOption("processing",!0).withOption("info",!1).withOption("paging",!0).withOption("ordering",!1).withOption("processing",!0).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){s(t)(e)}).withOption("ajax",function(e,n,r){var o=t.getExpectedOrderCancellations();f.all([o]).then(function(e){n({iTotalRecords:e[0].orderCancellations.length,iTotalDisplayRecords:e[0].orderCancellations.length,orderCancellations:e[0].orderCancellations})})}).withDisplayLength(10).withBootstrap(),e.dtColumns=[i.newColumn("accountRS").withTitle("Account").notSortable().renderWith(function(e,t,n,r){return a(e)}),i.newColumn("order").withTitle("Order").notSortable().renderWith(function(e,t,n,r){return a(e)})],e.dtInstanceCallback=function(t){e.dtInstance=t}}]),angular.module("assets").controller("ExpectedAssetTransfersFormCtrl",["$scope","AssetsService","SessionStorageService","$state","DTOptionsBuilder","DTColumnBuilder","searchTermFilter","$compile","multiStepFormScope","$validation","supplyFilter","numericalStringFilter","quantToAmountFilter","quantityToShareFilter","$q","$uibModal","timestampFilter",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g,h){e.expectedTransfersForm={},e.onSubmit=function(){c.validate(e.expectedTransfersForm),e.expectedTransfersForm.$valid&&e.$nextStep()},e.expectedTransfersForm=angular.copy(l.expectedTransfersForm),e.$on("$destroy",function(){l.expectedTransfersForm=angular.copy(e.expectedTransfersForm)}),e.openAddressBookModal=function(){g.open({animation:!0,templateUrl:"addressbook/views/addressbook-light.html",controller:"AddressBookCtrl",resolve:{params:function(){return{closeOnClick:!0}}}}).result.then(function(t){e.expectedTransfersForm.recipientRS=t.accountRS})},e.dtOptions=o.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("serverSide",!1).withDataProp("transfers").withOption("processing",!0).withOption("info",!1).withOption("paging",!0).withOption("ordering",!1).withOption("processing",!0).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){s(t)(e)}).withOption("ajax",function(e,n,r){t.getExpectedAssetTransfers().then(function(e){n({iTotalRecords:e.transfers.length,iTotalDisplayRecords:e.transfers.length,transfers:e.transfers})})}).withDisplayLength(10).withBootstrap(),e.dtColumns=[i.newColumn("name").withTitle("Asset").notSortable().renderWith(function(e,t,n,r){return"<a ng-click=\"openAssetDetailsModal('"+n.asset+'\')" ng-controller="AssetsMainCtrl"> '+e+"</a>"}),i.newColumn("senderRS").withTitle("Sender").notSortable().renderWith(function(e,t,n,r){return a(e)}),i.newColumn("recipientRS").withTitle("Recipient").notSortable().renderWith(function(e,t,n,r){return a(e)}),i.newColumn("quantityQNT").withTitle("Quantity").notSortable().renderWith(function(e,t,n,r){return d(m(e,n.decimals))})],e.dtInstanceCallback=function(t){e.dtInstance=t}}]),angular.module("assets").controller("OrderTradesFormCtrl",["$scope","AssetsService","SessionStorageService","$state","DTOptionsBuilder","DTColumnBuilder","searchTermFilter","$compile","multiStepFormScope","$validation","supplyFilter","numericalStringFilter","quantToAmountFilter","quantityToShareFilter","$q","$uibModal","timestampFilter","buysellFilter",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g,h,S){e.orderTradesForm={},e.onSubmit=function(){c.validate(e.orderTradesForm),e.orderTradesForm.$valid&&e.$nextStep()},e.orderTradesForm=angular.copy(l.orderTradesForm),e.$on("$destroy",function(){l.orderTradesForm=angular.copy(e.orderTradesForm)}),e.openAddressBookModal=function(){g.open({animation:!0,templateUrl:"addressbook/views/addressbook-light.html",controller:"AddressBookCtrl",resolve:{params:function(){return{closeOnClick:!0}}}}).result.then(function(t){e.orderTradesForm.recipientRS=t.accountRS})},e.dtOptions=o.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("serverSide",!1).withDataProp("trades").withOption("processing",!0).withOption("info",!1).withOption("paging",!0).withOption("ordering",!1).withOption("processing",!0).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){s(t)(e)}).withOption("ajax",function(n,r,o){var i=e.orderTradesForm.orderid,a=t.getBidOrderTrades(i),s=t.getAskOrderTrades(i);f.all([a,s]).then(function(e){var t=e[0],n=e[1],o={};o.trades=[],!t.errorCode&&t.trades.length>0&&(o.trades=o.trades.concat(t.trades)),!n.errorCode&&n.trades.length>0&&(o.trades=o.trades.concat(n.trades)),r({iTotalRecords:o.trades.length,iTotalDisplayRecords:o.trades.length,trades:o.trades})})}).withDisplayLength(5).withBootstrap(),e.dtColumns=[i.newColumn("askOrder").withTitle("Details").notSortable().renderWith(function(e,t,n,r){var o=n.askOrder;return"buy"===n.tradeType&&(o=n.bidOrder),'<button type="button" class="btn btn-success btn-xs" ng-controller="SearchCtrl" ng-click="searchValue(\''+o+'\')"><i class="fa fa-list-ul" aria-hidden="true"></i></button>'}),i.newColumn("timestamp").withTitle("Date").notSortable().renderWith(function(e,t,n,r){return h(e)}),i.newColumn("quantityQNT").withTitle("Quantity").notSortable().renderWith(function(e,t,n,r){return(parseInt(e)/Math.pow(10,n.decimals)).toLocaleString("en-US",{minimumFractionDigits:n.decimals})}),i.newColumn("priceTQT").withTitle("Price").notSortable().renderWith(function(e,t,n,r){return(parseInt(e)*Math.pow(10,n.decimals)/1e8).toLocaleString("en-US",{minimumFractionDigits:n.decimals})}),i.newColumn("tradeType").withTitle("Type").notSortable().renderWith(function(e,t,n,r){return S(e)})],e.dtInstanceCallback=function(t){e.dtInstance=t}}]),angular.module("assets").controller("ExpectedAssetDeletesFormCtrl",["$scope","AssetsService","SessionStorageService","$state","DTOptionsBuilder","DTColumnBuilder","searchTermFilter","$compile","multiStepFormScope","$validation","supplyFilter","numericalStringFilter","quantToAmountFilter","quantityToShareFilter","$q","$uibModal","timestampFilter",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g,h){e.expectedDeletesForm={},e.onSubmit=function(){c.validate(e.expectedDeletesForm),e.expectedDeletesForm.$valid&&e.$nextStep()},e.expectedDeletesForm=angular.copy(l.expectedDeletesForm),e.$on("$destroy",function(){l.expectedDeletesForm=angular.copy(e.expectedDeletesForm)}),e.openAddressBookModal=function(){g.open({animation:!0,templateUrl:"addressbook/views/addressbook-light.html",controller:"AddressBookCtrl",resolve:{params:function(){return{closeOnClick:!0}}}}).result.then(function(t){e.expectedDeletesForm.recipientRS=t.accountRS})},e.dtOptions=o.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("serverSide",!1).withDataProp("deletes").withOption("processing",!0).withOption("info",!1).withOption("paging",!0).withOption("ordering",!1).withOption("processing",!0).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){s(t)(e)}).withOption("ajax",function(e,n,r){t.getExpectedAssetDeletes().then(function(e){n({iTotalRecords:e.deletes.length,iTotalDisplayRecords:e.deletes.length,deletes:e.deletes})})}).withDisplayLength(10).withBootstrap(),e.dtColumns=[i.newColumn("name").withTitle("Name").notSortable().renderWith(function(e,t,n,r){return"<a ng-click=\"openAssetDetailsModal('"+n.asset+'\')" ng-controller="AssetsMainCtrl"> '+e+"</a>"}),i.newColumn("accountRS").withTitle("Account").notSortable().renderWith(function(e,t,n,r){return a(e)}),i.newColumn("assetDelete").withTitle("Transaction").notSortable().renderWith(function(e,t,n,r){return a(e)}),i.newColumn("quantityQNT").withTitle("Quantity").notSortable().renderWith(function(e,t,n,r){return d(m(e,n.decimals))})],e.dtInstanceCallback=function(t){e.dtInstance=t}}]),angular.module("currencies",["baseClient","crypto","ui.router","ui.bootstrap","multiStepForm","node","options"]),angular.module("currencies").constant("currenciesConfig",{currenciesEndPoint:"api"}),angular.module("currencies").config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("client.signedin.currencies",{url:"^/currencies",templateUrl:"./currencies/views/main.html",abstract:!0}).state("client.signedin.currencies.currencies",{url:"^/currencies/currencies",templateUrl:"./currencies/views/currencies.html",controller:"CurrenciesCtrl"}).state("client.signedin.currencies.mycurrencies",{url:"^/currencies/mycurrencies",templateUrl:"./currencies/views/mycurrencies.html",controller:"MyCurrenciesCtrl"}).state("client.signedin.currencies.exchanges",{url:"^/currencies/exchanges",templateUrl:"./currencies/views/exchanges.html",controller:"CurrenciesExchangesCtrl"}).state("client.signedin.currencies.myexchanges",{url:"^/currencies/myexchanges",templateUrl:"./currencies/views/myexchanges.html",controller:"CurrenciesMyExchangesCtrl"}).state("client.signedin.currencies.mytransfers",{url:"^/currencies/mytransfers",templateUrl:"./currencies/views/mytransfers.html",controller:"CurrenciesMyTransfersCtrl"}).state("client.signedin.currencies.myoffers",{url:"^/currencies/myoffers",templateUrl:"./currencies/views/myoffers.html",controller:"CurrenciesMyOffersCtrl"}).state("client.signedin.currencies.trade",{url:"^/currencies/{currencyId}/trade",templateUrl:"./currencies/views/trade.html",controller:"CurrencyTradeDeskInputController"})}]),angular.module("currencies").service("CurrenciesService",["nodeConfig","SessionStorageService","NodeService","baseConfig","currenciesConfig","Restangular","TransactionService","$rootScope","OptionsService",function(e,t,n,r,o,i,a,s,l){this.getCurrencies=function(e,t){i.setBaseUrl(n.getNodeUrl(l.getOption("CONNECTION_MODE"),l.getOption("RANDOMIZE_NODES")));var r={requestType:"getAllCurrencies",firstIndex:e,lastIndex:t,includeCounts:!0};return i.all(o.currenciesEndPoint).customGET("",r)},this.getCurrency=function(e){i.setBaseUrl(n.getNodeUrl(l.getOption("CONNECTION_MODE"),l.getOption("RANDOMIZE_NODES")));var t={requestType:"getCurrency",code:e,includeCounts:!0};return i.all(o.currenciesEndPoint).customGET("",t)},this.getCurrencyById=function(e){i.setBaseUrl(n.getNodeUrl(l.getOption("CONNECTION_MODE"),l.getOption("RANDOMIZE_NODES")));var t={requestType:"getCurrency",currency:e,includeCounts:!0};return i.all(o.currenciesEndPoint).customGET("",t)},this.getAccountCurrencies=function(e){i.setBaseUrl(n.getNodeUrl(l.getOption("CONNECTION_MODE"),l.getOption("RANDOMIZE_NODES")));var t={requestType:"getAccountCurrencies",account:e,includeCurrencyInfo:!0,includeCounts:!0};return i.all(o.currenciesEndPoint).customGET("",t)},this.getSingleAccountCurrency=function(e,t){i.setBaseUrl(n.getNodeUrl(l.getOption("CONNECTION_MODE"),l.getOption("RANDOMIZE_NODES")));var r={requestType:"getAccountCurrencies",account:e,currency:t};return i.all(o.currenciesEndPoint).customGET("",r)},this.getMultipleCurrenctLastExchanges=function(e){i.setBaseUrl(n.getNodeUrl(l.getOption("CONNECTION_MODE"),l.getOption("RANDOMIZE_NODES")));var t={requestType:"getLastExchanges",currencies:e};return i.all(o.currenciesEndPoint).customGET("",t)},this.issueCurrency=function(e,t,o,s,c,u,d,p,m,f,g,h){i.setBaseUrl(n.getNodeUrl(l.getOption("CONNECTION_MODE"),l.getOption("RANDOMIZE_NODES")));var S={publicKey:e,requestType:"issueCurrency",name:t,code:o,description:s,type:c,initialSupply:parseInt(u),maxSupply:parseInt(d),decimals:parseInt(p),feeTQT:parseInt(m*r.TOKEN_QUANTS,10),broadcast:"false",deadline:l.getOption("DEADLINE"),minReservePerUnitTQT:f,reserveSupply:h,issuanceHeight:parseInt(g)};return a.createTransaction(S)},this.canDeleteCurrency=function(e,t){i.setBaseUrl(n.getNodeUrl(l.getOption("CONNECTION_MODE"),l.getOption("RANDOMIZE_NODES")));var r={requestType:"canDeleteCurrency",account:t,currency:e};return i.all(o.currenciesEndPoint).customPOST("","",r,"")},this.deleteCurrency=function(e,t,o){i.setBaseUrl(n.getNodeUrl(l.getOption("CONNECTION_MODE"),l.getOption("RANDOMIZE_NODES")));var s={requestType:"deleteCurrency",publicKey:o,currency:e,feeTQT:parseInt(t*r.TOKEN_QUANTS,10),deadline:l.getOption("DEADLINE"),broadcast:"false"};return a.createTransaction(s)},this.searchCurrencies=function(e){i.setBaseUrl(n.getNodeUrl(l.getOption("CONNECTION_MODE"),l.getOption("RANDOMIZE_NODES")));var t={requestType:"searchCurrencies",query:e,includeCounts:!0};return i.all(o.currenciesEndPoint).customGET("",t)},this.transferCurrency=function(e,t,o,s,c){i.setBaseUrl(n.getNodeUrl(l.getOption("CONNECTION_MODE"),l.getOption("RANDOMIZE_NODES")));var u={requestType:"transferCurrency",recipient:t,currency:o,publicKey:e,feeTQT:parseInt(c*r.TOKEN_QUANTS,10),deadline:l.getOption("DEADLINE"),broadcast:"false",units:parseInt(s)};return a.createTransaction(u)},this.getBlockChainStatus=function(){i.setBaseUrl(n.getNodeUrl(l.getOption("CONNECTION_MODE"),l.getOption("RANDOMIZE_NODES")));var e={requestType:"getBlockchainStatus"};return i.all(o.currenciesEndPoint).customGET("",e)},this.publishExchangeOffer=function(e,t,o,s,c,u){i.setBaseUrl(n.getNodeUrl(l.getOption("CONNECTION_MODE"),l.getOption("RANDOMIZE_NODES")));var d={requestType:"publishExchangeOffer",currency:t,publicKey:e,feeTQT:parseInt(u*r.TOKEN_QUANTS,10),deadline:l.getOption("DEADLINE"),broadcast:"false",buyRateTQT:parseInt(o.buyRate),sellRateTQT:parseInt(o.sellRate),totalBuyLimit:parseInt(o.totalBuy),totalSellLimit:parseInt(o.totalSell),initialBuySupply:parseInt(s.initialBuy),initialSellSupply:parseInt(s.initialSell),expirationHeight:parseInt(c)};return a.createTransaction(d)},this.getAllExchanges=function(e,t){i.setBaseUrl(n.getNodeUrl(l.getOption("CONNECTION_MODE"),l.getOption("RANDOMIZE_NODES")));var r={requestType:"getAllExchanges",firstIndex:e,lastIndex:t,includeCurrencyInfo:!0};return i.all(o.currenciesEndPoint).customGET("",r)},this.currencyReserveClaim=function(e,t,o,s){i.setBaseUrl(n.getNodeUrl(l.getOption("CONNECTION_MODE"),l.getOption("RANDOMIZE_NODES")));var c={requestType:"currencyReserveClaim",currency:t,units:o,publicKey:e,feeTQT:parseInt(s*r.TOKEN_QUANTS,10),deadline:l.getOption("DEADLINE"),broadcast:"false"};return a.createTransaction(c)},this.currencyReserveIncrease=function(e,t,o,s){i.setBaseUrl(n.getNodeUrl(l.getOption("CONNECTION_MODE"),l.getOption("RANDOMIZE_NODES")));var c={requestType:"currencyReserveIncrease",currency:t,amountPerUnitTQT:parseInt(o),publicKey:e,feeTQT:parseInt(s*r.TOKEN_QUANTS,10),deadline:l.getOption("DEADLINE"),broadcast:"false"};return a.createTransaction(c)},this.buyCurrency=function(e,t,o,s,c){i.setBaseUrl(n.getNodeUrl(l.getOption("CONNECTION_MODE"),l.getOption("RANDOMIZE_NODES")));var u={requestType:"currencyBuy",currency:t,rateTQT:parseInt(o),units:parseInt(s),publicKey:e,feeTQT:parseInt(c*r.TOKEN_QUANTS,10),deadline:l.getOption("DEADLINE"),broadcast:"false"};return a.createTransaction(u)},this.sellCurrency=function(e,t,o,s,c){i.setBaseUrl(n.getNodeUrl(l.getOption("CONNECTION_MODE"),l.getOption("RANDOMIZE_NODES")));var u={requestType:"currencySell",currency:t,rateTQT:parseInt(o),units:parseInt(s),publicKey:e,feeTQT:parseInt(c*r.TOKEN_QUANTS,10),deadline:l.getOption("DEADLINE"),broadcast:"false"};return a.createTransaction(u)},this.getAvailableToBuy=function(e,t){i.setBaseUrl(n.getNodeUrl(l.getOption("CONNECTION_MODE")));var r={requestType:"getAvailableToBuy",currency:accountRs,units:t};return i.all(o.currenciesEndPoint).customGET("",r)},this.getAvailableToSell=function(e,t){i.setBaseUrl(n.getNodeUrl(l.getOption("CONNECTION_MODE")));var r={requestType:"getAvailableToSell",currency:e,units:t};return i.all(o.currenciesEndPoint).customGET("",r)},this.getBuyOffers=function(e,t,r,a){i.setBaseUrl(n.getNodeUrl(l.getOption("CONNECTION_MODE")));var s={requestType:"getBuyOffers",account:e,currency:t,availableOnly:!0,sortByRate:!0,firstIndex:r,lastIndex:a};return i.all(o.currenciesEndPoint).customGET("",s)},this.getSellOffers=function(e,t,r,a){i.setBaseUrl(n.getNodeUrl(l.getOption("CONNECTION_MODE")));var s={requestType:"getSellOffers",account:e,currency:t,availableOnly:!0,sortByRate:!0,firstIndex:r,lastIndex:a};return i.all(o.currenciesEndPoint).customGET("",s)},this.getCurrencyAccounts=function(e,t,r){i.setBaseUrl(n.getNodeUrl(l.getOption("CONNECTION_MODE")));var a={requestType:"getCurrencyAccounts",currency:e,availableOnly:!0,firstIndex:t,lastIndex:r};return i.all(o.currenciesEndPoint).customGET("",a)},this.getCurrencyFounders=function(e,t,r){i.setBaseUrl(n.getNodeUrl(l.getOption("CONNECTION_MODE")));var a={requestType:"getCurrencyFounders",currency:e,firstIndex:t,lastIndex:r};return i.all(o.currenciesEndPoint).customGET("",a)},this.getCurrencyTransfers=function(e,t,r,a){i.setBaseUrl(n.getNodeUrl(l.getOption("CONNECTION_MODE")));var s={requestType:"getCurrencyTransfers",currency:e,account:t,firstIndex:r,lastIndex:a,includeCurrencyInfo:!0};return i.all(o.currenciesEndPoint).customGET("",s)},this.getExchanges=function(e,t,r,a){i.setBaseUrl(n.getNodeUrl(l.getOption("CONNECTION_MODE")));var s={requestType:"getExchanges",currency:e,account:t,firstIndex:r,lastIndex:a,includeCurrencyInfo:!0};return i.all(o.currenciesEndPoint).customGET("",s)},this.getDeskExchanges=function(e,t,r){i.setBaseUrl(n.getNodeUrl(l.getOption("CONNECTION_MODE")));var a={requestType:"getExchanges",currency:e,firstIndex:t,lastIndex:r,includeCurrencyInfo:!0};return i.all(o.currenciesEndPoint).customGET("",a)},this.getAccountExchangeRequests=function(e,t,r,a){i.setBaseUrl(n.getNodeUrl(l.getOption("CONNECTION_MODE")));var s={requestType:"getAccountExchangeRequests",account:e,currency:e,firstIndex:r,lastIndex:a,includeCurrencyInfo:!0};return i.all(o.currenciesEndPoint).customGET("",s)},this.getExpectedCurrencyTransfers=function(e,t,r,a){i.setBaseUrl(n.getNodeUrl(l.getOption("CONNECTION_MODE")));var s={requestType:"getExpectedCurrencyTransfers",currency:e,account:t,firstIndex:r,lastIndex:a,includeCurrencyInfo:!0};return i.all(o.currenciesEndPoint).customGET("",s)},this.getExpectedExchangeRequests=function(e,t,r,a){i.setBaseUrl(n.getNodeUrl(l.getOption("CONNECTION_MODE")));var s={requestType:"getExpectedExchangeRequests",currency:e,account:t,firstIndex:r,lastIndex:a,includeCurrencyInfo:!0};return i.all(o.currenciesEndPoint).customGET("",s)},this.getExpectedSellOffers=function(e,t,r,a){i.setBaseUrl(n.getNodeUrl(l.getOption("CONNECTION_MODE")));var s={requestType:"getExpectedSellOffers",currency:e,account:t,firstIndex:r,lastIndex:a,sortByRate:!0};return i.all(o.currenciesEndPoint).customGET("",s)},this.getAvailableToSell=function(e,t){i.setBaseUrl(n.getNodeUrl(l.getOption("CONNECTION_MODE")));var r={requestType:"getAvailableToSell",currency:e,units:t};return i.all(o.currenciesEndPoint).customGET("",r)},this.getAvailableToBuy=function(e,t){i.setBaseUrl(n.getNodeUrl(l.getOption("CONNECTION_MODE")));var r={requestType:"getAvailableToBuy",currency:e,units:t};return i.all(o.currenciesEndPoint).customGET("",r)}}]),angular.module("currencies").controller("CurrenciesMainCtrl",["$scope","CurrenciesService","amountTQTFilter","timestampFilter","DTOptionsBuilder","DTColumnBuilder","$uibModal","$compile","baseConfig","supplyFilter","searchTermFilter","$state",function(e,t,n,r,o,i,a,s,l,c,u,d){e.openIssueCurrencyModal=function(){a.open({animation:!0,templateUrl:"currencies/modals/issue-currency-form.html",size:"lg",controller:"CurrenciesFormCtrl",resolve:{params:function(){return{}}}})},e.openDeleteCurrencyModal=function(e,t,n){a.open({animation:!0,templateUrl:"currencies/modals/delete-currency-form.html",size:"lg",controller:"CurrenciesFormCtrl",resolve:{params:function(){return{currencyId:e,decimals:t,ticker:n}}
}})},e.openPublishExchangeOfferModal=function(e,t,n){a.open({animation:!0,templateUrl:"currencies/modals/publish-exchange-offer-form.html",size:"lg",controller:"CurrenciesFormCtrl",resolve:{params:function(){return{currencyId:e,decimals:t,ticker:n}}}})},e.openPublishExchangeBuyOfferModal=function(e,t,n){a.open({animation:!0,templateUrl:"currencies/modals/publish-exchange-buy-offer-form.html",size:"lg",controller:"CurrenciesFormCtrl",resolve:{params:function(){return{currencyId:e,decimals:t,ticker:n}}}})},e.openPublishExchangeSellOfferModal=function(e,t,n){a.open({animation:!0,templateUrl:"currencies/modals/publish-exchange-sell-offer-form.html",size:"lg",controller:"CurrenciesFormCtrl",resolve:{params:function(){return{currencyId:e,decimals:t,ticker:n}}}})},e.openCancelExchangeOfferModal=function(e,t){a.open({animation:!0,templateUrl:"currencies/modals/cancel-exchange-offer-form.html",size:"lg",controller:"CurrenciesFormCtrl",resolve:{params:function(){return{currencyId:e,typeOnly:t}}}})},e.openCurrencyReserveClaimModal=function(e,t,n){a.open({animation:!0,templateUrl:"currencies/modals/currency-reserve-claim-form.html",size:"lg",controller:"CurrenciesFormCtrl",resolve:{params:function(){return{currencyId:e,decimals:t,ticker:n}}}})},e.openCurrencyReserveIncreaseModal=function(e,t,n){a.open({animation:!0,templateUrl:"currencies/modals/currency-reserve-increase-form.html",size:"lg",controller:"CurrenciesFormCtrl",resolve:{params:function(){return{currencyId:e,decimals:t,ticker:n}}}})},e.openBuyCurrencyModal=function(e,t,n){a.open({animation:!0,templateUrl:"currencies/modals/buy-currency-form.html",size:"lg",controller:"CurrenciesFormCtrl",resolve:{params:function(){return{currencyId:e,decimals:t}}}})},e.openSellCurrencyModal=function(e,t,n){a.open({animation:!0,templateUrl:"currencies/modals/sell-currency-form.html",size:"lg",controller:"CurrenciesFormCtrl",resolve:{params:function(){return{currencyId:e,decimals:t}}}})},e.openSearchCurrencyModal=function(){a.open({animation:!0,templateUrl:"currencies/modals/search-currency-form.html",size:"lg",controller:"CurrenciesFormCtrl",resolve:{params:function(){return{}}}})},e.openTransferCurrencyModal=function(e,t,n){a.open({animation:!0,templateUrl:"currencies/modals/transfer-currency-form.html",size:"lg",controller:"CurrenciesFormCtrl",resolve:{params:function(){return{currencyId:e,decimals:t,ticker:n}}}})},e.openSendCurrencyModal=function(){a.open({animation:!0,templateUrl:"currencies/modals/send-currency-form.html",size:"lg",controller:"CurrenciesFormCtrl",resolve:{params:function(){return{}}}})},e.openCurrencyDetailsModal=function(e,t,n){a.open({animation:!0,templateUrl:"currencies/modals/currency-details.html",size:"lg",controller:"CurrencyDetailsCtrl",resolve:{params:function(){return{currencyId:e,decimals:t,ticker:n}}}})},e.openTradeDesk=function(e){d.go("client.signedin.currencies.trade",{currencyId:e})}}]),angular.module("currencies").controller("CurrenciesCtrl",["$scope","CurrenciesService","amountTQTFilter","timestampFilter","DTOptionsBuilder","DTColumnBuilder","$uibModal","$compile","baseConfig","supplyFilter","searchTermFilter",function(e,t,n,r,o,i,a,s,l,c,u){e.dtOptions=o.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("info",!1).withOption("ordering",!1).withOption("serverSide",!0).withDataProp("currencies").withOption("processing",!0).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){s(t)(e)}).withOption("ajax",function(e,n,r){var o=e.start+e.length-1;t.getCurrencies(e.start,o).then(function(e){n({iTotalRecords:1e3,iTotalDisplayRecords:1e3,currencies:e.currencies})})}).withDisplayLength(10).withBootstrap(),e.dtColumns=[i.newColumn("currency").withTitle("Details").notSortable().renderWith(function(e,t,n,r){return'<button type="button" class="btn btn-success btn-xs" ng-controller="SearchCtrl" ng-click="searchValue(\''+e+'\')"><i class="fa fa-list-ul" aria-hidden="true" style="width:15px;"></i></button>'}),i.newColumn("code").withTitle("Ticker").notSortable().renderWith(function(e,t,n,r){return"<a ng-click=\"openCurrencyDetailsModal('"+n.code+'\')" ng-controller="CurrenciesMainCtrl"> '+e+"</a>"}),i.newColumn("name").withTitle("Name").notSortable().renderWith(function(e,t,n,r){return e}),i.newColumn("accountRS").withTitle("Issuer").notSortable().renderWith(function(e,t,n,r){return u(e)}),i.newColumn("currentSupply").withTitle("Supply").notSortable().renderWith(function(e,t,n,r){return c(e,n.decimals)}),i.newColumn("numberOfExchanges").withTitle("Exchanges").notSortable().renderWith(function(e,t,n,r){return e}),i.newColumn("numberOfTransfers").withTitle("Transfers").notSortable().renderWith(function(e,t,n,r){return e}),i.newColumn("currency").withTitle("Action").notSortable().renderWith(function(e,t,n,r){var o=!1;return 0===parseInt(n.currentSupply)&&(o=!0),'<button type="button" class="btn btn-default btn-xs"   popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover= "TradeDesk" ng-controller="CurrenciesMainCtrl"ng-disabled="'+o+'" ng-click="openTradeDesk(\''+e+"','"+n.decimals+'\')"> <i class="fa fa-bar-chart" aria-hidden="true" style="width:15px;"></i> </button>'})],e.dtInstanceCallback=function(t){e.dtInstance=t},e.reloadCurrencies=function(){e.dtInstance&&e.dtInstance._renderer.rerender()}}]),angular.module("currencies").controller("MyCurrenciesCtrl",["$scope","CurrenciesService","amountTQTFilter","timestampFilter","DTOptionsBuilder","DTColumnBuilder","$uibModal","$compile","baseConfig","supplyFilter","searchTermFilter","CommonsService","currencyModelFilter",function(e,t,n,r,o,i,a,s,l,c,u,d,p){e.dtOptionsCurrencies=o.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("info",!1).withOption("serverSide",!1).withDataProp("accountCurrencies").withOption("paging",!0).withOption("ordering",!1).withOption("processing",!1).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){s(t)(e)}).withOption("ajax",function(e,n,r){var o=d.getAccountDetailsFromSession("accountId");t.getAccountCurrencies(o).then(function(e){n({iTotalRecords:e.accountCurrencies.length,iTotalDisplayRecords:e.accountCurrencies.length,accountCurrencies:e.accountCurrencies})})}).withDisplayLength(10).withBootstrap(),e.dtColumnsCurrencies=[i.newColumn("currency").withTitle("Details").notSortable().renderWith(function(e,t,n,r){return'<button type="button" class="btn btn-success btn-xs" ng-controller="SearchCtrl" ng-click="searchValue(\''+e+'\')"><i class="fa fa-list-ul" aria-hidden="true" style="width:15px;"></i></button>'}),i.newColumn("code").withTitle("Ticker").notSortable().renderWith(function(e,t,n,r){return"<a ng-click=\"openCurrencyDetailsModal('"+n.code+'\')" ng-controller="CurrenciesMainCtrl"> '+e+"</a>"}),i.newColumn("name").withTitle("Name").notSortable().renderWith(function(e,t,n,r){return e}),i.newColumn("units").withTitle("Units").notSortable().renderWith(function(e,t,n,r){return c(e,n.decimals)}),i.newColumn("numberOfExchanges").withTitle("Exchanges").notSortable().renderWith(function(e,t,n,r){return e}),i.newColumn("numberOfTransfers").withTitle("Transfers").notSortable().renderWith(function(e,t,n,r){return e}),i.newColumn("currency").withTitle("Action").notSortable().renderWith(function(e,t,n,r){var o='<button type="button" class="btn btn-default btn-xs"  popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover= "TradeDesk" ng-controller="CurrenciesMainCtrl" ng-click="openTradeDesk(\''+e+"','"+n.decimals+"','"+n.code+'\')"> <i class="fa fa-bar-chart" aria-hidden="true" style="width:15px;"></i> </button>',i='<button type="button" class="btn btn-default btn-xs"  popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover= "Transfer" ng-controller="CurrenciesMainCtrl" ng-click="openTransferCurrencyModal(\''+e+"','"+n.decimals+"','"+n.code+'\')"> <i class="fa fa-user" aria-hidden="true" style="width:15px;"></i> </button>',a='<button type="button" class="btn btn-default btn-xs"  popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover= "Delete" ng-controller="CurrenciesMainCtrl" ng-click="openDeleteCurrencyModal(\''+e+"','"+n.decimals+"','"+n.code+'\')"> <i class="fa fa-times" aria-hidden="true" style="width:15px;"></i> </button>',s='<button type="button" class="btn btn-default btn-xs"  popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover= "Exchange" ng-controller="CurrenciesMainCtrl" ng-click="openPublishExchangeOfferModal(\''+e+"','"+n.decimals+"','"+n.code+'\')"> <i class="fa fa-usd" aria-hidden="true" style="width:15px;"></i> </button>';n.decimals,n.code,n.decimals,n.code,n.decimals,n.code;return o+" "+s+" "+i+" "+a})],e.dtInstanceCallbackCurrencies=function(t){e.dtInstance=t},e.reloadCurrencies=function(){e.dtInstance&&e.dtInstance._renderer.rerender()}}]),angular.module("currencies").controller("CurrenciesExchangesCtrl",["$scope","CurrenciesService","amountTQTFilter","timestampFilter","DTOptionsBuilder","DTColumnBuilder","$uibModal","$compile","baseConfig","supplyFilter","searchTermFilter","quantToAmountFilter","numericalStringFilter",function(e,t,n,r,o,i,a,s,l,c,u,d,p){e.dtOptions=o.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("info",!1).withOption("ordering",!1).withOption("serverSide",!0).withDataProp("exchanges").withOption("processing",!0).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){s(t)(e)}).withOption("ajax",function(e,n,r){var o=e.start+e.length-1;t.getAllExchanges(e.start,o).then(function(e){n({iTotalRecords:1e3,iTotalDisplayRecords:1e3,exchanges:e.exchanges})})}).withDisplayLength(10).withBootstrap(),e.dtColumns=[i.newColumn("offer").withTitle("Offer").notSortable().renderWith(function(e,t,n,r){return'<button type="button" class="btn btn-success btn-xs" ng-controller="SearchCtrl" ng-click="searchValue(\''+e+'\')"><i class="fa fa-list-ul" aria-hidden="true" style="width:15px;"></i></button>'}),i.newColumn("timestamp").withTitle("Date").notSortable().renderWith(function(e,t,n,o){return r(e)}),i.newColumn("code").withTitle("Ticker").notSortable().renderWith(function(e,t,n,r){return"<a ng-click=\"openCurrencyDetailsModal('"+n.code+'\')" ng-controller="CurrenciesMainCtrl"> '+e+"</a>"}),i.newColumn("rateTQT").withTitle("Rate").notSortable().renderWith(function(e,t,n,r){return(e*Math.pow(10,n.decimals)/1e8).toLocaleString("en-US",{minimumFractionDigits:n.decimals})}),i.newColumn("units").withTitle("Units").notSortable().renderWith(function(e,t,n,r){return(parseInt(e)/Math.pow(10,n.decimals)).toLocaleString("en-US",{minimumFractionDigits:n.decimals})}),i.newColumn("sellerRS").withTitle("Seller").notSortable().renderWith(function(e,t,n,r){return u(e)}),i.newColumn("buyerRS").withTitle("Buyer").notSortable().renderWith(function(e,t,n,r){return u(e)}),i.newColumn("transaction").withTitle("Details").notSortable().renderWith(function(e,t,n,r){return'<button type="button" class="btn btn-default btn-xs" ng-controller="SearchCtrl" ng-click="searchValue(\''+e+'\')"><i class="fa fa-list-ul" aria-hidden="true" style="width:15px;"></i></button>'})],e.dtInstanceCallback=function(t){e.dtInstance=t},e.reloadCurrencies=function(){e.dtInstance&&e.dtInstance._renderer.rerender()}}]),angular.module("currencies").controller("CurrenciesFormCtrl",["$scope","$uibModalInstance","params",function(e,t,n){e.cancel=function(){t.dismiss("cancel")},e.$on("close-modal",function(){t.dismiss("cancel")});var r=[{templateUrl:"currencies/modals/issue-currency-details.html",title:"Issue Currency Details",controller:"IssueCurrencyFormController",isolatedScope:!0,data:n},{templateUrl:"currencies/modals/issue-currency-details-2.html",title:"Issue Currency Details 2",controller:"IssueCurrencyFormController",isolatedScope:!0,data:n},{templateUrl:"currencies/modals/issue-currency-confirm.html",title:"Issue Currency Confirmation",controller:"IssueCurrencyFormController",isolatedScope:!0}],o=[{templateUrl:"currencies/modals/delete-currency-details.html",title:"Delete Currency Details",controller:"DeleteCurrencyFormController",isolatedScope:!0,data:n},{templateUrl:"currencies/modals/delete-currency-confirm.html",title:"Delete Currency Confirmation",controller:"DeleteCurrencyFormController",isolatedScope:!0}],i=[{templateUrl:"currencies/modals/search-currency-details.html",title:"Search Currency Query",controller:"SearchCurrencyFormCtrl",isolatedScope:!0,data:n},{templateUrl:"currencies/modals/search-currency-confirm.html",title:"Search Currency Results",controller:"SearchCurrencyFormCtrl",isolatedScope:!0}],a=[{templateUrl:"currencies/modals/transfer-currency-details.html",title:"Transfer Currency Details",controller:"TransferCurrencyFormController",isolatedScope:!0,data:n},{templateUrl:"currencies/modals/transfer-currency-confirm.html",title:"Transfer Currency Confirmation",controller:"TransferCurrencyFormController",isolatedScope:!0}],s=[{templateUrl:"currencies/modals/send-currency-details.html",title:"Send Currency Details",controller:"TransferCurrencyFormController",isolatedScope:!0,data:n},{templateUrl:"currencies/modals/send-currency-confirm.html",title:"Send Currency Confirmation",controller:"TransferCurrencyFormController",isolatedScope:!0}],l=[{templateUrl:"currencies/modals/publish-exchange-offer-details.html",title:"Exchange Offer Details",controller:"PublishExchangeOrderFormController",isolatedScope:!0,data:n},{templateUrl:"currencies/modals/publish-exchange-offer-confirm.html",title:"Exchange Offer Confirmation",controller:"PublishExchangeOrderFormController",isolatedScope:!0}],c=[{templateUrl:"currencies/modals/cancel-exchange-offer-confirm.html",title:"Exchange Offer Details",controller:"CancelExchangeOfferFormController",isolatedScope:!0,data:n}],u=[{templateUrl:"currencies/modals/publish-exchange-buy-offer-details.html",title:"Currency Buy Offer Details",controller:"PublishExchangeOrderFormController",isolatedScope:!0,data:n},{templateUrl:"currencies/modals/publish-exchange-buy-offer-confirm.html",title:"Currency Buy Offer Confirmation",controller:"PublishExchangeOrderFormController",isolatedScope:!0}],d=[{templateUrl:"currencies/modals/publish-exchange-sell-offer-details.html",title:"Currency Sell Offer Details",controller:"PublishExchangeOrderFormController",isolatedScope:!0,data:n},{templateUrl:"currencies/modals/publish-exchange-sell-offer-confirm.html",title:"Currency Sell Offer Confirmation",controller:"PublishExchangeOrderFormController",isolatedScope:!0}],p=[{templateUrl:"currencies/modals/currency-reserve-claim-details.html",title:"Reserve Claim Details",controller:"CurrencyReserveClaimFormController",isolatedScope:!0,data:n},{templateUrl:"currencies/modals/currency-reserve-claim-confirm.html",title:"Reserve Claim Confirmation",controller:"CurrencyReserveClaimFormController",isolatedScope:!0}],m=[{templateUrl:"currencies/modals/currency-reserve-increase-details.html",title:"Reserve Increase Details",controller:"CurrencyReserveIncreaseFormController",isolatedScope:!0,data:n},{templateUrl:"currencies/modals/currency-reserve-increase-confirm.html",title:"Reserve Increase Confirmation",controller:"CurrencyReserveIncreaseFormController",isolatedScope:!0}],f=[{templateUrl:"currencies/modals/buy-currency-confirm.html",title:"Buy Currency Confirmation",controller:"BuyCurrencyFormController",isolatedScope:!0,data:n}],g=[{templateUrl:"currencies/modals/sell-currency-confirm.html",title:"Sell Currency Confirmation",controller:"SellCurrencyFormController",isolatedScope:!0,data:n}];e.steps={},e.steps.issueCurrencyForm=r,e.steps.deleteCurrencyForm=o,e.steps.searchCurrencyForm=i,e.steps.transferCurrencyForm=a,e.steps.sendCurrencyForm=s,e.steps.publishExchangeOfferForm=l,e.steps.publishExchangeBuyOfferForm=u,e.steps.publishExchangeSellOfferForm=d,e.steps.cancelExchangeOfferForm=c,e.steps.currencyReserveClaimForm=p,e.steps.currencyReserveIncreaseForm=m,e.steps.buyCurrencyForm=f,e.steps.sellCurrencyForm=g}]),angular.module("currencies").controller("CurrencyDetailsCtrl",["$scope","CurrenciesService","amountTQTFilter","timestampFilter","DTOptionsBuilder","DTColumnBuilder","$uibModal","$compile","baseConfig","supplyFilter","searchTermFilter","CommonsService","params","$uibModalInstance",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m){e.initCurrencyDetails=function(){t.getCurrency(p.currencyId,!0).then(function(t){e.currencyDetails=t},function(e){})},e.cancel=function(){m.dismiss("cancel")}}]),angular.module("currencies").controller("CurrenciesMyExchangesCtrl",["$scope","CurrenciesService","amountTQTFilter","timestampFilter","DTOptionsBuilder","DTColumnBuilder","$uibModal","$compile","baseConfig","supplyFilter","searchTermFilter","quantToAmountFilter","numericalStringFilter","AccountService","numberStringFilter",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f){e.dtMyExchangesOptions=o.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("info",!1).withOption("ordering",!1).withOption("serverSide",!0).withDataProp("myexchanges").withOption("processing",!0).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){s(t)(e)}).withOption("ajax",function(e,n,r){var o=e.start+e.length-1,i=m.getAccountDetailsFromSession("accountRs");t.getExchanges("",i,e.start,o).then(function(e){n({iTotalRecords:1e3,iTotalDisplayRecords:1e3,myexchanges:e.exchanges})})}).withDisplayLength(10).withBootstrap(),e.dtMyExchangesColumns=[i.newColumn("offer").withTitle("Offer").notSortable().renderWith(function(e,t,n,r){return'<button type="button" class="btn btn-success btn-xs" ng-controller="SearchCtrl" ng-click="searchValue(\''+e+'\')"><i class="fa fa-list-ul" aria-hidden="true" style="width:15px;"></i></button>'}),i.newColumn("timestamp").withTitle("Date").notSortable().renderWith(function(e,t,n,o){return r(e)}),i.newColumn("code").withTitle("Ticker").notSortable().renderWith(function(e,t,n,r){return"<a ng-click=\"openCurrencyDetailsModal('"+n.code+'\')" ng-controller="CurrenciesMainCtrl"> '+e+"</a>"}),i.newColumn("rateTQT").withTitle("Rate").notSortable().renderWith(function(e,t,n,r){return(e*Math.pow(10,n.decimals)/1e8).toLocaleString("en-US",{minimumFractionDigits:n.decimals})}),i.newColumn("units").withTitle("Units").notSortable().renderWith(function(e,t,n,r){return(parseInt(e)/Math.pow(10,n.decimals)).toLocaleString("en-US",{minimumFractionDigits:n.decimals})}),i.newColumn("sellerRS").withTitle("Seller").notSortable().renderWith(function(e,t,n,r){return u(e)}),i.newColumn("buyerRS").withTitle("Buyer").notSortable().renderWith(function(e,t,n,r){return u(e)}),i.newColumn("transaction").withTitle("Details").notSortable().renderWith(function(e,t,n,r){return'<button type="button" class="btn btn-default btn-xs" ng-controller="SearchCtrl" ng-click="searchValue(\''+e+'\')"><i class="fa fa-list-ul" aria-hidden="true" style="width:15px;"></i></button>'})],e.dtMyExchangesInstanceCallback=function(t){e.dtInstance=t},e.reloadMyExchanges=function(){e.dtInstance&&e.dtInstance._renderer.rerender()}}]),angular.module("currencies").controller("CurrenciesMyTransfersCtrl",["$scope","CurrenciesService","amountTQTFilter","timestampFilter","DTOptionsBuilder","DTColumnBuilder","$uibModal","$compile","baseConfig","supplyFilter","searchTermFilter","quantToAmountFilter","numericalStringFilter","AccountService",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m){e.dtMyTransfersOptions=o.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("info",!1).withOption("ordering",!1).withOption("serverSide",!0).withDataProp("transfers").withOption("processing",!0).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){s(t)(e)}).withOption("ajax",function(e,n,r){var o=e.start+e.length-1,i=m.getAccountDetailsFromSession("accountRs");t.getCurrencyTransfers("",i,e.start,o).then(function(e){n({iTotalRecords:1e3,iTotalDisplayRecords:1e3,transfers:e.transfers})})}).withDisplayLength(10).withBootstrap(),e.dtMyTransfersColumns=[i.newColumn("transfer").withTitle("Details").notSortable().renderWith(function(e,t,n,r){return'<button type="button" class="btn btn-success btn-xs" ng-controller="SearchCtrl" ng-click="searchValue(\''+e+'\')"><i class="fa fa-list-ul" aria-hidden="true" style="width:15px;"></i></button>'}),i.newColumn("timestamp").withTitle("Date").notSortable().renderWith(function(e,t,n,o){return r(e)}),i.newColumn("code").withTitle("Ticker").notSortable().renderWith(function(e,t,n,r){return"<a ng-click=\"openCurrencyDetailsModal('"+n.code+'\')" ng-controller="CurrenciesMainCtrl"> '+e+"</a>"}),i.newColumn("units").withTitle("Units").notSortable().renderWith(function(e,t,n,r){return c(e,n.decimals)}),i.newColumn("recipientRS").withTitle("Recipient").notSortable().renderWith(function(e,t,n,r){return u(e)})],e.dtMyTransfersInstanceCallback=function(t){e.dtInstance=t},e.reloadMyTransfers=function(){e.dtInstance&&e.dtInstance._renderer.rerender()}}]),angular.module("currencies").controller("CurrenciesMyOffersCtrl",["$scope","CurrenciesService","amountTQTFilter","timestampFilter","DTOptionsBuilder","DTColumnBuilder","$uibModal","$compile","baseConfig","supplyFilter","searchTermFilter","quantToAmountFilter","numericalStringFilter","AccountService",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m){e.dtMyBuyOffersOptions=o.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("info",!1).withOption("ordering",!1).withOption("serverSide",!0).withDataProp("buyoffers").withOption("processing",!0).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){s(t)(e)}).withOption("ajax",function(e,n,r){var o=e.start+e.length-1,i=m.getAccountDetailsFromSession("accountRs");t.getBuyOffers(i,"",e.start,o).then(function(e){n({iTotalRecords:1e3,iTotalDisplayRecords:1e3,buyoffers:e.offers})})}).withDisplayLength(10).withBootstrap(),e.dtMyBuyOffersColumns=[i.newColumn("offer").withTitle("offer").notSortable().renderWith(function(e,t,n,r){return'<button type="button" class="btn btn-success btn-xs" ng-controller="SearchCtrl" ng-click="searchValue(\''+e+'\')"><i class="fa fa-list-ul" aria-hidden="true" style="width:15px;"></i></button>'}),i.newColumn("code").withTitle("Ticker").notSortable().renderWith(function(e,t,n,r){return"<a ng-click=\"openCurrencyDetailsModal('"+n.code+'\')" ng-controller="CurrenciesMainCtrl"> '+e+"</a>"}),i.newColumn("rateTQT").withTitle("price").notSortable().renderWith(function(e,t,n,r){return(e*Math.pow(10,n.decimals)/1e8).toLocaleString("en-US",{minimumFractionDigits:n.decimals})}),i.newColumn("limit").withTitle("Limit").notSortable().renderWith(function(e,t,n,r){return c(e,n.decimals)}),i.newColumn("supply").withTitle("Supply").notSortable().renderWith(function(e,t,n,r){return c(e,n.decimals)}),i.newColumn("expirationHeight").withTitle("Height").notSortable().renderWith(function(e,t,n,r){return e}),i.newColumn("currency").withTitle("Actions").notSortable().renderWith(function(e,t,n,r){return'<button type="button" class="btn btn-default btn-xs"   ng-controller="CurrenciesMainCtrl" ng-click="openCancelExchangeOfferModal(\''+e+'\',\'BUY\')"> <i class="fa fa-times" aria-hidden="true" style="width:15px;"></i> </button>'})],e.dtMySellOffersOptions=o.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("info",!1).withOption("ordering",!1).withOption("serverSide",!0).withDataProp("buyoffers").withOption("processing",!0).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){s(t)(e)}).withOption("ajax",function(e,n,r){var o=e.start+e.length-1,i=m.getAccountDetailsFromSession("accountRs");t.getSellOffers(i,"",e.start,o).then(function(e){n({iTotalRecords:1e3,iTotalDisplayRecords:1e3,buyoffers:e.offers})})}).withDisplayLength(10).withBootstrap(),e.dtMySellOffersColumns=[i.newColumn("offer").withTitle("offer").notSortable().renderWith(function(e,t,n,r){return'<button type="button" class="btn btn-success btn-xs" ng-controller="SearchCtrl" ng-click="searchValue(\''+e+'\')"><i class="fa fa-list-ul" aria-hidden="true" style="width:15px;"></i></button>'}),i.newColumn("code").withTitle("Ticker").notSortable().renderWith(function(e,t,n,r){return"<a ng-click=\"openCurrencyDetailsModal('"+n.code+'\')" ng-controller="CurrenciesMainCtrl"> '+e+"</a>"}),i.newColumn("rateTQT").withTitle("price").notSortable().renderWith(function(e,t,n,r){return(e*Math.pow(10,n.decimals)/1e8).toLocaleString("en-US",{minimumFractionDigits:n.decimals})}),i.newColumn("limit").withTitle("Limit").notSortable().renderWith(function(e,t,n,r){return c(e,n.decimals)}),i.newColumn("supply").withTitle("Supply").notSortable().renderWith(function(e,t,n,r){return c(e,n.decimals)}),i.newColumn("expirationHeight").withTitle("Height").notSortable().renderWith(function(e,t,n,r){return e}),i.newColumn("currency").withTitle("Actions").notSortable().renderWith(function(e,t,n,r){return'<button type="button" class="btn btn-default btn-xs"   ng-controller="CurrenciesMainCtrl" ng-click="openCancelExchangeOfferModal(\''+e+'\',\'SELL\')"> <i class="fa fa-times" aria-hidden="true" style="width:15px;"></i> </button>'})],e.dtMyBuyOffersInstanceCallback=function(t){e.dtInstanceBuyOffer=t},e.reloadMyBuyOffers=function(){e.dtInstanceBuyOffer&&e.dtInstanceBuyOffer._renderer.rerender()},e.dtMySellOffersInstanceCallback=function(t){e.dtInstanceSellOffer=t},e.reloadMySellOffers=function(){e.dtInstanceSellOffer&&e.dtInstanceSellOffer._renderer.rerender()}}]),angular.module("currencies").controller("SearchCurrencyFormCtrl",["$scope","CurrenciesService","SessionStorageService","$state","DTOptionsBuilder","DTColumnBuilder","searchTermFilter","$compile","multiStepFormScope","$validation","supplyFilter","currencyModelFilter","$q",function(e,t,n,r,o,i,a,s,l,c,u,d,p){e.searchCurrencyForm={},e.onSubmit=function(){c.validate(e.searchCurrencyForm),e.searchCurrencyForm.$valid&&e.$nextStep()},e.searchCurrencyForm=angular.copy(l.searchCurrencyForm),e.$on("$destroy",function(){l.searchCurrencyForm=angular.copy(e.searchCurrencyForm)}),e.dtOptions=o.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("serverSide",!1).withDataProp("currencies").withOption("processing",!0).withOption("info",!1).withOption("paging",!0).withOption("ordering",!1).withOption("processing",!0).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){s(t)(e)}).withOption("ajax",function(n,r,o){var i=e.searchCurrencyForm.query,a=t.searchCurrencies(i),s=t.getCurrencyById(i);p.all([a,s]).then(function(e){e[1].currency&&(e[0].currencies=e[0].currencies||[],e[0].currencies.push(e[1])),r({iTotalRecords:e[0].currencies.length,iTotalDisplayRecords:e[0].currencies.length,currencies:e[0].currencies})})}).withDisplayLength(10).withBootstrap(),e.dtColumns=[i.newColumn("code").withTitle("Ticker").notSortable().renderWith(function(e,t,n,r){return e}),i.newColumn("accountRS").withTitle("Issuer").notSortable().renderWith(function(e,t,n,r){return a(e)}),i.newColumn("currency").withTitle("Action").notSortable().renderWith(function(e,t,n,r){return'<button type="button" class="btn btn-default btn-sm" ng-controller="CurrenciesMainCtrl" ng-click="openCurrencyDetailsModal(\''+n.code+'\')"> <i class="fa fa-info-circle" aria-hidden="true"></i> </button>&nbsp;<button type="button" class="btn btn-default btn-sm" ng-controller="CurrenciesMainCtrl" ng-click="openTradeDesk(\''+e+"','"+n.decimals+'\')"> <i class="fa fa-bar-chart" aria-hidden="true"></i> </button>'})],e.dtInstanceCallback=function(t){e.dtInstance=t}}]),angular.module("currencies").controller("IssueCurrencyFormController",["$scope","CurrenciesService","SessionStorageService","$state","CryptoService","loginConfig","AlertService","alertConfig","$validation","$uibModal","multiStepFormScope","FeeService","$rootScope","CommonsService",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m){function f(e){var t=0;if(e)for(var n in e)e.hasOwnProperty(n)&&e[n]&&(t+=parseInt(n));return t}e.issueCurrencyForm=angular.copy(u.issueCurrencyForm),e.issueCurrencyForm2=angular.copy(u.issueCurrencyForm2),e.currencyTypes=[1,2,4,8,32],e.$watchCollection("issueCurrencyForm2.initialSupply",function(){e.issueCurrencyForm2&&(e.issueCurrencyForm2.maxSupply=e.issueCurrencyForm2.initialSupply)}),e.$watchCollection("issueCurrencyForm2.types",function(t){t&&(t[1],t[2],t[4]?(e.reservable=!0,t[8]=!0):(t[8]=!1,e.reservable=!1),t[8]&&(e.reservable=!0,t[4]||(t[4]=!0),e.issueCurrencyForm2.initialSupply=0))}),e.getBlockChainStatus=function(){console.log("executing block chain status"),t.getBlockChainStatus().then(function(t){e.currentHeight=t.numberOfBlocks})},e.validateAndMoveNextStep=function(){var t=e.issueCurrencyForm2;t.types;if(!(f(t.types)>0))return void a.addAlert({type:"danger",msg:"Form error. Atleast one currency type must be selected"},s.issueCurrencyModalAlert);e.$nextStep()},e.$on("$destroy",function(){u.issueCurrencyForm=angular.copy(e.issueCurrencyForm),u.issueCurrencyForm2=angular.copy(e.issueCurrencyForm2)}),e.hasPrivateKeyInSession=function(){return!!n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY)},e.issueCurrency=function(){var r=u.issueCurrencyForm,l=u.issueCurrencyForm2,c=r.name,d=r.code.toUpperCase(),p=r.description,g=parseInt(l.decimals),h=parseInt(l.initialSupply)*Math.pow(10,g),S=parseInt(l.maxSupply)*Math.pow(10,g),C=f(l.types),T=0,b="",y="";4&C&&(T=parseInt(l.activHeight),b=1e8*parseInt(l.minAmount),y=parseInt(l.reserveSupply)*Math.pow(10,g));var O=1;O||(O=1);var v,A=m.getAccountDetailsFromSession("publicKey"),w=r.secretPhrase;v=w?o.secretPhraseToPrivateKey(w):n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY),e.issueCUrrencyPromise=t.issueCurrency(A,c,d,p,C,h,S,g,O,b,T,y).then(function(t){if(t.errorCode)a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},s.issueCurrencyModalAlert);else{var n=t.unsignedTransactionBytes,r=o.signatureHex(n,v);e.transactionBytes=o.signTransactionHex(n,r),e.validBytes=!0,e.tx_fee=t.transactionJSON.feeTQT/1e8,e.tx_amount=t.transactionJSON.amountTQT/1e8,e.tx_total=e.tx_fee+e.tx_amount}},function(e){a.addAlert(a.getNoConnectionMessage(e),s.issueCurrencyModalAlert)})},e.broadcastTransaction=function(t){e.issueCUrrencyPromise=m.broadcastTransaction(t).then(function(t){e.$emit("close-modal"),p.$broadcast("reload-dashboard"),t.errorCode?a.addAlert({type:"danger",msg:"Unable to broadcast transaction. Reason: "+t.errorDescription}):a.addAlert({type:"success",msg:"Transaction succesfull broadcasted with Id : "+t.transaction})},function(e){a.addAlert(a.getNoConnectionMessage(e),s.issueCurrencyModalAlert)})}}]),angular.module("currencies").controller("DeleteCurrencyFormController",["$scope","CurrenciesService","SessionStorageService","$state","CryptoService","loginConfig","AlertService","alertConfig","$validation","$uibModal","multiStepFormScope","FeeService","$rootScope","CommonsService","multiStepFormInstance",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f){e.deleteCurrencyForm=angular.copy(u.deleteCurrencyForm),e.initStep1=function(){var t=e.$getActiveStep().data;t&&(e.deleteCurrencyForm.currencyId=t.currencyId,e.deleteCurrencyForm.decimals=t.decimals,e.deleteCurrencyForm.ticker=t.ticker)},e.$on("$destroy",function(){u.deleteCurrencyForm=angular.copy(e.deleteCurrencyForm)}),e.hasPrivateKeyInSession=function(){return!!n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY)},e.deleteCurrency=function(){var r,l=u.deleteCurrencyForm,c=l.currencyId,d=l.fee,p=m.getAccountDetailsFromSession("publicKey"),f=m.getAccountDetailsFromSession("accountRs"),g=l.secretPhrase;r=g?o.secretPhraseToPrivateKey(g):n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY),d||(d=1),e.deleteCurrencyPromise=t.canDeleteCurrency(c,f).then(function(n){n.errorCode||(n.canDelete?e.deleteCurrencyPromise=t.deleteCurrency(c,d,p).then(function(t){if(t.errorCode)a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},s.deleteCurrencyModalAlert);else{var n=t.unsignedTransactionBytes,i=o.signatureHex(n,r);e.transactionBytes=o.signTransactionHex(n,i),e.validBytes=!0,e.tx_fee=t.transactionJSON.feeTQT/1e8,e.tx_amount=t.transactionJSON.amountTQT/1e8,e.tx_total=e.tx_fee+e.tx_amount}},function(e){
a.addAlert(a.getNoConnectionMessage(e),s.deleteCurrencyModalAlert)}):a.addAlert({type:"danger",msg:"Sorry, You can not delete currency "+c},s.deleteCurrencyModalAlert))},function(e){a.addAlert(a.getNoConnectionMessage(e),s.deleteCurrencyModalAlert)})},e.broadcastTransaction=function(t){e.deleteCurrencyPromise=m.broadcastTransaction(t).then(function(t){e.$emit("close-modal"),p.$broadcast("reload-dashboard"),t.errorCode?a.addAlert({type:"danger",msg:"Unable to broadcast transaction. Reason: "+t.errorDescription}):a.addAlert({type:"success",msg:"Transaction succesfull broadcasted with Id : "+t.transaction})},function(e){a.addAlert(a.getNoConnectionMessage(e),s.deleteCurrencyModalAlert)})}}]),angular.module("currencies").controller("TransferCurrencyFormController",["$scope","CurrenciesService","SessionStorageService","$state","CryptoService","loginConfig","AlertService","alertConfig","$validation","$uibModal","multiStepFormScope","FeeService","$rootScope","CommonsService",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m){e.transferCurrencyForm=angular.copy(u.transferCurrencyForm),e.initStep1=function(){var t=e.$getActiveStep().data;t&&(e.transferCurrencyForm.currencyId=t.currencyId,e.transferCurrencyForm.decimals=t.decimals,e.transferCurrencyForm.ticker=t.ticker)},e.nextStep=function(){var n=e.transferCurrencyForm;n.currencyId&&void 0!==n.decimals&&n.ticker?e.$nextStep():t.getCurrencyById(n.currencyId).then(function(t){t.currency?(e.transferCurrencyForm.currencyId=t.currency,e.transferCurrencyForm.decimals=t.decimals,e.transferCurrencyForm.ticker=t.code,e.$nextStep()):a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},s.transferCurrencyModalAlert)},function(e){a.addAlert(a.getNoConnectionMessage(e),s.transferCurrencyModalAlert)})},e.$on("$destroy",function(){u.transferCurrencyForm=angular.copy(e.transferCurrencyForm)}),e.openAddressBookModal=function(){c.open({animation:!1,templateUrl:"addressbook/views/addressbook-light.html",controller:"AddressBookCtrl",resolve:{params:function(){return{closeOnClick:!0}}}}).result.then(function(t){e.transferCurrencyForm.recipient=t.accountRS})},e.hasPrivateKeyInSession=function(){return!!n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY)},e.transferCurrency=function(){var r,l=u.transferCurrencyForm,c=l.currencyId,d=parseInt(l.units*Math.pow(10,l.decimals)),p=1,f=l.recipient,g=m.getAccountDetailsFromSession("publicKey"),h=l.secretPhrase;r=h?o.secretPhraseToPrivateKey(h):n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY),p||(p=1),e.transferCurrencyPromise=t.transferCurrency(g,f,c,d,p).then(function(t){if(t.errorCode)a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},s.transferCurrencyModalAlert);else{var n=t.unsignedTransactionBytes,i=o.signatureHex(n,r);e.transactionBytes=o.signTransactionHex(n,i),e.validBytes=!0,e.tx_fee=t.transactionJSON.feeTQT/1e8,e.tx_amount=t.transactionJSON.amountTQT/1e8,e.tx_total=e.tx_fee+e.tx_amount}},function(e){a.addAlert(a.getNoConnectionMessage(e),s.transferCurrencyModalAlert)})},e.broadcastTransaction=function(t){e.transferCurrencyPromise=m.broadcastTransaction(t).then(function(t){e.$emit("close-modal"),p.$broadcast("reload-dashboard"),t.errorCode?a.addAlert({type:"danger",msg:"Unable to broadcast transaction. Reason: "+t.errorDescription}):a.addAlert({type:"success",msg:"Transaction succesfull broadcasted with Id : "+t.transaction})},function(e){a.addAlert(a.getNoConnectionMessage(e),s.transferCurrencyModalAlert)})}}]),angular.module("currencies").controller("PublishExchangeOrderFormController",["$scope","CurrenciesService","SessionStorageService","$state","CryptoService","loginConfig","AlertService","alertConfig","$validation","$uibModal","multiStepFormScope","FeeService","$rootScope","CommonsService","shareToQuantiyFilter","amountToQuantFilter","controlConfig",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g,h){e.publishExchangeOfferForm=angular.copy(u.publishExchangeOfferForm),e.initStep1=function(){var n=e.$getActiveStep().data;n&&(e.publishExchangeOfferForm.currencyId=n.currencyId,e.publishExchangeOfferForm.decimals=n.decimals,e.publishExchangeOfferForm.ticker=n.ticker,t.getCurrencyById(n.currencyId).then(function(t){e.publishExchangeOfferForm.name=t.name}))},e.$on("$destroy",function(){u.publishExchangeOfferForm=angular.copy(e.publishExchangeOfferForm)}),e.hasPrivateKeyInSession=function(){return!!n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY)},e.checkControlEnabled=function(){var t={};t.hasControl=n.getFromSession(h.SESSION_ACCOUNT_CONTROL_HASCONTROL_KEY),t.controlDetails=n.getFromSession(h.SESSION_ACCOUNT_CONTROL_JSONCONTROL_KEY),t.phasingFinishHeight=p.options.TX_HEIGHT,e.accountControl=t},e.getBlockChainStatus=function(){t.getBlockChainStatus().then(function(t){e.publishExchangeOfferForm.currentHeight=t.numberOfBlocks})},e.expirationHeight=1440,e.days=1,e.increment=function(){if(e.expirationHeight>=14400)return void(e.expirationHeight=14400);e.expirationHeight=e.expirationHeight+1440,e.publishExchangeOfferForm.expirationHeight=e.expirationHeight,e.days=parseInt(e.expirationHeight/1440)},e.decrement=function(){if(e.expirationHeight<=1440)return void(e.expirationHeight=1440);e.expirationHeight=e.expirationHeight-1440,e.publishExchangeOfferForm.expirationHeight=e.expirationHeight,e.days=parseInt(e.expirationHeight/1440)},e.max=function(){e.expirationHeight=14400,e.publishExchangeOfferForm.expirationHeight=14400,e.days=parseInt(e.expirationHeight/1440)},e.min=function(){e.expirationHeight=1440,e.publishExchangeOfferForm.expirationHeight=1440,e.days=parseInt(e.expirationHeight/1440)},e.publishExchangeOffer=function(){var r=u.publishExchangeOfferForm,l=r.currencyId,c={};"BUY"===r.typeOnly&&(r.sellRate=r.buyRate,r.sellLimit=0,r.initialSellSupply=0,r.buyLimit=r.initialBuySupply),"SELL"===r.typeOnly&&(r.buyRate=r.sellRate,r.buyLimit=0,r.initialBuySupply=0,r.sellLimit=r.initialSellSupply),c.buyRate=parseInt(g(r.buyRate)/Math.pow(10,r.decimals)),c.sellRate=parseInt(g(r.sellRate)/Math.pow(10,r.decimals)),c.totalBuy=parseInt(r.buyLimit*Math.pow(10,r.decimals)),c.totalSell=parseInt(r.sellLimit*Math.pow(10,r.decimals));var d={};d.initialBuy=parseInt(r.initialBuySupply*Math.pow(10,r.decimals)),d.initialSell=parseInt(r.initialSellSupply*Math.pow(10,r.decimals));var p=parseInt(r.expirationHeight)+parseInt(r.currentHeight);e.publishExchangeOfferForm.expirationHeight=p;var f,h=1,S=m.getAccountDetailsFromSession("publicKey"),C=r.secretPhrase;f=C?o.secretPhraseToPrivateKey(C):n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY),h||(h=1),e.publishExchangeOfferPromise=t.publishExchangeOffer(S,l,c,d,p,h).then(function(t){if(t.errorCode)a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},s.publishExchangeOfferModalAlert);else{var n=t.unsignedTransactionBytes,r=o.signatureHex(n,f);e.transactionBytes=o.signTransactionHex(n,r),e.validBytes=!0,e.tx_fee=t.transactionJSON.feeTQT/1e8,e.tx_amount=t.transactionJSON.amountTQT/1e8,e.tx_total=e.tx_fee+e.tx_amount}},function(e){a.addAlert(a.getNoConnectionMessage(e),s.publishExchangeOfferModalAlert)})},e.broadcastTransaction=function(t){e.publishExchangeOfferPromise=m.broadcastTransaction(t).then(function(t){e.$emit("close-modal"),p.$broadcast("reload-dashboard"),p.$broadcast("order-placed"),t.errorCode?a.addAlert({type:"danger",msg:"Unable to broadcast transaction. Reason: "+t.errorDescription}):a.addAlert({type:"success",msg:"Transaction succesfull broadcasted with Id : "+t.transaction})},function(e){a.addAlert(a.getNoConnectionMessage(e),s.publishExchangeOfferModalAlert)})}}]),angular.module("currencies").controller("CurrencyReserveClaimFormController",["$scope","CurrenciesService","SessionStorageService","$state","CryptoService","loginConfig","AlertService","alertConfig","$validation","$uibModal","multiStepFormScope","FeeService","$rootScope","CommonsService","multiStepFormInstance","shareToQuantiyFilter",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g){e.currencyReserveClaimForm=angular.copy(u.currencyReserveClaimForm),e.initStep1=function(){var t=e.$getActiveStep().data;t&&(e.currencyReserveClaimForm.currencyId=t.currencyId,e.currencyReserveClaimForm.decimals=t.decimals,e.currencyReserveClaimForm.ticker=t.ticker)},e.$on("$destroy",function(){u.currencyReserveClaimForm=angular.copy(e.currencyReserveClaimForm)}),e.hasPrivateKeyInSession=function(){return!!n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY)},e.currencyReserveClaim=function(){var r,l=u.currencyReserveClaimForm,c=l.currencyId,d=1,p=m.getAccountDetailsFromSession("publicKey"),f=parseInt(g(l.units,l.decimals)),h=l.secretPhrase;r=h?o.secretPhraseToPrivateKey(h):n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY),d||(d=1),e.currencyReserveClaimPromse=t.currencyReserveClaim(p,c,f,d).then(function(t){if(t.errorCode)a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},s.currencyReserveClaimModalAlert);else{var n=t.unsignedTransactionBytes,i=o.signatureHex(n,r);e.transactionBytes=o.signTransactionHex(n,i),e.validBytes=!0,e.tx_fee=t.transactionJSON.feeTQT/1e8,e.tx_amount=t.transactionJSON.amountTQT/1e8,e.tx_total=e.tx_fee+e.tx_amount}},function(e){a.addAlert(a.getNoConnectionMessage(e),s.currencyReserveClaimModalAlert)})},e.broadcastTransaction=function(t){e.currencyReserveClaimPromse=m.broadcastTransaction(t).then(function(t){e.$emit("close-modal"),p.$broadcast("reload-dashboard"),t.errorCode?a.addAlert({type:"danger",msg:"Unable to broadcast transaction. Reason: "+t.errorDescription}):a.addAlert({type:"success",msg:"Transaction succesfull broadcasted with Id : "+t.transaction})},function(e){a.addAlert(a.getNoConnectionMessage(e),s.currencyReserveClaimModalAlert)})}}]),angular.module("currencies").controller("CurrencyReserveIncreaseFormController",["$scope","CurrenciesService","SessionStorageService","$state","CryptoService","loginConfig","AlertService","alertConfig","$validation","$uibModal","multiStepFormScope","FeeService","$rootScope","CommonsService","multiStepFormInstance","shareToQuantiyFilter",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g){e.currencyReserveIncreaseForm=angular.copy(u.currencyReserveIncreaseForm),e.initStep1=function(){var t=e.$getActiveStep().data;t&&(e.currencyReserveIncreaseForm.currencyId=t.currencyId,e.currencyReserveIncreaseForm.decimals=t.decimals,e.currencyReserveIncreaseForm.ticker=t.ticker)},e.$on("$destroy",function(){u.currencyReserveIncreaseForm=angular.copy(e.currencyReserveIncreaseForm)}),e.hasPrivateKeyInSession=function(){return!!n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY)},e.currencyReserveIncrease=function(){var r,l=u.currencyReserveIncreaseForm,c=l.currencyId,d=1,p=m.getAccountDetailsFromSession("publicKey"),f=l.amountPerUnit,g=l.secretPhrase;r=g?o.secretPhraseToPrivateKey(g):n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY),d||(d=1),e.currencyReserveIncreasePromise=t.currencyReserveIncrease(p,c,f,d).then(function(t){if(t.errorCode)a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},s.currencyReserveIncreaseModalAlert);else{var n=t.unsignedTransactionBytes,i=o.signatureHex(n,r);e.transactionBytes=o.signTransactionHex(n,i),e.validBytes=!0,e.tx_fee=t.transactionJSON.feeTQT/1e8,e.tx_amount=t.transactionJSON.amountTQT/1e8,e.tx_total=e.tx_fee+e.tx_amount}},function(e){a.addAlert(a.getNoConnectionMessage(e),s.currencyReserveIncreaseModalAlert)})},e.broadcastTransaction=function(t){e.currencyReserveIncreasePromise=m.broadcastTransaction(t).then(function(t){e.$emit("close-modal"),p.$broadcast("reload-dashboard"),t.errorCode?a.addAlert({type:"danger",msg:"Unable to broadcast transaction. Reason: "+t.errorDescription}):a.addAlert({type:"success",msg:"Transaction succesfull broadcasted with Id : "+t.transaction})},function(e){a.addAlert(a.getNoConnectionMessage(e),s.currencyReserveIncreaseModalAlert)})}}]),angular.module("currencies").controller("BuyCurrencyFormController",["$scope","CurrenciesService","SessionStorageService","$state","CryptoService","loginConfig","AlertService","alertConfig","$validation","$uibModal","multiStepFormScope","FeeService","$rootScope","CommonsService","multiStepFormInstance","shareToQuantiyFilter","amountToQuantFilter",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g,h){e.buyCurrencyForm=angular.copy(u.buyCurrencyForm),e.initStep1=function(){var t=e.$getActiveStep().data;t&&(e.buyCurrencyForm.currencyId=t.currencyId,e.buyCurrencyForm.decimals=t.decimals)},e.$on("$destroy",function(){u.buyCurrencyForm=angular.copy(e.buyCurrencyForm)}),e.hasPrivateKeyInSession=function(){return!!n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY)},e.buyCurrency=function(){var r=e.$getActiveStep().data;e.buyCurrencyForm=e.buyCurrencyForm||{},r&&(e.buyCurrencyForm.currency=r.currency,e.buyCurrencyForm.currencyId=r.currencyId,e.buyCurrencyForm.currency=r.currency,e.buyCurrencyForm.shares=r.shares,e.buyCurrencyForm.rate=r.rate,e.buyCurrencyForm.decimals=r.decimals,e.buyCurrencyForm.fee=1);var l,c=u.buyCurrencyForm||e.buyCurrencyForm,d=c.currencyId,p=m.getAccountDetailsFromSession("publicKey"),f=parseInt(g(c.shares,c.decimals)),S=parseInt(h(c.rate)/Math.pow(10,c.decimals)),C=c.secretPhrase;l=C?o.secretPhraseToPrivateKey(C):n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY),e.buyCurrencyPromise=t.buyCurrency(p,d,S,f,1).then(function(t){if(t.errorCode)a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},s.buyCurrencyModalAlert);else{var n=t.unsignedTransactionBytes,r=o.signatureHex(n,l);e.transactionBytes=o.signTransactionHex(n,r),e.validBytes=!0,e.tx_fee=t.transactionJSON.feeTQT/1e8,e.tx_amount=t.transactionJSON.amountTQT/1e8,e.tx_total=e.tx_fee+e.tx_amount}},function(e){a.addAlert(a.getNoConnectionMessage(e),s.buyCurrencyModalAlert)})},e.broadcastTransaction=function(t){e.buyCurrencyPromise=m.broadcastTransaction(t).then(function(t){e.$emit("close-modal"),p.$broadcast("reload-dashboard"),t.errorCode?a.addAlert({type:"danger",msg:"Unable to broadcast transaction. Reason: "+t.errorDescription}):a.addAlert({type:"success",msg:"Transaction succesfull broadcasted with Id : "+t.transaction})},function(e){a.addAlert(a.getNoConnectionMessage(e),s.buyCurrencyModalAlert)})}}]),angular.module("currencies").controller("SellCurrencyFormController",["$scope","CurrenciesService","SessionStorageService","$state","CryptoService","loginConfig","AlertService","alertConfig","$validation","$uibModal","multiStepFormScope","FeeService","$rootScope","CommonsService","multiStepFormInstance","shareToQuantiyFilter","amountToQuantFilter",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g,h){e.sellCurrencyForm=angular.copy(u.sellCurrencyForm),e.initStep1=function(){var t=e.$getActiveStep().data;t&&(e.sellCurrencyForm.currency=t.currency,e.sellCurrencyForm.currencyId=t.currencyId,e.sellCurrencyForm.decimals=t.decimals)},e.$on("$destroy",function(){u.sellCurrencyForm=angular.copy(e.sellCurrencyForm)}),e.hasPrivateKeyInSession=function(){return!!n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY)},e.sellCurrency=function(){var r=e.$getActiveStep().data;e.sellCurrencyForm=e.sellCurrencyForm||{},r&&(e.sellCurrencyForm.currency=r.currency,e.sellCurrencyForm.currencyId=r.currencyId,e.sellCurrencyForm.currency=r.currency,e.sellCurrencyForm.shares=r.shares,e.sellCurrencyForm.rate=r.rate,e.sellCurrencyForm.decimals=r.decimals,e.sellCurrencyForm.fee=1);var l,c=e.sellCurrencyForm,u=c.currencyId,d=m.getAccountDetailsFromSession("publicKey"),p=parseInt(g(c.shares,c.decimals)),f=parseInt(h(c.rate)/Math.pow(10,c.decimals)),S=c.secretPhrase;l=S?o.secretPhraseToPrivateKey(S):n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY),e.sellCurrencyPromise=t.sellCurrency(d,u,f,p,1).then(function(t){if(t.errorCode)a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},s.sellCurrencyModalAlert);else{var n=t.unsignedTransactionBytes,r=o.signatureHex(n,l);e.transactionBytes=o.signTransactionHex(n,r),e.validBytes=!0,e.tx_fee=t.transactionJSON.feeTQT/1e8,e.tx_amount=t.transactionJSON.amountTQT/1e8,e.tx_total=e.tx_fee+e.tx_amount}},function(e){a.addAlert(a.getNoConnectionMessage(e),s.sellCurrencyModalAlert)})},e.broadcastTransaction=function(t){e.sellCurrencyPromise=m.broadcastTransaction(t).then(function(t){e.$emit("close-modal"),p.$broadcast("reload-dashboard"),t.errorCode?a.addAlert({type:"danger",msg:"Unable to broadcast transaction. Reason: "+t.errorDescription}):a.addAlert({type:"success",msg:"Transaction succesfull broadcasted with Id : "+t.transaction})},function(e){a.addAlert(a.getNoConnectionMessage(e),s.sellCurrencyModalAlert)})}}]),angular.module("currencies").controller("CurrencyTradeDeskInputController",["$scope","CurrenciesService","SessionStorageService","$state","CryptoService","loginConfig","AlertService","alertConfig","$validation","$uibModal","FeeService","$rootScope","CommonsService","DTOptionsBuilder","DTColumnBuilder","amountTQTFilter","searchTermFilter","$compile","quantityToShareFilter","shareToQuantiyFilter","$stateParams","timestampFilter","numericalStringFilter","quantToAmountFilter","buysellFilter","numberStringFilter","amountToDecimalFilter","$q",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g,h,S,C,T,b,y,O,v,A,w,E,N){function F(t,n,r){return $("td",t).unbind("click"),$("td",t).bind("click",function(){e.$apply(function(){d.$broadcast(r,n)})}),t}function I(t){for(var n=t.length,r=[],o=[],i=0;i<n;i++){var a={},s={};a.key=n-i,a.value=v(T(t[i].rateTQT,e.decimals)),s.key=n-i,s.value=C(t[i].units,e.decimals),r.push(a),o.push(s)}return[{key:"Quantity",bar:!0,values:o},{key:"Price",values:r}].map(function(e){return e.values=e.values.map(function(e){return{x:e.key,y:e.value}}),e})}e.hasBuyOffers=function(){return e.bidLength>0},e.hasSellOffers=function(){return e.askLength>0},e.getCurrency=function(){var n=b.currencyId;e.currencyId=n,t.getCurrencyById(n).then(function(r){e.currencyDetails=r,e.decimals=r.decimals;var o=p.getAccountDetailsFromSession("accountRs");t.getSingleAccountCurrency(o,n).then(function(t){e.accountDetails=t,e.units=t.units,e.unconfirmedUnits=t.unconfirmedUnits},function(e){console.log(e)})},function(e){console.log(e)})},e.$watchCollection("buyOrderForm",function(t){e.buyOrderForm.totalPrice=O(parseFloat(t.quantity*t.price)),t.price&&t.quantity&&e.askLength&&(e.enableBuy=!0)}),e.$watchCollection("askOrderForm",function(t){e.askOrderForm.totalPrice=O(parseFloat(t.quantity*t.price)),t.price&&t.quantity&&e.bidLength&&(e.enableSell=!0)}),e.$on("buy-form",function(t,n){e.buyOrderForm.price=n.rateTQT*Math.pow(10,e.decimals)/1e8,e.buyOrderForm.quantity=C(n.supply,e.decimals)}),e.$on("ask-form",function(t,n){e.askOrderForm.price=n.rateTQT*Math.pow(10,e.decimals)/1e8,e.askOrderForm.quantity=C(n.supply,e.decimals)}),e.placeOrderClick=function(t,n){var r;r="ask"===n?"currencies/modals/sell-currency-form.html":"currencies/modals/buy-currency-form.html";c.open({animation:!0,templateUrl:r,size:"lg",controller:"CurrenciesFormCtrl",resolve:{params:function(){return{currencyId:e.currencyId,rate:t.price,shares:t.quantity,requestType:n,decimals:e.decimals,currency:e.currencyDetails.name}}}})},e.hasPrivateKeyInSession=function(){return!!n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY)},e.dtAskOrdersOptions=m.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("info",!1).withOption("ordering",!1).withOption("serverSide",!1).withDataProp("offers").withOption("processing",!0).withOption("ordering",!1).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){S(t)(e),F(t,n,"buy-form")}).withOption("ajax",function(n,r,o){var i=(n.start,n.length,[]),a=t.getSellOffers(null,e.currencyId),s=t.getCurrencyById(e.currencyId);i.push(a),e.decimals||i.push(s),N.all(i).then(function(t){var n=t[0],o=t[1];o&&(e.decimals=o.decimals),e.askLength=n.offers.length,r({iTotalRecords:100,iTotalDisplayRecords:100,offers:n.offers})})}).withDisplayLength(5).withBootstrap(),e.fireFormFillEvent=function(e){d.$broadcast(e)},e.dtAskOrdersColumns=[f.newColumn("rateTQT").withTitle("Price per share").notSortable().renderWith(function(t,n,r,o){return O(Math.pow(10,e.decimals)*v(t))}),f.newColumn("supply").withTitle("Quantity").notSortable().renderWith(function(t,n,r,o){return O(C(t,e.decimals))}),f.newColumn("rateTQT").withTitle("Sum").notSortable().renderWith(function(t,n,r,o){var i=r.rateTQT*r.supply/1e8;return O(i,e.decimals)}),f.newColumn("rateTQT").withTitle("Actions").notSortable().renderWith(function(e,t,n,r){return'<button type="button" class="btn btn-default btn-sm"> <i class="fa fa-check-circle" aria-hidden="true"></i> </button>'})],e.dtAskOrdersInstanceCallback=function(t){e.dtAskOrderInstance=t},e.reloadAskOrders=function(){e.dtAskOrderInstance&&e.dtAskOrderInstance._renderer.rerender()},e.dtBidOrdersOptions=m.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("info",!1).withOption("ordering",!1).withOption("serverSide",!1).withDataProp("offers").withOption("processing",!0).withOption("ordering",!1).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){S(t)(e),F(t,n,"ask-form")}).withOption("ajax",function(n,r,o){var i=(n.start,n.length,[]),a=t.getBuyOffers(null,e.currencyId),s=t.getCurrencyById(e.currencyId);i.push(a),e.decimals||i.push(s),N.all(i).then(function(t){var n=t[0],o=t[1];o&&(e.decimals=o.decimals),e.bidLength=n.offers.length,r({iTotalRecords:100,iTotalDisplayRecords:100,offers:n.offers})})}).withDisplayLength(5).withBootstrap(),e.dtBidOrdersColumns=[f.newColumn("rateTQT").withTitle("Price per share").notSortable().renderWith(function(t,n,r,o){return O(Math.pow(10,e.decimals)*v(t))}),f.newColumn("supply").withTitle("Quantity").notSortable().renderWith(function(t,n,r,o){return O(C(t,e.decimals))}),f.newColumn("rateTQT").withTitle("Sum").notSortable().renderWith(function(t,n,r,o){var i=r.rateTQT*r.supply/1e8;return O(i,e.decimals)}),f.newColumn("rateTQT").withTitle("Actions").notSortable().renderWith(function(e,t,n,r){return'<button type="button" class="btn btn-default btn-sm"> <i class="fa fa-check-circle" aria-hidden="true"></i> </button>'})],e.dtBidOrdersInstanceCallback=function(t){e.dtBidOrderInstance=t},e.reloadBidOrders=function(){e.dtBidOrderInstance&&e.dtBidOrderInstance._renderer.rerender()},e.dtTradeOptions=m.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("info",!1).withOption("ordering",!1).withOption("serverSide",!1).withDataProp("exchanges").withOption("paging",!0).withOption("processing",!1).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){S(t)(e)}).withOption("ajax",function(n,r,o){var i=n.start+n.length-1;t.getDeskExchanges(e.currencyId,n.start,i).then(function(t){e.tradeData=I(t.exchanges),e.labels=Array.apply(null,{length:t.exchanges.length}).map(Number.call,Number),e.lastTrade=t.exchanges[0],r({iTotalRecords:1e3,iTotalDisplayRecords:1e3,exchanges:t.exchanges})})}).withDisplayLength(10).withBootstrap(),e.dtTradeColumns=[f.newColumn("transaction").withTitle("Details").notSortable().renderWith(function(e,t,n,r){return'<button type="button" class="btn btn-success btn-xs" ng-controller="SearchCtrl" ng-click="searchValue(\''+e+'\')"><i class="fa fa-list-ul" aria-hidden="true"></i></button>'}),f.newColumn("timestamp").withTitle("Date").notSortable().renderWith(function(e,t,n,r){return y(e)}),f.newColumn("units").withTitle("Quantity").notSortable().renderWith(function(t,n,r,o){return(parseInt(t)/Math.pow(10,e.decimals)).toLocaleString("en-US",{minimumFractionDigits:e.decimals})}),f.newColumn("rateTQT").withTitle("Price").notSortable().renderWith(function(t,n,r,o){return(parseInt(t)*Math.pow(10,e.decimals)/1e8).toLocaleString("en-US",{minimumFractionDigits:e.decimals})}),f.newColumn("rateTQT").withTitle("Sum").notSortable().renderWith(function(t,n,r,o){return(parseInt(r.units)/Math.pow(10,e.decimals)*(parseInt(t)*Math.pow(10,e.decimals))/1e8).toLocaleString("en-US",{minimumFractionDigits:e.decimals})}),f.newColumn("buyerRS").withTitle("Buyer").notSortable().renderWith(function(e,t,n,r){return h(e)}),f.newColumn("sellerRS").withTitle("Seller").notSortable().renderWith(function(e,t,n,r){return h(e)})],e.$on("order-placed",function(){e.dtAskOrderInstance._renderer.rerender(),e.dtBidOrderInstance._renderer.rerender()}),e.dtLastTradesInstanceCallback=function(t){e.dtLastTradesrInstance=t},e.reloadLastTrades=function(){e.dtLastTradesrInstance&&e.dtLastTradesrInstance._renderer.rerender()},e.chartOptions={chart:{type:"linePlusBarChart",height:230,margin:{top:30,right:75,bottom:50,left:75},bars:{forceY:[0]},bars2:{forceY:[0]},focusEnable:!1,isArea:"true",color:["#bdbdbd","#00C851"],xAxis:{axisLabel:"",showMaxMin:!0,show:!1,tickFormat:function(e){return null}},y1Axis:{axisLabelDistance:3,tickFormat:function(e){return e.toLocaleString("en-US",{minimumFractionDigits:4})}},y2Axis:{axisLabelDistance:3,tickFormat:function(e){return e.toLocaleString("en-US",{minimumFractionDigits:2})}}}}}]),angular.module("currencies").controller("CancelExchangeOfferFormController",["$scope","CurrenciesService","SessionStorageService","$state","CryptoService","loginConfig","AlertService","alertConfig","$validation","$uibModal","multiStepFormScope","FeeService","$rootScope","CommonsService","shareToQuantiyFilter","amountToQuantFilter",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g){e.cancelExchangeOfferForm=angular.copy(u.cancelExchangeOfferForm)||{},e.cancelExchangeOfferForm.buyRate=1e-8,e.cancelExchangeOfferForm.buyLimit=1,e.cancelExchangeOfferForm.initialBuySupply=1,e.cancelExchangeOfferForm.sellLimit=1,e.cancelExchangeOfferForm.initialSellSupply=1,e.initStep1=function(){var n=e.$getActiveStep().data;n&&(e.cancelExchangeOfferForm.currencyId=n.currencyId,e.cancelExchangeOfferForm.typeOnly=n.typeOnly,t.getCurrencyById(n.currencyId).then(function(t){e.cancelExchangeOfferForm.code=t.code,e.cancelExchangeOfferForm.name=t.name,e.cancelExchangeOfferForm.decimals=t.decimals}))},e.$on("$destroy",function(){u.cancelExchangeOfferForm=angular.copy(e.cancelExchangeOfferForm)}),e.hasPrivateKeyInSession=function(){return!!n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY)},e.getBlockChainStatus=function(){t.getBlockChainStatus().then(function(t){e.cancelExchangeOfferForm.currentHeight=t.numberOfBlocks})},e.cancelExchangeOffer=function(){var r=e.cancelExchangeOfferForm,l=r.currencyId,c={};r.sellRate=r.buyRate,"BUY"===r.typeOnly&&(r.sellLimit=0,r.initialSellSupply=0),"SELL"===r.typeOnly&&(r.buyLimit=0,r.initialBuySupply=0),c.buyRate=1,c.sellRate=1,c.totalBuy=parseFloat(r.buyLimit*Math.pow(10,r.decimals)),c.totalSell=parseFloat(r.sellLimit*Math.pow(10,r.decimals));var u={};u.initialBuy=parseFloat(r.initialBuySupply*Math.pow(10,r.decimals)),u.initialSell=parseFloat(r.initialSellSupply*Math.pow(10,r.decimals));var d,p=1,f=m.getAccountDetailsFromSession("publicKey"),g=r.secretPhrase;d=g?o.secretPhraseToPrivateKey(g):n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY),p||(p=1),e.cancelExchangeOfferPromise=t.getBlockChainStatus().then(function(n){var r=n.numberOfBlocks+2;e.cancelExchangeOfferPromise=t.publishExchangeOffer(f,l,c,u,r,p).then(function(t){if(t.errorCode)a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},s.publishExchangeOfferModalAlert);else{var n=t.unsignedTransactionBytes,r=o.signatureHex(n,d);e.transactionBytes=o.signTransactionHex(n,r),e.broadcastTransaction(e.transactionBytes),e.validBytes=!0,e.tx_fee=t.transactionJSON.feeTQT/1e8,e.tx_amount=t.transactionJSON.amountTQT/1e8,e.tx_total=e.tx_fee+e.tx_amount}},function(e){a.addAlert(a.getNoConnectionMessage(e),s.publishExchangeOfferModalAlert)})})},e.broadcastTransaction=function(t){e.cancelExchangeOfferPromise=m.broadcastTransaction(t).then(function(t){e.$emit("close-modal"),p.$broadcast("reload-dashboard"),p.$broadcast("order-placed"),t.errorCode?a.addAlert({type:"danger",msg:"Unable to broadcast transaction. Reason: "+t.errorDescription}):a.addAlert({type:"success",msg:"Transaction succesfull broadcasted with Id : "+t.transaction})},function(e){a.addAlert(a.getNoConnectionMessage(e),s.publishExchangeOfferModalAlert)})}}]),angular.module("account",["baseClient","crypto","login","node","ui.router","ui.bootstrap","multiStepForm","node","clientAlert","datatables.scroller","ja.qr","options","assets","currencies"]),angular.module("account").constant("accountConfig",{accountEndPoint:"api"}),angular.module("account").config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("client.signedin.account",{url:"^/accounts",templateUrl:"./account/views/main.html",abstract:!0}).state("client.signedin.account.details",{url:"^/accounts/details",templateUrl:"./account/views/details.html",controller:"AccountMainCtrl"}).state("client.signedin.account.transactions",{url:"^/accounts/transactions",templateUrl:"./account/views/transactions.html",controller:"AccountTransactionsCtrl"}).state("client.signedin.account.pending",{url:"^/accounts/pending",templateUrl:"./account/views/unconfirmed.html",controller:"AccountUnconfirmedTransactionsCtrl"}).state("client.signedin.account.lessors",{url:"^/accounts/lessors",templateUrl:"./account/views/lessors.html",controller:"AccountLessorCtrl"}).state("client.signedin.account.control",{url:"^/accounts/control",templateUrl:"./account/views/control.html",controller:"ControlMainCtrl"}).state("client.signedin.account.properties",{url:"^/accounts/properties",templateUrl:"./account/views/properties.html",controller:"AccountPropertiesCtrl"}).state("client.signedin.account.ledger",{url:"^/accounts/ledger",templateUrl:"./account/views/ledgerentries.html",controller:"AccountLedgerCtrl"}).state("client.signedin.account.funding",{url:"^/accounts/funding",templateUrl:"./account/views/funding.html",controller:"FundingMonitorCtrl"})}]),angular.module("account").service("AccountService",["nodeConfig","SessionStorageService","NodeService","baseConfig","accountConfig","Restangular","loginConfig","CryptoService","TransactionService","$rootScope","OptionsService","CommonsService",function(e,t,n,r,o,i,a,s,l,c,u,d){this.getAccountTransaction=function(e,t,r,a,s){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE"),u.getOption("RANDOMIZE_NODES")));var l={requestType:"getBlockchainTransactions",account:e,firstIndex:t,lastIndex:r,type:a,subtype:s};return i.all(o.accountEndPoint).customGET("",l)},this.getAccountUnconfirmedTransactions=function(e){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE"),u.getOption("RANDOMIZE_NODES")));var t={requestType:"getUnconfirmedTransactions",account:e};return i.all(o.accountEndPoint).customGET("",t)},this.getAccountDetails=function(e){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE"),u.getOption("RANDOMIZE_NODES")));var t={requestType:"getAccount",includeAssets:"true",includeCurrencies:"true",includeEffectiveBalance:"true",includeLessors:"true",account:e};return i.all(o.accountEndPoint).customGET("",t)},this.getAccountLessors=function(e){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE"),u.getOption("RANDOMIZE_NODES")));var t={requestType:"getAccount",includeLessors:"true",includeCurrentHeight:"true",includeEffectiveBalance:"true",account:e};return i.all(o.accountEndPoint).customGET("",t)},this.getAccountDetailsFromSession=function(e){var n=t.getFromSession(a.SESSION_ACCOUNT_DETAILS_KEY);return e?n[e]:n},this.createPhasedTransaction=function(e){return l.createTransaction(e)},this.createTransaction=function(e,t,n,o,i,a,s){var c={requestType:"sendToken",recipient:t,amountTQT:parseInt(n),publicKey:e,feeTQT:parseInt(o*r.TOKEN_QUANTS,10),deadline:u.getOption("DEADLINE"),broadcast:"false",messageToEncryptIsText:"true",compressMessageToEncrypt:"true",encryptedMessageData:i,encryptedMessageNonce:a,encryptedMessageIsPrunable:"false",recipientPublicKey:s};return l.createTransaction(c)},this.broadcastTransaction=function(e){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE"),u.getOption("RANDOMIZE_NODES")));var t={requestType:"broadcastTransaction",transactionBytes:e};return i.all(o.accountEndPoint).customPOST("","",t,"")},this.setAccountInfo=function(e,t,o,a){
i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE"),u.getOption("RANDOMIZE_NODES")));var s={requestType:"setAccountInfo",publicKey:e,name:t,description:o,feeTQT:parseInt(a*r.TOKEN_QUANTS,10),deadline:u.getOption("DEADLINE"),broadcast:"false"};return l.createTransaction(s)},this.searchAccounts=function(e){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE"),u.getOption("RANDOMIZE_NODES")));var t={requestType:"searchAccounts",query:e};return i.all(o.accountEndPoint).customGET("",t)},this.setBalanceLeasing=function(e,t,o,a,s,c,d){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE"),u.getOption("RANDOMIZE_NODES")));var p={requestType:"leaseBalance",recipient:t,period:parseInt(o),publicKey:e,feeTQT:parseInt(a*r.TOKEN_QUANTS,10),deadline:u.getOption("DEADLINE"),broadcast:"false",messageToEncryptIsText:"true",compressMessageToEncrypt:"true",encryptedMessageData:s,encryptedMessageNonce:c,encryptedMessageIsPrunable:"false",recipientPublicKey:d};return l.createTransaction(p)},this.blockGeneration=function(e,t,r){"LOCAL_HOST"!==r?i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE"),u.getOption("RANDOMIZE_NODES"))):i.setBaseUrl(n.getLocalNodeUrl());var a="getForging";switch(e){case 0:a="getForging";break;case 1:a="startForging";break;case 2:a="stopForging"}var s={requestType:a,secretPhrase:t};return i.all(o.accountEndPoint).customPOST("","",s,"")},this.searchAlias=function(e){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE"),u.getOption("RANDOMIZE_NODES")));var t={requestType:"getAliasesLike",aliasPrefix:e};return i.all(o.accountEndPoint).customGET("",t)},this.getVoterPhasedTransactions=function(e,t,r){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE"),u.getOption("RANDOMIZE_NODES")));var a={requestType:"getVoterPhasedTransactions",account:e,firstIndex:t,lastIndex:r};return i.all(o.accountEndPoint).customGET("",a)},this.approveTransactions=function(e,t,a,s){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE"),u.getOption("RANDOMIZE_NODES")));var l={requestType:"approveTransaction",transactionFullHash:t,revealedSecret:s,revealedSecretIsText:!0,publicKey:e,feeTQT:parseInt(a*r.TOKEN_QUANTS,10),deadline:u.getOption("DEADLINE"),broadcast:"false"};return i.all(o.accountEndPoint).customPOST("","",l,"")},this.getPhasingOnlyControl=function(e){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE"),u.getOption("RANDOMIZE_NODES")));var t={requestType:"getPhasingOnlyControl",account:e};return i.all(o.accountEndPoint).customGET("",t)},this.setAccountControl=function(e,t,a,s){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE"),u.getOption("RANDOMIZE_NODES")));var l={requestType:"setPhasingOnlyControl",controlQuorum:t,controlWhitelisted:a,publicKey:e,feeTQT:parseInt(s*r.TOKEN_QUANTS,10),deadline:u.getOption("DEADLINE"),broadcast:"false",controlVotingModel:"0"};return i.all(o.accountEndPoint).customPOST("","",l,"")},this.removeAccountControl=function(e,t){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE"),u.getOption("RANDOMIZE_NODES")));var o={requestType:"setPhasingOnlyControl",publicKey:e,feeTQT:parseInt(t*r.TOKEN_QUANTS,10),deadline:u.getOption("DEADLINE"),broadcast:"false",controlVotingModel:"-1"};return l.createTransaction(o)},this.setPhasingOnlyControl=function(e){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE"),u.getOption("RANDOMIZE_NODES")));var t={requestType:"setPhasingOnlyControl",controlVotingModel:e.controlVotingModel,controlQuorum:e.controlQuorum,controlMinBalance:e.controlMinBalance,controlMinBalanceModel:e.controlMinBalanceModel,controlHolding:e.controlHolding,controlWhitelisted:e.account,controlMaxFees:e.controlMaxFees,controlMinDuration:e.controlMinDuration,controlMaxDuration:e.controlMaxDuration,publicKey:e.publicKey,feeTQT:parseInt(fee*r.TOKEN_QUANTS,10),deadline:u.getOption("DEADLINE"),broadcast:"false"};return i.all(o.accountEndPoint).customPOST("","",t,"")},this.getAccountProperties=function(e,t,r,a,s){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE"),u.getOption("RANDOMIZE_NODES")));var l={requestType:"getAccountProperties",recipient:e,setter:t,property:r,firstIndex:a,lastIndex:s};return i.all(o.accountEndPoint).customGET("",l)},this.setAccountProperty=function(e,t,a,s,l){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE"),u.getOption("RANDOMIZE_NODES")));var c={requestType:"setAccountProperty",publicKey:s,feeTQT:parseInt(l*r.TOKEN_QUANTS,10),deadline:u.getOption("DEADLINE"),broadcast:"false",recipient:e,property:t,value:a};return i.all(o.accountEndPoint).customPOST("","",c,"")},this.deleteAccountProperty=function(e,t,a,s,l){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE"),u.getOption("RANDOMIZE_NODES")));var c={requestType:"deleteAccountProperty",publicKey:s,feeTQT:parseInt(l*r.TOKEN_QUANTS,10),deadline:u.getOption("DEADLINE"),broadcast:"false",property:t,recipient:e,setter:a};return i.all(o.accountEndPoint).customPOST("","",c,"")},this.getAccountLedger=function(e,t,r){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE"),u.getOption("RANDOMIZE_NODES")));var a={requestType:"getAccountLedger",account:e,firstIndex:t,lastIndex:r};return i.all(o.accountEndPoint).customGET("",a)},this.startFundingMonitor=function(e,t,r,a,s,l,c,d){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE"),u.getOption("RANDOMIZE_NODES")));var p={requestType:"startFundingMonitor",property:e,amount:t,threshold:r,interval:a,holding:s,holdingType:l,secretPhrase:c,adminPassword:d};return i.all(o.accountEndPoint).customPOST("","",p,"")},this.stopFundingMonitor=function(e,t,r,a,s,l){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE"),u.getOption("RANDOMIZE_NODES")));var c={requestType:"stopFundingMonitor",property:e,holding:t,holdingType:r,secretPhrase:s,account:a,adminPassword:l};return i.all(o.accountEndPoint).customPOST("","",c,"")},this.getActivationHeights=function(e){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE"),u.getOption("RANDOMIZE_NODES")));var t={requestType:"getActivationHeights",name:d.convertToArray(e)};return i.all(o.accountEndPoint).customGET("",t)},this.getFundingMonitors=function(e,t,r,a,s,l){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE"),u.getOption("RANDOMIZE_NODES")));var c={requestType:"getFundingMonitor",property:e,holding:t,holdingType:r,secretPhrase:s,adminPassword:l,includeMonitoredAccounts:!0};return i.all(o.accountEndPoint).customGET("",c)}}]),angular.module("account").service("FaucetService",["nodeConfig","SessionStorageService","NodeService","baseConfig","accountConfig","Restangular","loginConfig","CryptoService","TransactionService","$rootScope","OptionsService",function(e,t,n,r,o,i,a,s,l,c,u){this.welcomeFaucetCall=function(e,t,n,r){i.setBaseUrl("http://185.103.75.217:8890/api/v1"),r=r||"127.0.0.5";var o={ip:r,email:e,publickey:t,account:n};return i.all("faucet").customPOST(o,"","")}}]),angular.module("account").controller("AccountMainCtrl",["$scope","$uibModal","SessionStorageService","NodeService","loginConfig","nodeConfig","DTOptionsBuilder","DTColumnBuilder","AccountService","timestampFilter","amountTQTFilter","$compile","controlConfig","CommonsService","quantToAmountFilter","quantityToShareFilter","numericalStringFilter","AssetsService","CurrenciesService","$timeout","numberStringFilter","PeerService","EscrowService","AlertService","alertConfig","SubscriptionService","$state",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g,h,S,C,T,b,y,O,v,A,w,E){e.openSendTokenModal=function(e){t.open({animation:!0,templateUrl:"account/modals/send-token-form.html",size:"lg",controller:"StepFormCtrl",resolve:{params:function(){return{recipient:e}}}})},e.openSearchAccountModal=function(){t.open({animation:!0,templateUrl:"account/modals/search-account-form.html",size:"lg",controller:"StepFormCtrl",resolve:{params:function(){return{}}}})},e.openSetAccountModal=function(){t.open({animation:!0,templateUrl:"account/modals/set-account-form.html",controller:"StepFormCtrl",resolve:{params:function(){return{}}}})},e.openTransactionTypeModal=function(){t.open({animation:!0,templateUrl:"account/modals/transaction-types.html",size:"lg",controller:"AccountMainCtrl",resolve:{params:function(){return{}}}})},e.openBalanceLeasingModal=function(){t.open({animation:!0,templateUrl:"account/modals/balance-leasing-form.html",size:"lg",controller:"BalanceLeasingCtrl",resolve:{params:function(){return{}}}})},e.openBlockGenerationModal=function(){t.open({animation:!0,templateUrl:"account/modals/block-generation.html",size:"lg",controller:"BlockGenerationCtrl",resolve:{params:function(){return{}}}})},e.openStartFundingMonitorModal=function(){t.open({animation:!0,templateUrl:"account/modals/start-funding-monitor.html",size:"lg",controller:"StartFundingMonitorCtrl",resolve:{params:function(){return{}}}})},e.openWelcomeFaucetModal=function(){t.open({animation:!0,templateUrl:"account/modals/welcome-faucet-form.html",size:"lg",controller:"StepFormCtrl",resolve:{params:function(){return{}}}})},e.openSetAccountPropertyModal=function(){t.open({animation:!0,templateUrl:"account/modals/properties-form.html",size:"lg",controller:"StepFormCtrl",resolve:{params:function(){return{}}}})},e.openDeleteAccountPropertyModal=function(e,n,r){t.open({animation:!0,templateUrl:"account/modals/properties-delete-form.html",size:"lg",controller:"StepFormCtrl",resolve:{params:function(){return{account:e,property:n,mode:r}}}})},e.getAccountFromSession=function(){e.accountDetails=n.getFromSession(o.SESSION_ACCOUNT_DETAILS_KEY),e.privateKey=n.getFromSession(o.SESSION_ACCOUNT_PRIVATE_KEY),e.activePeer=r.getNode(!1),e.localPeer=n.getFromSession(i.SESSION_LOCAL_NODE)},e.stopFundingMonitor=function(e,t,n,r){0===parseInt(n)?l.stopFundingMonitor(e,void 0,void 0,void 0,t,void 0).then(function(t){1===parseInt(t.stopped)?v.addAlert({type:"success",msg:"Funding monitor for property: "+e+" successfull stopped."},A.stopFundingMonitorAlert):v.addAlert({type:"danger",msg:"Unable to stop funding monitor. Reason:  Wrong secret or property"},A.stopFundingMonitorAlert)}):l.stopFundingMonitor(e,void 0,void 0,void 0,r,n,t,void 0).then(function(t){1===parseInt(t.stopped)?v.addAlert({type:"success",msg:"Funding monitor for property: "+e+" successfull stopped."},A.stopFundingMonitorAlert):v.addAlert({type:"danger",msg:"Unable to stop funding monitor. Reason:  Wrong secret or property"},A.stopFundingMonitorAlert)})},e.getAccountDetails=function(){e.getAssetsXmcValue(),e.getCurrenciesXmcValue();var t=l.getAccountDetailsFromSession("accountRs");l.getAccountDetails(t).then(function(r){5===r.errorCode&&(r.publicKey=l.getAccountDetailsFromSession("publicKey"),r.balanceTQT||(r.balanceTQT=0),r.unconfirmedBalanceTQT||(r.unconfirmedBalanceTQT=0),r.forgedBalanceTQT||(r.forgedBalanceTQT=0),r.effectiveBalance||(r.effectiveBalance=0),0===r.balanceTQT&&(e.publicKey=r.publicKey,e.accountRs=t)),e.multisig=' <span class="label label-success label-md" style="margin-top:-3px;"> STANDARD </span> ',l.getPhasingOnlyControl(t).then(function(t){if(t.account){e.multisig=' <span class="label label-danger label-md" style="margin-top:-3px;"> CONTROLLED </span> ',e.controlDetected=!0,e.multisigModel=JSON.stringify(t),e.controlVotingModel=t.votingModel,e.controlQuorum=t.quorum,e.accountRS=t.accountRS,e.maxFees=t.maxFees,e.minBalance=t.minBalance,e.WhitelistAccountRS=t.whitelist.length,e.whitelistedRS="";for(var r=0;r<e.WhitelistAccountRS;r++)e.whitelistedRS=e.whitelistedRS+"<br/>"+t.whitelist[r].whitelistedRS;n.saveToSession(p.SESSION_ACCOUNT_CONTROL_HASCONTROL_KEY,!0),n.saveToSession(p.SESSION_ACCOUNT_CONTROL_JSONCONTROL_KEY,t)}else n.saveToSession(p.SESSION_ACCOUNT_CONTROL_HASCONTROL_KEY,!1),n.saveToSession(p.SESSION_ACCOUNT_CONTROL_JSONCONTROL_KEY,"")},function(e){}),e.leasesDetected=!1,r.currentLesseeRS&&(e.leasesDetected=!0),e.account=r},function(e){})},e.labels=["Assets","Currencies","Account"],e.getChart=function(){T(function(){e.holdingData=[e.accountAssetXmcValue,e.accountCurrencyXmcValue,f(e.account?e.account.balanceTQT:0)];for(var t=[],n=0,r=0;r<e.labels.length;r++){var o={};o.key=e.labels[r],o.value=e.holdingData[r],n+=o.value,t.push(o)}e.accountHoldingData=t,e.total=n},2e3)},e.chartOptions={chart:{type:"pieChart",responsive:!0,height:225,width:175,showLegend:!0,noData:"Holding data not avilable",x:function(e){return e.key},y:function(e){return e.value},tooltip:{valueFormatter:function(t){return b(100*t/e.total)+" %"}}}},e.getAssetsXmcValue=function(){var t=m.getAccountDetailsFromSession("accountRs");S.getAccountAssets(t).then(function(t){for(var n=t.accountAssets,r={},o=[],i=0;i<n.length;i++){var a=n[i].asset;r[a]=n[i],o.push(a)}S.getMultipleAssetLastTrades(o).then(function(t){for(var n=0,o=t.trades||[],i=0;i<o.length;i++){var a=o[i],s=r[a.asset];n+=a.priceTQT*s.quantityQNT/1e8}e.accountAssetXmcValue=n},function(e){})},function(e){})},e.getCurrenciesXmcValue=function(){var t=m.getAccountDetailsFromSession("accountRs");C.getAccountCurrencies(t).then(function(t){for(var n=t.accountCurrencies,r={},o=[],i=0;i<n.length;i++){var a=n[i].currency;r[a]=n[i],o.push(a)}C.getMultipleCurrenctLastExchanges(o).then(function(t){for(var n=0,o=t.exchanges||[],i=0;i<o.length;i++){var a=o[i],s=r[a.currency],l=f(a.rateTQT);n+=s.units*l}e.accountCurrencyXmcValue=n},function(e){})},function(e){})},e.approvals=0,e.escrows=0,e.subscriptions=0,e.getBadges=function(){var t=m.getAccountDetailsFromSession("accountRs");l.getVoterPhasedTransactions(t).then(function(t){var n=t.transactions;e.approvals=n?n.length:0},function(t){e.approvals=0}),O.getAccountEscrowTransactions(t).then(function(t){var n=t.escrows;e.escrows=n?n.length:0},function(t){e.escrows=0}),w.getAccountSubscriptions(t).then(function(t){var n=t.subscriptions;e.subscriptions=n?n.length:0},function(t){e.subscriptions=0})}}]),angular.module("account").controller("AccountUnconfirmedTransactionsCtrl",["$scope","SessionStorageService","NodeService","loginConfig","nodeConfig","DTOptionsBuilder","DTColumnBuilder","AccountService","timestampFilter","amountTQTFilter","$compile","transactionConfFilter","transactionTypeFilter","searchTermFilter","baseConfig","transactionIconSubTypeFilter","CommonsService",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g,h){e.dtUnconfirmedOptions=i.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("serverSide",!1).withDataProp("unconfirmedTransactions").withOption("processing",!0).withOption("info",!1).withOption("paging",!0).withOption("ordering",!1).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){u(t)(e)}).withOption("ajax",function(e,t,n){var r=s.getAccountDetailsFromSession("accountId");s.getAccountUnconfirmedTransactions(r).then(function(e){e.unconfirmedTransactions=h.sanitizeJson(e.unconfirmedTransactions),t({iTotalRecords:e.unconfirmedTransactions.length,iTotalDisplayRecords:e.unconfirmedTransactions.length,unconfirmedTransactions:e.unconfirmedTransactions})})}).withDisplayLength(10).withBootstrap(),e.dtUnconfirmedColumns=[a.newColumn("timestamp").withTitle("Date").notSortable().renderWith(function(e,t,n,r){return l(e)}),a.newColumn("type").withTitle("Type").notSortable().renderWith(function(e,t,n,r){return g(e,n.subtype)}),a.newColumn("senderRS").withTitle("Sender").notSortable().renderWith(function(e,t,n,r){return m(e)}),a.newColumn("recipientRS").withTitle("Recipient").notSortable().renderWith(function(e,t,n,r){return e||""}),a.newColumn("feeTQT").withTitle("Fee").notSortable().renderWith(function(e,t,n,r){return c(e)}),a.newColumn("amountTQT").withTitle("Amount").notSortable().renderWith(function(e,t,n,r){return c(e)}),a.newColumn("transaction").withTitle("Details").notSortable().renderWith(function(e,t,n,r){return'<button type="button" class="btn btn-success btn-xs" ng-controller="SearchCtrl" ng-click="searchValue(\''+e+'\')"><i class="fa fa-list-ul" aria-hidden="true" style="width:15px;"></i></button>'})],e.reloadUnconfirmedTransactions=function(){e.dtInstanceUnconfirmedTransactions&&e.dtInstanceUnconfirmedTransactions._renderer.rerender()},e.dtInstanceUnconfirmedTransactionsCallback=function(t){e.dtInstanceUnconfirmedTransactions=t}}]),angular.module("account").controller("AccountTransactionsCtrl",["$scope","SessionStorageService","NodeService","loginConfig","nodeConfig","DTOptionsBuilder","DTColumnBuilder","AccountService","timestampFilter","amountTQTFilter","$compile","transactionIconSubTypeFilter","transactionConfFilter","transactionTypeFilter","searchTermFilter","baseConfig","isEnabledFilter","isMessageFilter","hasMessageFilter","txDirectionFilter","$sanitize","CommonsService",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g,h,S,C,T,b,y){e.filter_type="",e.filter_subtype="",e.filter_phasedOnly="",e.filter_nonPhasedOnly="",e.filter_withMessage=!1,e.filter_includePhasingResult=!1,e.filter_numberOfConfirmations="",e.includeFinished=!0,e.filterAsset=function(){e.filter_type=2,e.filter_subtype="",e.filter_phasedOnly="",e.filter_nonPhasedOnly="",e.filter_withMessage=!1,e.filter_includePhasingResult=!1,e.filter_numberOfConfirmations="",e.reloadTransactions()},e.filterPayment=function(){e.filter_type=0,e.filter_subtype="",e.filter_phasedOnly="",e.filter_nonPhasedOnly="",e.filter_withMessage=!1,e.filter_includePhasingResult=!1,e.filter_numberOfConfirmations="",e.reloadTransactions()},e.filterCurrency=function(){e.filter_type=5,e.filter_subtype="",e.filter_phasedOnly="",e.filter_nonPhasedOnly="",e.filter_withMessage=!1,e.filter_includePhasingResult=!1,e.filter_numberOfConfirmations="",e.reloadTransactions()},e.filterNone=function(){e.filter_type="",e.filter_subtype="",e.filter_phasedOnly="",e.filter_nonPhasedOnly="",e.filter_withMessage=!1,e.filter_includePhasingResult=!1,e.filter_numberOfConfirmations="",e.reloadTransactions()},e.filterAccount=function(){e.filter_type=4,e.filter_subtype="",e.filter_phasedOnly="",e.filter_nonPhasedOnly="",e.filter_withMessage=!1,e.filter_includePhasingResult=!1,e.filter_numberOfConfirmations="",e.reloadTransactions()},e.filterMessages=function(){e.filter_type=1,e.filter_subtype=0,e.filter_phasedOnly="",e.filter_nonPhasedOnly="",e.filter_withMessage=!1,e.filter_includePhasingResult=!1,e.filter_numberOfConfirmations="",e.reloadTransactions()},e.filterAlias=function(){e.filter_type=1,e.filter_subtype=1,e.filter_phasedOnly="",e.filter_nonPhasedOnly="",e.filter_withMessage=!1,e.filter_includePhasingResult=!1,e.filter_numberOfConfirmations="",e.reloadTransactions()},e.filterShuffles=function(){e.filter_type=7,e.filter_subtype=0,e.filter_phasedOnly="",e.filter_nonPhasedOnly="",e.filter_withMessage=!1,e.filter_includePhasingResult=!1,e.filter_numberOfConfirmations="",e.reloadTransactions()},e.filterEscrow=function(){e.filter_type=21,e.filter_subtype=0,e.filter_phasedOnly="",e.filter_nonPhasedOnly="",e.filter_withMessage=!1,e.filter_includePhasingResult=!1,e.filter_numberOfConfirmations="",e.reloadTransactions()},e.filterSubscription=function(){e.filter_type=21,e.filter_subtype=3,e.filter_phasedOnly="",e.filter_nonPhasedOnly="",e.filter_withMessage=!1,e.filter_includePhasingResult=!1,e.filter_numberOfConfirmations="",e.reloadTransactions()},e.filterAT=function(){e.filter_type=22,e.filter_subtype=0,e.filter_phasedOnly="",e.filter_nonPhasedOnly="",e.filter_withMessage=!1,e.filter_includePhasingResult=!1,e.filter_numberOfConfirmations="",e.reloadTransactions()},e.filterVoting=function(){e.filter_type=1,e.filter_subtype=3,e.filter_phasedOnly="",e.filter_nonPhasedOnly="",e.filter_withMessage=!1,e.filter_includePhasingResult=!1,e.filter_numberOfConfirmations="",e.reloadTransactions()},e.filterMultiSig=function(){e.filter_type=1,e.filter_subtype=9,e.filter_phasedOnly="",e.filter_nonPhasedOnly="",e.filter_withMessage=!1,e.filter_includePhasingResult=!1,e.filter_numberOfConfirmations="",e.reloadTransactions()},e.dtOptionsTransactions=i.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("serverSide",!0).withDataProp("data").withOption("responsive",!0).withOption("processing",!0).withOption("paging",!0).withOption("ordering",!1).withOption("info",!1).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){u(t)(e)}).withOption("ajax",function(t,n,r){var o=t.start+t.length-1,i=s.getAccountDetailsFromSession("accountId");s.getAccountTransaction(i,t.start,o,e.filter_type,e.filter_subtype).then(function(e){e.transactions=y.sanitizeJson(e.transactions),n({iTotalRecords:1e3,iTotalDisplayRecords:1e3,data:e.transactions})})}).withDisplayLength(10).withBootstrap(),e.dtColumnsTransactions=[a.newColumn("timestamp").withTitle("Date").notSortable().renderWith(function(e,t,n,r){return l(e)}),a.newColumn("type").withTitle("Type").notSortable().renderWith(function(e,t,n,r){return d(e,n.subtype)}),a.newColumn("amountTQT").withTitle("Amount").notSortable().renderWith(function(e,t,n,r){return c(e)}),a.newColumn("senderRS").withTitle("").notSortable().renderWith(function(e,t,n,r){var o=s.getAccountDetailsFromSession("accountRs");return T(o,n)}),a.newColumn("feeTQT").withTitle("Fee").notSortable().renderWith(function(e,t,n,r){return c(e)}),a.newColumn("confirmations").withTitle("Conf.").notSortable().renderWith(function(e,t,n,r){return p(e)}),a.newColumn("senderRS").withTitle("Sender").notSortable().withOption("defaultContent"," ").renderWith(function(e,t,n,r){return"XIN-2222-2222-2222-22222"===e?"":e?f(e):e}),a.newColumn("phased").withTitle("Msg").notSortable().renderWith(function(e,t,n,r){var o=s.getAccountDetailsFromSession("accountRs");return C(n,o)}),a.newColumn("recipientRS").withTitle("Recipient").notSortable().withOption("defaultContent"," ").renderWith(function(e,t,n,r){return e?f(e):""}),a.newColumn("transaction").withTitle("Details").notSortable().renderWith(function(e,t,n,r){return'<button class="btn btn-success btn-xs" ng-controller="SearchCtrl" ng-click="searchValue(\''+n.fullHash+'\')"><i class="fa fa-list-ul" aria-hidden="true" style="width:15px;"></i></button>'})],e.reloadTransactions=function(){e.dtInstanceTransactions&&e.dtInstanceTransactions._renderer.rerender()},e.dtInstanceTransactionsCallback=function(t){e.dtInstanceTransactions=t}}]),angular.module("account").controller("AccountLessorCtrl",["$scope","SessionStorageService","NodeService","loginConfig","nodeConfig","DTOptionsBuilder","DTColumnBuilder","AccountService","timestampFilter","amountTKNFilter","$compile","baseConfig","searchTermFilter","amountTQTFilter","CommonsService",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f){e.dtAccountLessorsOptions=i.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("serverSide",!1).withDataProp("lessors").withOption("processing",!0).withOption("info",!1).withOption("paging",!0).withOption("ordering",!1).withOption("processing",!0).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){u(t)(e)}).withOption("ajax",function(t,n,r){var o=s.getAccountDetailsFromSession("accountId");s.getAccountLessors(o).then(function(t){t.accountLeases||(t.accountLeases={}),e.currentHeight=t.height,t.accountLeases=f.sanitizeJson(t.accountLeases),n({iTotalRecords:1e3,iTotalDisplayRecords:1e3,lessors:t.accountLeases})})}).withDisplayLength(10).withBootstrap(),e.dtAccountLessorsColumns=[a.newColumn("lessorRS").withTitle("Account").notSortable().withOption("defaultContent"," ").renderWith(function(e,t,n,r){return e?p(e):e}),a.newColumn("effectiveBalance").withTitle("Balance <small> XIN </small>").notSortable().renderWith(function(e,t,n,r){return c(e)}),a.newColumn("currentHeightFrom").withTitle("Height From").notSortable().renderWith(function(e,t,n,r){return e}),a.newColumn("currentHeightTo").withTitle("Height To").notSortable().renderWith(function(e,t,n,r){return e}),a.newColumn("currentHeightTo").withTitle("Blocks Left").notSortable().renderWith(function(t,n,r,o){if(r.currentHeightFrom){var i=(r.currentHeightFrom,t-e.currentHeight);return i}return""}),a.newColumn("currentHeightTo").withTitle("Days Left").notSortable().renderWith(function(t,n,r,o){var i=(r.currentHeightFrom,t-e.currentHeight),a=i/1440;a.toFixed(2);return a.toFixed(2)}),a.newColumn("currentHeightTo").withTitle("Percentage").notSortable().renderWith(function(t,n,r,o){var i=t-r.currentHeightFrom,a=t-e.currentHeight,s=100-100*a/i;return s.toFixed(2)+"%"})],e.currentHeight=0,e.reloadLessors=function(){e.dtInstanceLessors&&e.dtInstanceLessors._renderer.rerender()},e.dtInstanceLessorsCallback=function(t){e.dtInstanceLessors=t}}]),angular.module("account").controller("StepFormCtrl",["$scope","$uibModalInstance","params",function(e,t,n){e.cancel=function(){t.dismiss("cancel")},e.$on("close-modal",function(){t.dismiss("cancel")});var r=[{templateUrl:"account/modals/send-token-details.html",title:"Send Token Details",controller:"SendTokenFormController",isolatedScope:!0,data:n},{templateUrl:"account/modals/send-token-confirm.html",title:"Send Token Confirmation",controller:"SendTokenFormController",isolatedScope:!0}],o=[{templateUrl:"account/modals/set-account-details.html",title:"Set Account Info Details",controller:"SetAccountFormCtrl",isolatedScope:!0},{templateUrl:"account/modals/set-account-confirm.html",title:"Set Account Info Confirmation",controller:"SetAccountFormCtrl",isolatedScope:!0}],i=[{templateUrl:"account/modals/search-account-details.html",title:"Search Account Details",controller:"SearchAccountFormCtrl",isolatedScope:!0},{templateUrl:"account/modals/search-account-confirm.html",title:"Search Account Results",controller:"SearchAccountFormCtrl",isolatedScope:!0}],a=[{templateUrl:"account/modals/control-account-details.html",title:"Set Account Control Details",controller:"AccountControlSetAccountCtrl",isolatedScope:!0},{templateUrl:"account/modals/control-account-confirm.html",title:"Set Account Control Confirmation",controller:"AccountControlSetAccountCtrl",isolatedScope:!0}],s=[{templateUrl:"account/modals/welcome-faucet-details.html",title:"Welcome",controller:"WelcomeFaucetFormCtrl",isolatedScope:!0,data:n},{templateUrl:"account/modals/welcome-faucet-confirm.html",title:"Get Free Token",controller:"WelcomeFaucetFormCtrl",isolatedScope:!0}],l=[{templateUrl:"account/modals/properties-details.html",title:"Set Account Property Details",controller:"SetPropertiesFormCtrl",isolatedScope:!0},{templateUrl:"account/modals/properties-confirm.html",title:"Set Account Property Confirmation",controller:"SetPropertiesFormCtrl",isolatedScope:!0}],c=[{templateUrl:"account/modals/properties-delete-confirm.html",title:"Delete Account Property Confirmation",controller:"DeletePropertiesFormCtrl",isolatedScope:!0,data:n}];e.steps={},e.steps.sendTokenForm=r,e.steps.setAccountInfoForm=o,e.steps.searchAccountSteps=i,e.steps.setControlAccountSteps=a,e.steps.welcomeFaucetForm=s,e.steps.setAccountPropertiesForm=l,e.steps.deleteAccountPropertiesForm=c}]),angular.module("account").controller("BalanceLeasingCtrl",["$scope","AccountService","SessionStorageService","$state","$uibModalInstance","CryptoService","loginConfig","AlertService","alertConfig","$uibModal","CurrenciesService",function(e,t,n,r,o,i,a,s,l,c,u){e.blockheight=1,e.initStep=function(){u.getBlockChainStatus().then(function(t){e.blockheight=parseInt(t.numberOfBlocks)})},e.cancel=function(){o.dismiss("cancel")},e.period=1440,e.increment=function(){if(e.period>=65535)return void(e.period=65535);e.period=e.period+1440,e.leaseForm.period=e.period},e.decrement=function(){if(e.period<=1440)return void(e.period=1440);e.period=e.period-1440,e.leaseForm.period=e.period},e.max=function(){e.period=65535,e.leaseForm.period=65535},e.min=function(){e.period=1440,e.leaseForm.period=1440},e.$watchCollection("leaseForm",function(t){t.recipientRS&&t.period&&(t.secret||n.getFromSession(a.SESSION_ACCOUNT_PRIVATE_KEY))?e.validForm=!0:e.validForm=!1}),e.openAddressBookModal=function(){c.open({animation:!1,templateUrl:"addressbook/views/addressbook-light.html",controller:"AddressBookCtrl",resolve:{params:function(){return{closeOnClick:!0}}}}).result.then(function(t){e.leaseForm.recipientRS=t.accountRS})},e.leaseForm={},e.validForm=!1,e.validBytes=!1,e.hasPublicKeyAdded=!1,e.hasMessageAdded=!1,e.hasPrivateKeyInSession=function(){return!!n.getFromSession(a.SESSION_ACCOUNT_PRIVATE_KEY)};var d=function(n,r){e.setBalanceLeasingPromise=t.setBalanceLeasing(n.senderPublicKey,n.recipientRS,n.period,n.fee,n.data,n.nonce,n.recipientPublicKey).then(function(t){if(!t.errorCode){var n=t.unsignedTransactionBytes,o=i.signatureHex(n,r),a=i.signTransactionHex(n,o);return e.transactionBytes=a,e.validBytes=!0,e.tx_fee=t.transactionJSON.feeTQT/1e8,e.tx_amount=t.transactionJSON.amountTQT/1e8,e.tx_total=e.tx_fee+e.tx_amount,a}s.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},l.leaseBalanceModalAlert)},function(e){s.addAlert(s.getNoConnectionMessage(e),l.leaseBalanceModalAlert)})};e.getAndVerifyAccount=function(r){if(e.blockheight<3e3)return void s.addAlert({type:"info",msg:"The balance leasing feature is available starting from block : 3'000. This is about 2 days from genesis block creation date. Please try again as soon this block height is reached."},l.leaseBalanceModalAlert);var o=r.recipientRS,c=r.period,u=r.fee,p=r.secretPhrase,m=r.message,f=r.pubkey,g=!1,h=!1,S=!1;f&&f.length>0&&(g=!0),m&&m.length>0&&(h=!0),p&&p.length>0&&(S=!0),u||(u=1),e.hasPublicKeyAdded=g,e.hasMessageAdded=h;var C,T=t.getAccountDetailsFromSession("publicKey");C=S?i.secretPhraseToPrivateKey(p):n.getFromSession(a.SESSION_ACCOUNT_PRIVATE_KEY),t.getAccountDetails(o).then(function(t){var n=t.publicKey;if(!n&&g&&(n=f),t.errorCode&&5!==t.errorCode)s.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},l.leaseBalanceModalAlert);else{if(e.accountDetails=t,!n&&!g)return void s.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: This account has no visible public key because it never had any outbound transaction. Encrypted messages or balance leasing is not available without a public key. Ask the account holder for his public key and add the key on the former page to this transaction"},l.leaseBalanceModalAlert);var r={data:"",nonce:""};h?(n||(n=f),r=i.encryptMessage(m,C,n),e.encrypted=JSON.stringify(r)):e.encrypted=r;var a={senderPublicKey:T,recipientRS:o,period:c,fee:u,data:r.data,nonce:r.nonce,recipientPublicKey:n};d(a,C),""===e.encrypted.data&&(e.encrypted="")}},function(e){s.addAlert(s.getNoConnectionMessage(e),l.leaseBalanceModalAlert)})},e.broadcastTransaction=function(e){t.broadcastTransaction(e).then(function(e){o.dismiss("cancel"),e.errorCode?s.addAlert({type:"danger",msg:"Unable to broadcast transaction. Reason: "+e.errorDescription}):s.addAlert({type:"success",msg:"Transaction succesfull broadcasted with Id : "+e.transaction})},function(e){s.addAlert(s.getNoConnectionMessage(e),l.leaseBalanceModalAlert)})},e.steps=[{templateUrl:"account/modals/balance-leasing-details.html",title:"Balance Leasing Details"},{templateUrl:"account/modals/balance-leasing-confirm.html",title:"Balance Leasing Confirm"}]}]),angular.module("account").controller("BlockGenerationCtrl",["$scope","AccountService","SessionStorageService","$state","$uibModalInstance","CryptoService","loginConfig","AlertService","alertConfig","$uibModal","NodeService","$timeout","OptionsService",function(e,t,n,r,o,i,a,s,l,c,u,d,p){e.cancel=function(){o.dismiss("cancel")},e.status="Unknown",e.hasLocal="LOCAL_HOST"===p.getOption("CONNECTION_MODE"),e.connectionMode=p.getOption("CONNECTION_MODE"),e.displayNotificationAlert=function(){"LOCAL_HOST"!==e.connectionMode&&"TESTNET"!==e.connectionMode&&"DEVTESTNET"!==e.connectionMode?d(function(){s.addAlert({type:"danger",msg:"Localhost (127.0.0.1) is not available. For security reasons localhost is mandatory for block generation."},l.blockGenerationModalAlert)},500):e.hasLocal=!0},e.hasPrivateKeyInSession=function(){return!!n.getFromSession(a.SESSION_ACCOUNT_PRIVATE_KEY)},e.generationStatus='<span class="label label-warning">Unkown Account</span>',e.runBlockGeneration=function(n){t.blockGeneration(n,e.blockGenerationForm.secretPhrase,e.connectionMode).then(function(t){t.errorDescription&&(e.generationStatus=t.errorDescription),
void 0!==t.deadline&&(e.generationStatus='<span class="label label-success">Running</span>'),4===t.errorCode&&(e.generationStatus='<span class="label label-warning">Unkown Account</span>'),!0===t.foundAndStopped&&(e.generationStatus='<span class="label label-danger">Stopped</span>'),!1===t.foundAndStopped&&(e.generationStatus='<span class="label label-danger">Stopped</span>')})}}]),angular.module("account").controller("WelcomeFaucetCtrl",["$scope","SessionStorageService","NodeService","loginConfig","nodeConfig","DTOptionsBuilder","DTColumnBuilder","AccountService","$compile","$uibModal","$q","AlertService","alertConfig","CryptoService","$state","$rootScope","params",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g,h){e.cancel=function(){$uibModalInstance.dismiss("cancel")},e.$on("close-modal",function(){$uibModalInstance.dismiss("cancel")});var S=[{templateUrl:"account/modals/welcome-faucet-details.html",title:"Welcome To XIN",controller:"WelcomeFaucetFormCtrl",isolatedScope:!0,data:h},{templateUrl:"account/modals/welcome-faucet-confirm.html",title:"Confirm Email",controller:"WelcomeFaucetFormCtrl",isolatedScope:!0}];e.steps={},e.steps.welcomeFaucetForm=S}]),angular.module("account").controller("AccountPropertiesCtrl",["$scope","SessionStorageService","NodeService","loginConfig","nodeConfig","DTOptionsBuilder","DTColumnBuilder","AccountService","timestampFilter","amountTQTFilter","$compile","transactionConfFilter","transactionTypeFilter","searchTermFilter","baseConfig","transactionIconSubTypeFilter","CommonsService",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g,h){e.dtMyPropertiesOptions=i.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("serverSide",!1).withDataProp("data").withOption("processing",!0).withOption("info",!1).withOption("paging",!0).withOption("ordering",!1).withOption("processing",!0).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){u(t)(e)}).withOption("ajax",function(e,t,n){var r=s.getAccountDetailsFromSession("accountId"),o=e.start+e.length-1;s.getAccountProperties(r,"","",e.start,o).then(function(e){e.properties=h.sanitizeJson(e.properties),t({iTotalRecords:e.properties.length,iTotalDisplayRecords:e.properties.length,data:e.properties})})}).withDisplayLength(5).withBootstrap(),e.dtMyPropertiesColumns=[a.newColumn("setterRS").withTitle("Setter").notSortable().renderWith(function(e,t,n,r){return m(e)}),a.newColumn("property").withTitle("Key").notSortable().renderWith(function(e,t,n,r){return e||""}),a.newColumn("value").withTitle("Value").notSortable().renderWith(function(e,t,n,r){return e||""}),a.newColumn("setterRS").withTitle("Action").notSortable().renderWith(function(e,t,n,r){return'<button class="btn btn-default btn-xs"  popover-placement="left" popover-trigger="\'mouseenter\'" uib-popover= "Delete property" ng-click="openDeleteAccountPropertyModal(\''+e+"','"+n.property+'\',\'1\')" ng-controller="AccountMainCtrl" ng-disabled="false"> <i class="fa fa-times" aria-hidden="true" style="width:15px;"></i> </button>'})],e.reloadMyProperties=function(){e.dtInstanceMyProperties&&e.dtInstanceMyProperties._renderer.rerender()},e.dtInstanceMyPropertiesCallback=function(t){e.dtInstanceMyProperties=t},e.dtForeignPropertiesOptions=i.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("serverSide",!1).withDataProp("data").withOption("processing",!0).withOption("info",!1).withOption("paging",!0).withOption("ordering",!1).withOption("processing",!0).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){u(t)(e)}).withOption("ajax",function(e,t,n){var r=s.getAccountDetailsFromSession("accountId"),o=e.start+e.length-1;s.getAccountProperties("",r,"",e.start,o).then(function(e){e.properties=h.sanitizeJson(e.properties),t({iTotalRecords:e.properties.length,iTotalDisplayRecords:e.properties.length,data:e.properties})})}).withDisplayLength(5).withBootstrap(),e.dtForeignPropertiesColumns=[a.newColumn("recipientRS").withTitle("Recipient").notSortable().renderWith(function(e,t,n,r){return m(e)}),a.newColumn("property").withTitle("Key").notSortable().renderWith(function(e,t,n,r){return e||""}),a.newColumn("value").withTitle("Value").notSortable().renderWith(function(e,t,n,r){return e||""}),a.newColumn("recipientRS").withTitle("Action").notSortable().renderWith(function(e,t,n,r){return'<button class="btn btn-default btn-xs"  popover-placement="left" popover-trigger="\'mouseenter\'" uib-popover= "Delete property" ng-click="openDeleteAccountPropertyModal(\''+e+"','"+n.property+'\',\'2\')" ng-controller="AccountMainCtrl" ng-disabled="false"> <i class="fa fa-times" aria-hidden="true" style="width:15px;"></i> </button>'})],e.reloadForeignProperties=function(){e.dtInstanceForeignProperties&&e.dtInstanceForeignProperties._renderer.rerender()},e.dtInstanceForeignPropertiesCallback=function(t){e.dtInstanceForeignProperties=t}}]);angular.module("account").controller("SetPropertiesFormCtrl",["$scope","AccountService","SessionStorageService","$state","CryptoService","loginConfig","AlertService","alertConfig","FeeService","multiStepFormScope","$rootScope","$uibModal",function(e,t,n,r,o,i,a,s,l,c,u,d){e.openAddressBookModal=function(){d.open({animation:!0,templateUrl:"addressbook/views/addressbook-light.html",controller:"AddressBookCtrl",resolve:{params:function(){return{closeOnClick:!0}}}}).result.then(function(t){e.sendTokenForm.recipientRS=t.accountRS})},e.cancel=function(){$uibModalInstance.dismiss("cancel")},e.setAccountPropertyForm=angular.copy(c.setAccountPropertyForm),e.$on("$destroy",function(){c.setAccountPropertyForm=angular.copy(e.setAccountPropertyForm)}),e.setAccount=function(){e.setAccountPropertyForm.recipientRS=t.getAccountDetailsFromSession("accountRs")},e.hasPrivateKeyInSession=function(){return!!n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY)},e.createSetAccountPropertyTransaction=function(){var r,l=c.setAccountPropertyForm,u=l.recipientRS,d=l.key,p=l.value,m=l.secretPhrase,f=t.getAccountDetailsFromSession("publicKey");r=m?o.secretPhraseToPrivateKey(m):n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY),e.setAccountPropertyPromise=t.setAccountProperty(u,d,p,f,1).then(function(t){if(t.errorCode)a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},s.setInfoModalAlert);else{var n=t.unsignedTransactionBytes,i=o.signatureHex(n,r);e.transactionBytes=o.signTransactionHex(n,i),e.validBytes=!0,e.tx_fee=t.transactionJSON.feeTQT/1e8,e.tx_amount=t.transactionJSON.amountTQT/1e8,e.tx_total=e.tx_fee+e.tx_amount}},function(e){a.addAlert(a.getNoConnectionMessage(e),s.setInfoModalAlert)})},e.broadcastTransaction=function(n){e.setAccountPromise=t.broadcastTransaction(n).then(function(t){e.$emit("close-modal"),t.errorCode?a.addAlert({type:"danger",msg:"Unable to broadcast transaction. Reason: "+t.errorDescription}):(a.addAlert({type:"success",msg:"Transaction succesfull broadcasted with id "+t.transaction}),u.$broadcast("reload-dashboard"))},function(e){a.addAlert(a.getNoConnectionMessage(e),s.setInfoModalAlert)})}}]),angular.module("account").controller("DeletePropertiesFormCtrl",["$scope","AccountService","SessionStorageService","$state","CryptoService","loginConfig","AlertService","alertConfig","FeeService","multiStepFormScope","$rootScope","$uibModal",function(e,t,n,r,o,i,a,s,l,c,u,d){e.form=e.$getActiveStep().data,e.cancel=function(){$uibModalInstance.dismiss("cancel")},e.$on("$destroy",function(){c.setAccountPropertyForm=angular.copy(e.setAccountPropertyForm)}),e.hasPrivateKeyInSession=function(){return!!n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY)},e.createDeleteAccountPropertyTransaction=function(){var r=e.$getActiveStep().data,l=t.getAccountDetailsFromSession("accountRs"),c=r.account,u=r.property,d=parseInt(r.mode),p="";1===d?c===l?(p=l,c=l):(p=c,c=l):2===d&&(p=l,c=c);var m,f=r.secretPhrase,g=t.getAccountDetailsFromSession("publicKey");m=f?o.secretPhraseToPrivateKey(f):n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY),e.deletePropertyPromise=t.deleteAccountProperty(c,u,p,g,1).then(function(t){if(t.errorCode)a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},s.deletePropertyAlert);else{var n=t.unsignedTransactionBytes,r=o.signatureHex(n,m);e.transactionBytes=o.signTransactionHex(n,r),e.validBytes=!0,e.tx_fee=t.transactionJSON.feeTQT/1e8,e.tx_amount=t.transactionJSON.amountTQT/1e8,e.tx_total=e.tx_fee+e.tx_amount}},function(e){a.addAlert(a.getNoConnectionMessage(e),s.deletePropertyAlert)})},e.broadcastTransaction=function(n){e.setAccountPromise=t.broadcastTransaction(n).then(function(t){e.$emit("close-modal"),t.errorCode?a.addAlert({type:"danger",msg:"Unable to broadcast transaction. Reason: "+t.errorDescription}):(a.addAlert({type:"success",msg:"Transaction succesfull broadcasted with id "+t.transaction}),u.$broadcast("reload-dashboard"))},function(e){a.addAlert(a.getNoConnectionMessage(e),s.setInfoModalAlert)})}}]),angular.module("account").controller("AccountLedgerCtrl",["$scope","SessionStorageService","NodeService","loginConfig","nodeConfig","DTOptionsBuilder","DTColumnBuilder","AccountService","timestampFilter","amountTQTFilter","$compile","transactionConfFilter","transactionTypeFilter","searchTermFilter","baseConfig","transactionIconSubTypeFilter","CommonsService","holdingTypeFilter","isEnabledFilter","ledgerHoldingFilter","ledgerTXTypesFilter",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g,h,S,C,T,b){e.dtLedgerOptions=i.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("serverSide",!0).withDataProp("entries").withOption("responsive",!0).withOption("processing",!0).withOption("paging",!0).withOption("ordering",!1).withOption("info",!1).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){u(t)(e)}).withOption("ajax",function(e,t,n){var r=e.start+e.length-1,o=s.getAccountDetailsFromSession("accountId");s.getAccountLedger(o,e.start,r).then(function(e){e.entries=h.sanitizeJson(e.entries),t({iTotalRecords:1e3,iTotalDisplayRecords:1e3,entries:e.entries})})}).withDisplayLength(10).withBootstrap(),e.dtLedgerColumns=[a.newColumn("ledgerId").withTitle("ID").notSortable().renderWith(function(e,t,n,r){return e}),a.newColumn("timestamp").withTitle("Date").notSortable().renderWith(function(e,t,n,r){return l(e)}),a.newColumn("event").withTitle("Details").notSortable().renderWith(function(e,t,n,r){return'<button type="button" class="btn btn-success btn-xs" ng-controller="SearchCtrl" ng-click="searchValue(\''+e+'\')"><i class="fa fa-list-ul" aria-hidden="true" style="width:15px;"></i></button>'}),a.newColumn("event").withTitle("Transaction").notSortable().renderWith(function(e,t,n,r){return m(e)}),a.newColumn("isTransactionEvent").withTitle("Event").notSortable().renderWith(function(e,t,n,r){return C(e)}),a.newColumn("holdingType").withTitle("Holding Type").notSortable().renderWith(function(e,t,n,r){return T(e)}),a.newColumn("eventType").withTitle("Transaction Type").notSortable().renderWith(function(e,t,n,r){return b(e)}),a.newColumn("change").withTitle("Change").notSortable().renderWith(function(e,t,n,r){return c(e)}),a.newColumn("balance").withTitle("Balance").notSortable().renderWith(function(e,t,n,r){return c(e)})],e.reloadLedgerEntries=function(){e.dtInstanceLedgerEntries&&e.dtInstanceLedgerEntries._renderer.rerender()},e.dtInstanceLedgerCallback=function(t){e.dtInstanceLedgerEntries=t}}]),angular.module("account").controller("FundingMonitorCtrl",["$scope","SessionStorageService","NodeService","loginConfig","nodeConfig","DTOptionsBuilder","DTColumnBuilder","AccountService","timestampFilter","amountTQTFilter","$compile","transactionConfFilter","transactionTypeFilter","searchTermFilter","baseConfig","transactionIconSubTypeFilter","CommonsService","holdingTypeFilter","isEnabledFilter","ledgerHoldingFilter","ledgerTXTypesFilter","CryptoService","amountTKNFilter",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g,h,S,C,T,b,y,O){e.dFundingOptions=i.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("serverSide",!0).withDataProp("entries").withOption("responsive",!0).withOption("processing",!0).withOption("paging",!0).withOption("ordering",!1).withOption("info",!1).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){u(t)(e)}).withOption("ajax",function(e,n,o){var i=(e.start,e.length,s.getAccountDetailsFromSession("accountId"),t.getFromSession(r.SESSION_ACCOUNT_PRIVATE_KEY)),a=y.secretPhraseFromPrivateKey(i);s.getFundingMonitors(void 0,void 0,void 0,void 0,a,void 0).then(function(e){e.monitors=h.sanitizeJson(e.monitors),n({iTotalRecords:100,iTotalDisplayRecords:100,entries:e.monitors})})}).withDisplayLength(10).withBootstrap(),e.dtColumnsFunding=[a.newColumn("amount").withTitle("Amount").notSortable().renderWith(function(e,t,n,r){return c(e)}),a.newColumn("holdingType").withTitle("Type").notSortable().renderWith(function(e,t,n,r){return S(e)}),a.newColumn("threshold").withTitle("Threshold").notSortable().renderWith(function(e,t,n,r){return c(e)}),a.newColumn("threshold").withTitle("Threshold").notSortable().renderWith(function(e,t,n,r){return c(e)}),a.newColumn("property").withTitle("Property").notSortable().renderWith(function(e,t,n,r){return e}),a.newColumn("monitoredAccounts").withTitle("Recipient").notSortable().renderWith(function(e,t,n,r){var o=_.get(n,"monitoredAccounts[0].accountRS")||"";return m(o)}),a.newColumn("monitoredAccounts").withTitle("Action").notSortable().renderWith(function(e,n,o,i){var a=o.holdingType,s=o.holding,l=o.property,c=t.getFromSession(r.SESSION_ACCOUNT_PRIVATE_KEY);return'<div ng-controller="AccountMainCtrl"><button type="button" class="btn btn-default btn-xs"   popover-placement="left" popover-trigger="\'mouseenter\'" uib-popover= "Stop Monitor"ng-disabled="false" ng-click="stopFundingMonitor(\''+l+"','"+y.secretPhraseFromPrivateKey(c)+"','"+a+"','"+s+'\')" confirm="Are you sure, want to stop this monitor?">  <i class="fa fa-times" aria-hidden="true" style="width:15px;"></i> </button></div> '})],e.reloadFunding=function(){e.dtInstanceFunding&&e.dtInstanceFunding._renderer.rerender()},e.dtInstanceFundingCallback=function(t){e.dtInstanceFunding=t}}]),angular.module("account").controller("StartFundingMonitorCtrl",["$scope","AccountService","SessionStorageService","$state","$uibModalInstance","CryptoService","loginConfig","AlertService","alertConfig","$uibModal","NodeService","$timeout","OptionsService","AssetsService","CurrenciesService","amountToQuantFilter","shareToQuantiyFilter","holdingTypeFilter","amountTQTFilter","numberStringFilter","$sanitize","quantityToShareFilter","searchTermFilter","DTOptionsBuilder","DTColumnBuilder","$compile",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g,h,S,C,T,b,y,O,v,A,w){e.cancel=function(){o.dismiss("cancel")},e.status="Unknown",e.hasLocal="LOCAL_HOST"===p.getOption("CONNECTION_MODE"),e.connectionMode=p.getOption("CONNECTION_MODE"),e.displayNotificationAlert=function(){"LOCAL_HOST"!==e.connectionMode&&"TESTNET"!==e.connectionMode&&"DEVTESTNET"!==e.connectionMode&&"MANUAL"!==e.connectionMode?d(function(){s.addAlert({type:"danger",msg:"Localhost (127.0.0.1) is not available. For security reasons localhost is mandatory to start a funding monitor."},l.startFundingMonitorAlert)},1e3):e.hasLocal=!0},e.hasPrivateKeyInSession=function(){return!!n.getFromSession(a.SESSION_ACCOUNT_PRIVATE_KEY)},e.getAsset=function(t){m.getAsset(t).then(function(t){e.startFundingMonitorForm.asset=t})},e.getCurrency=function(t){f.getCurrency(t).then(function(t){e.startFundingMonitorForm.currency=t})},e.holdingOptions=[{label:"XIN",value:"0"},{label:"Asset",value:"1"},{label:"Currency",value:"2"}],e.fundingMonitorActions=function(n){var r=n||e.startFundingMonitorForm,o=r.property,i=r.amount,a=g(r.threshold),c=r.interval,u=r.holding,d=r.holdingType,p=r.secretPhrase,m=r.adminPassword;switch(d){case"0":i=g(i);break;case"1":i=h(i,e.startFundingMonitorForm.asset.decimals);break;case"2":i=h(i,e.startFundingMonitorForm.currency.decimals)}t.startFundingMonitor(o,i,a,c,u,d,p,m).then(function(e){e.errorCode?s.addAlert({type:"danger",msg:"Unable start the monitor for account property : "+o+". Reason: "+e.errorDescription},l.startFundingMonitorModalAlert):s.addAlert({type:"success",msg:"Monitor for account property : "+o+" successful started"},l.startFundingMonitorModalAlert)})}}]),angular.module("account").controller("SendTokenFormController",["$scope","AccountService","SessionStorageService","$state","CryptoService","loginConfig","AlertService","alertConfig","$validation","$uibModal","multiStepFormScope","FeeService","$rootScope","amountToQuantFilter",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m){e.sendTokenForm=angular.copy(u.sendTokenForm),e.validForm=!1,e.validBytes=!1,e.hasPublicKeyAdded=!1,e.hasMessageAdded=!1,e.$on("$destroy",function(){u.sendTokenForm=angular.copy(e.sendTokenForm)}),e.initStep1=function(){var t=e.$getActiveStep().data||{};t.recipient&&(e.sendTokenForm.recipientRS=t.recipient)},e.openAddressBookModal=function(){c.open({animation:!0,templateUrl:"addressbook/views/addressbook-light.html",controller:"AddressBookCtrl",resolve:{params:function(){return{closeOnClick:!0}}}}).result.then(function(t){e.sendTokenForm.recipientRS=t.accountRS})},e.hasPrivateKeyInSession=function(){return!!n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY)};var f=function(n,r){e.sendTokenPromise=t.createTransaction(n.senderPublicKey,n.recipientRS,n.amount,1,n.data,n.nonce,n.recipientPublicKey).then(function(t){if(!t.errorCode){var n=t.unsignedTransactionBytes,i=o.signatureHex(n,r),l=o.signTransactionHex(n,i);return e.transactionBytes=l,e.validBytes=!0,e.tx_fee=t.transactionJSON.feeTQT/1e8,e.tx_amount=t.transactionJSON.amountTQT/1e8,e.tx_total=e.tx_fee+e.tx_amount,l}a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},s.sendTokenModalAlert)},function(e){a.addAlert(a.getNoConnectionMessage(e),s.sendTokenModalAlert)})};e.getAndVerifyAccount=function(r){var l=u.sendTokenForm,c=l.recipientRS,d=m(l.amount),p=l.fee,g=l.secretPhrase,h=l.message,S=l.pubkey,C=!1,T=!1,b=!1;S&&S.length>0&&(C=!0),h&&h.length>0&&(T=!0),g&&g.length>0&&(b=!0),p||(p=1),e.hasPublicKeyAdded=C,e.hasMessageAdded=T;var y,O=t.getAccountDetailsFromSession("publicKey");y=b?o.secretPhraseToPrivateKey(g):n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY),e.sendTokenPromise=t.getAccountDetails(c).then(function(t){var n=t.publicKey;if(!n&&C&&(n=S),t.errorCode&&5!==t.errorCode)a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},s.sendTokenModalAlert);else{if(e.accountDetails=t,!n&&!C&&T)return void a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: This account has no visible public key because it never had any outbound transaction. Encrypted messages are not available without a public key. Ask the account holder for his public key and add the key on the former page to this transaction"},s.sendTokenModalAlert);n||C||a.addAlert({type:"info",msg:"Note: This account never had an outbound transaction. Make sure this account is the right one. In doubt, ask the account holder for his public key and add it on the former page to this transaction."},s.sendTokenModalAlert);var r={data:"",nonce:""};T?(n||(n=S),r=o.encryptMessage(h,y,n),e.encrypted=JSON.stringify(r)):e.encrypted=r;var i={senderPublicKey:O,recipientRS:c,amount:d,fee:p,data:r.data,nonce:r.nonce,recipientPublicKey:n};f(i,y),""===e.encrypted.data&&(e.encrypted="")}},function(e){a.addAlert(a.getNoConnectionMessage(e),s.sendTokenModalAlert)})},e.broadcastTransaction=function(n){e.sendTokenPromise=t.broadcastTransaction(n).then(function(t){t.errorCode?a.addAlert({type:"danger",msg:"Unable to broadcast transaction. Reason: "+t.errorDescription}):(a.addAlert({type:"success",msg:"Transaction succesfull broadcasted with Id : "+t.transaction}),e.$emit("close-modal"))},function(e){a.addAlert(a.getNoConnectionMessage(e),s.sendTokenModalAlert)})}}]),angular.module("account").controller("SetAccountFormCtrl",["$scope","AccountService","SessionStorageService","$state","CryptoService","loginConfig","AlertService","alertConfig","FeeService","multiStepFormScope","$rootScope",function(e,t,n,r,o,i,a,s,l,c,u){e.cancel=function(){$uibModalInstance.dismiss("cancel")},e.setAccountInfoForm=angular.copy(c.setAccountInfoForm),e.$on("$destroy",function(){c.setAccountInfoForm=angular.copy(e.setAccountInfoForm)}),e.hasPrivateKeyInSession=function(){return!!n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY)},e.$watchCollection("setAccountInfoForm",function(t){var n=l.getSetAccountFee(t.accountName,t.accountDescription);(!e.setAccountInfoForm.fee||e.setAccountInfoForm.fee<n)&&(e.setAccountInfoForm.fee=n)}),e.createSetAccountInfoTransaction=function(){var r,l=c.setAccountInfoForm,u=l.accountName,d=l.accountDescription,p=l.secretPhrase,m=t.getAccountDetailsFromSession("publicKey");r=p?o.secretPhraseToPrivateKey(p):n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY),e.setAccountPromise=t.setAccountInfo(m,u,d,1).then(function(t){if(t.errorCode)a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},s.setInfoModalAlert);else{var n=t.unsignedTransactionBytes,i=o.signatureHex(n,r);e.transactionBytes=o.signTransactionHex(n,i),e.validBytes=!0,e.tx_fee=t.transactionJSON.feeTQT/1e8,e.tx_amount=t.transactionJSON.amountTQT/1e8,e.tx_total=e.tx_fee+e.tx_amount}},function(e){a.addAlert(a.getNoConnectionMessage(e),s.setInfoModalAlert)})},e.broadcastTransaction=function(n){e.setAccountPromise=t.broadcastTransaction(n).then(function(t){e.$emit("close-modal"),t.errorCode?a.addAlert({type:"danger",msg:"Unable to broadcast transaction. Reason: "+t.errorDescription}):(a.addAlert({type:"success",msg:"Transaction succesfull broadcasted with id "+t.transaction}),u.$broadcast("reload-dashboard"))},function(e){a.addAlert(a.getNoConnectionMessage(e),s.setInfoModalAlert)})}}]),angular.module("account").controller("SearchAccountFormCtrl",["$scope","AccountService","SessionStorageService","$state","DTOptionsBuilder","DTColumnBuilder","searchTermFilter","$compile","multiStepFormScope","$validation",function(e,t,n,r,o,i,a,s,l,c){e.searchAccountForm={},e.onSubmit=function(){c.validate(e.searchAccountForm),e.searchAccountForm.$valid&&e.$nextStep()},e.searchAccountForm=angular.copy(l.searchAccountForm),e.$on("$destroy",function(){l.searchAccountForm=angular.copy(e.searchAccountForm)}),e.dtOptions=o.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("serverSide",!1).withDataProp("accounts").withOption("processing",!0).withOption("info",!1).withOption("paging",!0).withOption("ordering",!1).withOption("processing",!0).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){s(t)(e)}).withOption("ajax",function(e,n,r){var o=l.searchAccountForm.query;t.searchAccounts(o).then(function(e){n({iTotalRecords:e.accounts.length,iTotalDisplayRecords:e.accounts.length,accounts:e.accounts})})}).withDisplayLength(10).withBootstrap(),e.dtColumns=[i.newColumn("name").withTitle("Name").notSortable().renderWith(function(e,t,n,r){return e}),i.newColumn("accountRS").withTitle("Account").notSortable().renderWith(function(e,t,n,r){return a(e)}),i.newColumn("accountRS").withTitle("Action").notSortable().renderWith(function(e,t,n,r){return"<a href ng-click=\"openAddressBookModal('"+e+"','"+n.name+'\')" ng-controller="BaseCtrl">  <button ng-disabled="" class="btn btn-success btn-xs"> <i class="fa fa-plus" aria-hidden="true" style="width:15px;"></i> </button>   </a>'})]}]),angular.module("account").controller("ControlMainCtrl",["$scope","SessionStorageService","NodeService","loginConfig","nodeConfig","DTOptionsBuilder","DTColumnBuilder","AccountService","timestampFilter","amountTQTFilter","$compile","controlConfig","transactionConfFilter","transactionTypeFilter","searchTermFilter","$uibModal","isMessageFilter","transactionIconSubTypeFilter",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g,h,S){e.openClaimSecretModal=function(){g.open({animation:!0,templateUrl:"account/modals/claim-secret-form.html",size:"lg",controller:"ControlStepFormCtrl",resolve:{params:function(){return{}}}})},e.openSendReferencedModal=function(){g.open({animation:!0,templateUrl:"account/modals/send-reference-form.html",size:"lg",controller:"ControlStepFormCtrl",resolve:{params:function(){return{}}}})},e.openSendDeferredModal=function(){g.open({animation:!0,templateUrl:"account/modals/send-deferred-form.html",size:"lg",controller:"ControlStepFormCtrl",resolve:{params:function(){return{}}}})},e.openSendSecretModal=function(){g.open({animation:!0,templateUrl:"account/modals/send-secret-form.html",size:"lg",controller:"ControlStepFormCtrl",resolve:{params:function(){return{}}}})},e.openApproveControlModal=function(t){g.open({animation:!1,templateUrl:"account/modals/control-approve-form.html",controller:"ControlStepFormCtrl",resolve:{params:function(){return{approve:e.data[t]}}}})},e.openRemoveControlModal=function(){g.open({animation:!1,templateUrl:"account/modals/control-remove-form.html",controller:"ControlStepFormCtrl",resolve:{params:function(){return""}}})},e.openSetAccountControlModal=function(e){g.open({animation:!1,templateUrl:"account/modals/set-account-control-form.html",controller:"ControlStepFormCtrl",resolve:{params:function(){return{}}}})},e.openSetAssetControlModal=function(t){g.open({animation:!1,templateUrl:"account/modals/control-asset-form.html",controller:"ControlStepFormCtrl",resolve:{params:function(){return e.data[t]}}})},e.openSetCurrencyControlModal=function(t){g.open({animation:!1,templateUrl:"account/modals/control-currency-form.html",controller:"ControlStepFormCtrl",resolve:{params:function(){return e.data[t]}}})},e.dtOptionsControl=i.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("info",!1).withOption("serverSide",!0).withDataProp("data").withOption("responsive",!0).withOption("processing",!0).withOption("paging",!0).withOption("ordering",!1).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){u(t)(e)}).withOption("ajax",function(t,n,r){var o=t.start+t.length-1,i=s.getAccountDetailsFromSession("accountId");s.getVoterPhasedTransactions(i,t.start,o).then(function(t){e.data=t.transactions,n({iTotalRecords:1e3,iTotalDisplayRecords:1e3,data:t.transactions})})}).withDisplayLength(10).withBootstrap(),e.dtColumnsControl=[a.newColumn("timestamp").withTitle("Date").notSortable().renderWith(function(e,t,n,r){return l(e)}),a.newColumn("type").withTitle("Type").notSortable().renderWith(function(e,t,n,r){return S(e,n.subtype)}),a.newColumn("amountTQT").withTitle("Amount").notSortable().renderWith(function(e,t,n,r){return c(e)}),a.newColumn("confirmations").withTitle("Conf.").notSortable().renderWith(function(e,t,n,r){return p(e)}),a.newColumn("confirmations").withTitle("Message").notSortable().renderWith(function(e,t,n,r){return h(n.type,n.subtype)}),a.newColumn("attachment.phasingFinishHeight").withTitle("Height").notSortable().renderWith(function(e,t,n,r){return e}),a.newColumn("senderRS").withTitle("Sender").notSortable().withOption("defaultContent"," ").renderWith(function(e,t,n,r){return e?f(e):e}),a.newColumn("recipientRS").withTitle("Recipient").notSortable().withOption("defaultContent"," ").renderWith(function(e,t,n,r){return e?f(e):""}),a.newColumn("transaction").withTitle("Details").notSortable().renderWith(function(e,t,n,r){return'<button type="button" class="btn btn-success btn-xs" ng-controller="SearchCtrl" ng-click="searchValue(\''+n.fullHash+'\')"><i class="fa fa-list-ul" aria-hidden="true"></i></button>'}),a.newColumn("transaction").withTitle("Action").notSortable().renderWith(function(e,t,n,r){return'<button type="button" class="btn btn-danger btn-xs" ng-controller="ControlMainCtrl" ng-click="openApproveControlModal(\''+r.row+'\')"><i class="fa fa-unlock" aria-hidden="true"></i></button>'})],e.reloadControl=function(){e.dtInstanceControl&&e.dtInstanceControl._renderer.rerender()},e.dtInstanceCallbackControl=function(t){e.dtInstanceControl=t},e.hasControl=t.getFromSession(d.SESSION_ACCOUNT_CONTROL_HASCONTROL_KEY)}]),angular.module("account").controller("ControlStepFormCtrl",["$scope","$uibModalInstance","params",function(e,t,n){e.cancel=function(){t.dismiss("cancel")},e.$on("close-modal",function(){t.dismiss("cancel")});var r=[{templateUrl:"account/modals/control-approve-details.html",title:"Approve Controlled Transaction Details",controller:"ControlApproveCtrl",isolatedScope:!0,data:n},{templateUrl:"account/modals/control-approve-confirm.html",title:"Approve Controlled Transaction Confirm",controller:"ControlApproveCtrl",isolatedScope:!0,data:n}],o=[{templateUrl:"account/modals/control-remove-details.html",title:"Remove Account Control Details",controller:"RemoveAccountControlCtrl",isolatedScope:!0,data:n},{templateUrl:"account/modals/control-remove-confirm.html",title:"Remove Account Control Confirmation",controller:"RemoveAccountControlCtrl",isolatedScope:!0,data:n}],i=[{templateUrl:"account/modals/set-account-control-details.html",title:"Set Account Control Details",controller:"SetAccountControlCtrl",isolatedScope:!0,data:n},{templateUrl:"account/modals/set-account-control-confirm.html",title:"Set Account Control Confirmation",controller:"SetAccountControlCtrl",isolatedScope:!0,data:n}],a=[{templateUrl:"account/modals/control-asset-details.html",title:"Set Asset Control Details",controller:"ControlAssetCtrl",isolatedScope:!0,data:n},{templateUrl:"account/modals/control-asset-confirm.html",title:"Set Asset Control Confirmation",controller:"ControlAssetCtrl",isolatedScope:!0,data:n}],s=[{templateUrl:"account/modals/control-currency-details.html",title:"Set Currency Control Details",controller:"ControlCurrencyCtrl",isolatedScope:!0,data:n},{templateUrl:"account/modals/control-currency-confirm.html",title:"Set Currency Control Confirmation",controller:"ControlCurrencyCtrl",isolatedScope:!0,data:n}],l=[{templateUrl:"account/modals/send-deferred-details.html",title:"Send Deferred Token Details",controller:"SendDeferredController",isolatedScope:!0,data:n},{templateUrl:"account/modals/send-deferred-confirm.html",title:"Send Deferred Token Confirmation",controller:"SendDeferredController",isolatedScope:!0}],c=[{templateUrl:"account/modals/send-reference-details.html",title:"Send Reference Token Details",controller:"SendReferencedController",isolatedScope:!0,data:n},{templateUrl:"account/modals/send-reference-confirm.html",title:"Send Reference Token Confirmation",controller:"SendReferencedController",isolatedScope:!0}],u=[{templateUrl:"account/modals/send-secret-details.html",title:"Send Secret Token Details",controller:"SendSecretController",isolatedScope:!0,data:n},{templateUrl:"account/modals/send-secret-confirm.html",title:"Send Secret Token Confirmation",controller:"SendSecretController",isolatedScope:!0}],d=[{templateUrl:"account/modals/claim-secret-details.html",title:"Claim Secret Token Details",controller:"ClaimSecretController",isolatedScope:!0,data:n},{templateUrl:"account/modals/claim-secret-confirm.html",title:"Claim Secret Token Confirmation",controller:"ClaimSecretController",isolatedScope:!0}];e.steps={},e.steps.controlApproveSteps=r,e.steps.removeAccountControlForm=o,e.steps.setAccountControlForm=i,e.steps.controlAssetSteps=a,e.steps.controlCurrencySteps=s,e.steps.sendReferencedSteps=c,e.steps.sendDeferredSteps=l,e.steps.sendSecretSteps=u,e.steps.claimSecretSteps=d}]),angular.module("account").controller("ControlApproveCtrl",["$scope","SessionStorageService","NodeService","loginConfig","nodeConfig","DTOptionsBuilder","DTColumnBuilder","AccountService","$compile","$uibModal","$q","AlertService","alertConfig","CryptoService","$state","$rootScope","multiStepFormScope",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g,h){e.initStep1=function(){var t=e.$getActiveStep().data;e.transaction=t.approve.transaction,e.fullhash=t.approve.fullHash,e.sender=t.approve.senderRS,e.recipient=t.approve.recipientRS,e.amount=t.approve.amountTQT,e.timestamp=t.approve.timestamp,e.type=t.approve.type,e.subtype=t.approve.subtype,
e.transaction=t.approve.transaction,e.setApproveTransaction={}},e.hasPrivateKeyInSession=function(){return!!t.getFromSession(r.SESSION_ACCOUNT_PRIVATE_KEY)},e.confirmControlledTransaction=function(){var n,o=e.setApproveTransaction.secretPhrase,i=e.fullhash,a=s.getAccountDetailsFromSession("publicKey");n=o?m.secretPhraseToPrivateKey(o):t.getFromSession(r.SESSION_ACCOUNT_PRIVATE_KEY),e.controlApprovePromise=s.approveTransactions(a,i,1).then(function(t){if(t.errorCode)d.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},p.controlApproveModalAlert);else{var r=t.unsignedTransactionBytes,o=m.signatureHex(r,n);e.transactionBytes=m.signTransactionHex(r,o),e.transactionJSON=t.transactionJSON,e.validBytes=!0}},function(e){d.addAlert(d.getNoConnectionMessage(e),p.controlApproveModalAlert)}),e.broadcastTransaction=function(t){e.controlApprovePromise=s.broadcastTransaction(t).then(function(t){t.errorCode?d.addAlert({type:"danger",msg:"Unable to broadcast transaction. Reason : "+t.errorDescription}):(d.addAlert({type:"success",msg:"Transaction succesfull broadcasted with id : "+t.transaction}),e.$emit("close-modal"),g.$broadcast("reload-dashboard"))},function(e){d.addAlert(d.getNoConnectionMessage(e),p.controlApproveModalAlert)})}}}]),angular.module("account").controller("ControlAccountCtrl",["$scope","SessionStorageService","NodeService","loginConfig","nodeConfig","DTOptionsBuilder","DTColumnBuilder","AccountService","$compile","$uibModal","$q","AlertService","alertConfig","CryptoService","$state","$rootScope",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g){e.openAddressBookModal=function(){c.open({animation:!0,templateUrl:"addressbook/views/addressbook-light.html",controller:"AddressBookCtrl",resolve:{params:function(){return{closeOnClick:!0}}}}).result.then(function(t){e.sendTokenForm.recipientRS=t.accountRS})},e.hasPrivateKeyInSession=function(){return!!t.getFromSession(r.SESSION_ACCOUNT_PRIVATE_KEY)}}]),angular.module("account").controller("ControlAssetCtrl",["$scope","SessionStorageService","NodeService","loginConfig","nodeConfig","DTOptionsBuilder","DTColumnBuilder","AccountService","$compile","$uibModal","$q","AlertService","alertConfig","CryptoService","$state","$rootScope",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g){e.hasPrivateKeyInSession=function(){return!!t.getFromSession(r.SESSION_ACCOUNT_PRIVATE_KEY)}}]),angular.module("account").controller("ControlCurrencyCtrl",["$scope","SessionStorageService","NodeService","loginConfig","nodeConfig","DTOptionsBuilder","DTColumnBuilder","AccountService","$compile","$uibModal","$q","AlertService","alertConfig","CryptoService","$state","$rootScope",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g){e.hasPrivateKeyInSession=function(){return!!t.getFromSession(r.SESSION_ACCOUNT_PRIVATE_KEY)}}]),angular.module("account").controller("SendDeferredController",["$scope","AccountService","SessionStorageService","$state","CryptoService","loginConfig","AlertService","alertConfig","$validation","$uibModal","multiStepFormScope","FeeService","$rootScope","amountToQuantFilter","CurrenciesService","OptionsService",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g){e.sendDeferredForm=angular.copy(u.sendDeferredForm),e.validForm=!1,e.validBytes=!1,e.hasPublicKeyAdded=!1,e.hasMessageAdded=!1,e.$on("$destroy",function(){u.sendDeferredForm=angular.copy(e.sendDeferredForm)}),e.initStep1=function(){var t=e.$getActiveStep().data||{};t.recipient&&(e.sendDeferredForm.recipientRS=t.recipient)},e.getBlockChainStatus=function(){f.getBlockChainStatus().then(function(t){e.sendDeferredForm.currentHeight=t.numberOfBlocks})},e.deferredHeight=1440,e.days=1,e.increment=function(){if(e.deferredHeight>=14400)return void(e.deferredHeight=14400);e.deferredHeight=e.deferredHeight+1440,e.sendDeferredForm.deferredHeight=e.deferredHeight,e.days=parseInt(e.deferredHeight/1440)},e.decrement=function(){if(e.deferredHeight<=1440)return void(e.deferredHeight=1440);e.deferredHeight=e.deferredHeight-1440,e.sendDeferredForm.deferredHeight=e.deferredHeight,e.days=parseInt(e.deferredHeight/1440)},e.max=function(){e.deferredHeight=14400,e.sendDeferredForm.deferredHeight=14400,e.days=parseInt(e.deferredHeight/1440)},e.min=function(){e.deferredHeight=1440,e.sendDeferredForm.deferredHeight=1440,e.days=parseInt(e.deferredHeight/1440)},e.openAddressBookModal=function(){c.open({animation:!0,templateUrl:"addressbook/views/addressbook-light.html",controller:"AddressBookCtrl",resolve:{params:function(){return{closeOnClick:!0}}}}).result.then(function(t){e.sendDeferredForm.recipientRS=t.accountRS})},e.hasPrivateKeyInSession=function(){return!!n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY)};var h=function(n,r){e.sendDeferedPromise=t.createPhasedTransaction(n).then(function(t){if(!t.errorCode){var n=t.unsignedTransactionBytes,i=o.signatureHex(n,r),l=o.signTransactionHex(n,i);return e.transactionBytes=l,e.validBytes=!0,e.tx_fee=t.transactionJSON.feeTQT/1e8,e.tx_amount=t.transactionJSON.amountTQT/1e8,e.tx_total=e.tx_fee+e.tx_amount,l}a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},s.sendTokenModalAlert)},function(e){a.addAlert(a.getNoConnectionMessage(e),s.sendTokenModalAlert)})};e.getAndVerifyAccount=function(r){var l=u.sendDeferredForm,c=l.recipientRS,d=m(l.amount),p=1,f=l.secretPhrase,S=l.message,C=l.pubkey,T=parseInt(l.currentHeight),b=parseInt(l.deferredHeight),y=T+b,O=!1,v=!1,A=!1;C&&C.length>0&&(O=!0),S&&S.length>0&&(v=!0),f&&f.length>0&&(A=!0),p||(p=1),e.hasPublicKeyAdded=O,e.hasMessageAdded=v;var w,E=t.getAccountDetailsFromSession("publicKey");w=A?o.secretPhraseToPrivateKey(f):n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY),e.sendDeferedPromise=t.getAccountDetails(c).then(function(t){var n=t.publicKey;if(!n&&O&&(n=C),t.errorCode&&5!==t.errorCode)a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},s.sendTokenModalAlert);else{if(e.accountDetails=t,!n&&!O&&v)return void a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: This account has no visible public key because it never had any outbound transaction. Encrypted messages are not available without a public key. Ask the account holder for his public key and add the key on the former page to this transaction."},s.sendTokenModalAlert);n||O||a.addAlert({type:"info",msg:"Note: This account never had an outbound transaction. Make sure this account is the right one. In doubt, ask the account holder for his public key and add it on the former page to this transaction."},s.sendTokenModalAlert);var r={data:"",nonce:""};v?(n||(n=C),r=o.encryptMessage(S,w,n),e.encrypted=JSON.stringify(r)):e.encrypted=r;var i={requestType:"sendToken",publicKey:E,recipient:c,amountTQT:d,feeTQT:p,deadline:g.getOption("DEADLINE"),broadcast:!1,recipientPublicKey:n,messageToEncryptIsText:"true",compressMessageToEncrypt:"true",encryptedMessageIsPrunable:!1,encryptedMessageData:r.data,encryptedMessageNonce:r.nonce,phased:!0,phasingFinishHeight:y,phasingVotingModel:-1,phasingQuorum:0,phasingMinBalance:0,phasingMinBalanceModel:0,phasingHolding:null,phasingLinkedFullHash:null,phasingHashedSecret:null,phasingHashedSecretAlgorithm:null};h(i,w),""===e.encrypted.data&&(e.encrypted="")}},function(e){a.addAlert(a.getNoConnectionMessage(e),s.sendTokenModalAlert)})},e.broadcastTransaction=function(n){e.sendDeferedPromise=t.broadcastTransaction(n).then(function(t){t.errorCode?a.addAlert({type:"danger",msg:"Unable to broadcast transaction. Reason: "+t.errorDescription}):(a.addAlert({type:"success",msg:"Transaction succesfull broadcasted with Id : "+t.transaction}),e.$emit("close-modal"))},function(e){a.addAlert(a.getNoConnectionMessage(e),s.sendTokenModalAlert)})}}]),angular.module("account").controller("SendReferencedController",["$scope","AccountService","SessionStorageService","$state","CryptoService","loginConfig","AlertService","alertConfig","$validation","$uibModal","multiStepFormScope","FeeService","$rootScope","amountToQuantFilter","CurrenciesService","OptionsService",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g){e.sendReferencedForm=angular.copy(u.sendReferencedForm),e.validForm=!1,e.validBytes=!1,e.hasPublicKeyAdded=!1,e.hasMessageAdded=!1,e.$on("$destroy",function(){u.sendReferencedForm=angular.copy(e.sendReferencedForm)}),e.initStep1=function(){var t=e.$getActiveStep().data||{};t.recipient&&(e.sendReferencedForm.recipientRS=t.recipient)},e.getBlockChainStatus=function(){f.getBlockChainStatus().then(function(t){e.sendReferencedForm.currentHeight=t.numberOfBlocks})},e.deferredHeight=1440,e.days=1,e.increment=function(){if(e.deferredHeight>=14400)return void(e.deferredHeight=14400);e.deferredHeight=e.deferredHeight+1440,e.sendReferencedForm.deferredHeight=e.deferredHeight,e.days=parseInt(e.deferredHeight/1440)},e.decrement=function(){if(e.deferredHeight<=1440)return void(e.deferredHeight=1440);e.deferredHeight=e.deferredHeight-1440,e.sendReferencedForm.deferredHeight=e.deferredHeight,e.days=parseInt(e.deferredHeight/1440)},e.max=function(){e.deferredHeight=14400,e.sendReferencedForm.deferredHeight=14400,e.days=parseInt(e.deferredHeight/1440)},e.min=function(){e.deferredHeight=1440,e.sendReferencedForm.deferredHeight=1440,e.days=parseInt(e.deferredHeight/1440)},e.openAddressBookModal=function(){c.open({animation:!0,templateUrl:"addressbook/views/addressbook-light.html",controller:"AddressBookCtrl",resolve:{params:function(){return{closeOnClick:!0}}}}).result.then(function(t){e.sendReferencedForm.recipientRS=t.accountRS})},e.hasPrivateKeyInSession=function(){return!!n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY)};var h=function(n,r){e.sendReferencePromise=t.createPhasedTransaction(n).then(function(t){if(!t.errorCode){var n=t.unsignedTransactionBytes,i=o.signatureHex(n,r),l=o.signTransactionHex(n,i);return e.transactionBytes=l,e.validBytes=!0,e.tx_fee=t.transactionJSON.feeTQT/1e8,e.tx_amount=t.transactionJSON.amountTQT/1e8,e.tx_total=e.tx_fee+e.tx_amount,l}a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},s.sendTokenModalAlert)},function(e){a.addAlert(a.getNoConnectionMessage(e),s.sendTokenModalAlert)})};e.getAndVerifyAccount=function(r){var l=u.sendReferencedForm,c=l.recipientRS,d=m(l.amount),p=1,f=l.secretPhrase,S=l.fullHash,C=l.message,T=l.pubkey,b=parseInt(l.currentHeight),y=parseInt(l.deferredHeight),O=b+y,v=!1,A=!1,w=!1;T&&T.length>0&&(v=!0),C&&C.length>0&&(A=!0),f&&f.length>0&&(w=!0),p||(p=1),e.hasPublicKeyAdded=v,e.hasMessageAdded=A;var E,N=t.getAccountDetailsFromSession("publicKey");E=w?o.secretPhraseToPrivateKey(f):n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY),e.sendReferencePromise=t.getAccountDetails(c).then(function(t){var n=t.publicKey;if(!n&&v&&(n=T),t.errorCode&&5!==t.errorCode)a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},s.sendTokenModalAlert);else{if(e.accountDetails=t,!n&&!v&&A)return void a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: This account has no visible public key because it never had any outbound transaction. Encrypted messages are not available without a public key. Ask the account holder for his public key and add the key on the former page to this transaction"},s.sendTokenModalAlert);n||v||a.addAlert({type:"info",msg:"Note: This account never had an outbound transaction. Make sure this account is the right one. In doubt, ask the account holder for his public key and add it on the former page to this transaction."},s.sendTokenModalAlert);var r={data:"",nonce:""};A?(n||(n=T),r=o.encryptMessage(C,E,n),e.encrypted=JSON.stringify(r)):e.encrypted=r;var i={requestType:"sendToken",publicKey:N,recipient:c,amountTQT:d,feeTQT:p,deadline:g.getOption("DEADLINE"),broadcast:!1,recipientPublicKey:n,messageToEncryptIsText:"true",compressMessageToEncrypt:"true",encryptedMessageIsPrunable:!1,encryptedMessageData:r.data,encryptedMessageNonce:r.nonce,phased:!0,phasingFinishHeight:O,phasingVotingModel:4,phasingQuorum:1,phasingMinBalance:0,phasingMinBalanceModel:0,phasingHolding:null,phasingLinkedFullHash:S,phasingHashedSecret:null,phasingHashedSecretAlgorithm:null};h(i,E),""===e.encrypted.data&&(e.encrypted="")}},function(e){a.addAlert(a.getNoConnectionMessage(e),s.sendTokenModalAlert)})},e.broadcastTransaction=function(n){e.sendReferencePromise=t.broadcastTransaction(n).then(function(t){t.errorCode?a.addAlert({type:"danger",msg:"Unable to broadcast transaction. Reason: "+t.errorDescription}):(a.addAlert({type:"success",msg:"Transaction succesfull broadcasted with Id : "+t.transaction}),e.$emit("close-modal"))},function(e){a.addAlert(a.getNoConnectionMessage(e),s.sendTokenModalAlert)})}}]),angular.module("account").controller("SendSecretController",["$scope","AccountService","SessionStorageService","$state","CryptoService","loginConfig","AlertService","alertConfig","$validation","$uibModal","multiStepFormScope","FeeService","$rootScope","amountToQuantFilter","CurrenciesService","OptionsService",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g){e.sendSecretForm=angular.copy(u.sendSecretForm),e.validForm=!1,e.validBytes=!1,e.hasPublicKeyAdded=!1,e.hasMessageAdded=!1,e.$on("$destroy",function(){u.sendSecretForm=angular.copy(e.sendSecretForm)}),e.initStep1=function(){var t=e.$getActiveStep().data||{};t.recipient&&(e.sendSecretForm.recipientRS=t.recipient)},e.getBlockChainStatus=function(){f.getBlockChainStatus().then(function(t){e.sendSecretForm.currentHeight=t.numberOfBlocks})},e.deferredHeight=1440,e.days=1,e.increment=function(){if(e.deferredHeight>=14400)return void(e.deferredHeight=14400);e.deferredHeight=e.deferredHeight+1440,e.sendSecretForm.deferredHeight=e.deferredHeight,e.days=parseInt(e.deferredHeight/1440)},e.decrement=function(){if(e.deferredHeight<=1440)return void(e.deferredHeight=1440);e.deferredHeight=e.deferredHeight-1440,e.sendSecretForm.deferredHeight=e.deferredHeight,e.days=parseInt(e.deferredHeight/1440)},e.max=function(){e.deferredHeight=14400,e.sendSecretForm.deferredHeight=14400,e.days=parseInt(e.deferredHeight/1440)},e.min=function(){e.deferredHeight=1440,e.sendSecretForm.deferredHeight=1440,e.days=parseInt(e.deferredHeight/1440)},e.openAddressBookModal=function(){c.open({animation:!0,templateUrl:"addressbook/views/addressbook-light.html",controller:"AddressBookCtrl",resolve:{params:function(){return{closeOnClick:!0}}}}).result.then(function(t){e.sendSecretForm.recipientRS=t.accountRS})},e.hasPrivateKeyInSession=function(){return!!n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY)};var h=function(n,r){e.sendSecretPromise=t.createPhasedTransaction(n).then(function(t){if(!t.errorCode){var n=t.unsignedTransactionBytes,i=o.signatureHex(n,r),l=o.signTransactionHex(n,i);return e.transactionBytes=l,e.validBytes=!0,e.tx_fee=t.transactionJSON.feeTQT/1e8,e.tx_amount=t.transactionJSON.amountTQT/1e8,e.tx_total=e.tx_fee+e.tx_amount,l}a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},s.sendTokenModalAlert)},function(e){a.addAlert(a.getNoConnectionMessage(e),s.sendTokenModalAlert)})};e.getAndVerifyAccount=function(r){var l=u.sendSecretForm,c=l.recipientRS,d=m(l.amount),p=1,f=l.secretPhrase,S=l.secretHash,C=l.message,T=l.pubkey,b=parseInt(l.currentHeight),y=parseInt(l.deferredHeight),O=b+y,v=!1,A=!1,w=!1;T&&T.length>0&&(v=!0),C&&C.length>0&&(A=!0),f&&f.length>0&&(w=!0),p||(p=1),e.hasPublicKeyAdded=v,e.hasMessageAdded=A;var E,N=t.getAccountDetailsFromSession("publicKey");E=w?o.secretPhraseToPrivateKey(f):n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY),e.sendSecretPromise=t.getAccountDetails(c).then(function(t){var n=t.publicKey;if(!n&&v&&(n=T),t.errorCode&&5!==t.errorCode)a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},s.sendTokenModalAlert);else{if(e.accountDetails=t,!n&&!v&&A)return void a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: This account has no visible public key because it never had any outbound transaction. Encrypted messages are not available without a public key. Ask the account holder for his public key and add the key on the former page to this transaction"},s.sendTokenModalAlert);n||v||a.addAlert({type:"info",msg:"Note: This account never had an outbound transaction. Make sure this account is the right one. In doubt, ask the account holder for his public key and add it on the former page to this transaction."},s.sendTokenModalAlert);var r={data:"",nonce:""};A?(n||(n=T),r=o.encryptMessage(C,E,n),e.encrypted=JSON.stringify(r)):e.encrypted=r;var i={requestType:"sendToken",publicKey:N,recipient:c,amountTQT:d,feeTQT:p,deadline:g.getOption("DEADLINE"),broadcast:!1,recipientPublicKey:n,messageToEncryptIsText:"true",compressMessageToEncrypt:"true",encryptedMessageIsPrunable:!1,encryptedMessageData:r.data,encryptedMessageNonce:r.nonce,phased:!0,phasingFinishHeight:O,phasingVotingModel:5,phasingQuorum:1,phasingMinBalance:0,phasingMinBalanceModel:0,phasingHolding:null,phasingLinkedFullHash:null,phasingHashedSecret:S,phasingHashedSecretAlgorithm:2};h(i,E),""===e.encrypted.data&&(e.encrypted="")}},function(e){a.addAlert(a.getNoConnectionMessage(e),s.sendTokenModalAlert)})},e.broadcastTransaction=function(n){e.sendSecretPromise=t.broadcastTransaction(n).then(function(t){t.errorCode?a.addAlert({type:"danger",msg:"Unable to broadcast transaction. Reason: "+t.errorDescription}):(a.addAlert({type:"success",msg:"Transaction succesfull broadcasted with Id : "+t.transaction}),e.$emit("close-modal"))},function(e){a.addAlert(a.getNoConnectionMessage(e),s.deleteCurrencyModalAlert)})}}]),angular.module("account").controller("ClaimSecretController",["$scope","AccountService","SessionStorageService","$state","CryptoService","loginConfig","AlertService","alertConfig","$validation","$uibModal","multiStepFormScope","FeeService","$rootScope","amountToQuantFilter","CurrenciesService",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f){e.validBytes=!1,e.claimSeceretForm={},e.hasPrivateKeyInSession=function(){return!!n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY)},e.confirmControlledTransaction=function(r,l){var c=t.getAccountDetailsFromSession("publicKey"),u=n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY);e.claimSecretPromise=t.approveTransactions(c,r,1,l).then(function(t){if(t.errorCode)a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},s.claimSecretTransaction);else{var n=t.unsignedTransactionBytes,r=o.signatureHex(n,u);e.transactionBytes=o.signTransactionHex(n,r),e.transactionJSON=t.transactionJSON,e.validBytes=!0}},function(e){a.addAlert(a.getNoConnectionMessage(e),s.claimSecretTransaction)}),e.broadcastTransaction=function(n){e.claimSecretPromise=t.broadcastTransaction(n).then(function(t){t.errorCode?a.addAlert({type:"danger",msg:"Unable to broadcast transaction. Reason : "+t.errorDescription}):(a.addAlert({type:"success",msg:"Transaction succesfull broadcasted with id : "+t.transaction}),e.$emit("close-modal"),p.$broadcast("reload-dashboard"))},function(e){a.addAlert(a.getNoConnectionMessage(e),s.claimSecretTransaction)})}}}]),angular.module("account").controller("SetAccountControlCtrl",["$scope","SessionStorageService","NodeService","loginConfig","nodeConfig","DTOptionsBuilder","DTColumnBuilder","AccountService","$compile","$uibModal","$q","AlertService","alertConfig","CryptoService","$state","$rootScope","multiStepFormScope","CommonsService","$validation",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g,h,S,C){function T(){var t=e.setAccountControlForm,n=t.quorum||2,r=t.approveAccounts||[];if(r.length>n){for(var o=r.length,i=0,a=0;a<o;a++)r[a].value&&i++;return i>n}return!1}e.setAccountControlForm=angular.copy(h.setAccountControlForm),e.$on("$destroy",function(){h.setAccountControlForm=angular.copy(e.setAccountControlForm)}),e.addNewAccount=function(){e.setAccountControlForm.approveAccounts=e.setAccountControlForm.approveAccounts||[];var t=e.setAccountControlForm;t.approveAccounts.length>=10?d.addAlert({type:"danger",msg:"You can add only maximum 10 accounts."},p.setAccountControlModalAlert):t.approveAccounts.push({})},e.nextStep=function(){T()?(e.foo=e.setAccountControlForm.approveAccounts[0],e.$nextStep()):d.addAlert({type:"danger",msg:"This control setup is not valid, please check quorum and number of approval accounts."},p.setAccountControlModalAlert)},e.openAddressBookModal=function(e){c.open({animation:!0,templateUrl:"addressbook/views/addressbook-light.html",controller:"AddressBookCtrl",resolve:{params:function(){return{closeOnClick:!0}}}}).result.then(function(t){e.value=t.accountRS})},e.hasPrivateKeyInSession=function(){return!!t.getFromSession(r.SESSION_ACCOUNT_PRIVATE_KEY)},e.setAccountControl=function(){for(var n=h.setAccountControlForm,o=n.quorum,i=n.approveAccounts,a=0;a<i.length;a++)i[a]=i[a].value;var l,c=S.getAccountDetailsFromSession("publicKey"),u=n.secretPhrase;l=u?m.secretPhraseToPrivateKey(u):t.getFromSession(r.SESSION_ACCOUNT_PRIVATE_KEY),e.setAccountControlPromise=s.setAccountControl(c,o,i,1).then(function(t){if(t.errorCode)d.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},p.setAccountControlModalAlert);else{var n=t.unsignedTransactionBytes,r=m.signatureHex(n,l);e.transactionBytes=m.signTransactionHex(n,r),e.validBytes=!0,e.tx_fee=t.transactionJSON.feeTQT/1e8,e.tx_amount=t.transactionJSON.amountTQT/1e8,e.tx_total=e.tx_fee+e.tx_amount}},function(e){d.addAlert(d.getNoConnectionMessage(e),p.setAccountControlModalAlert)})},e.broadcastTransaction=function(t){e.setAccountControlPromise=S.broadcastTransaction(t).then(function(t){t.errorCode?d.addAlert({type:"danger",msg:"Unable to broadcast transaction. Reason : "+t.errorDescription}):(d.addAlert({type:"success",msg:"Transaction succesfull broadcasted with id : "+t.transaction}),e.$emit("close-modal"),g.$broadcast("reload-dashboard"))},function(e){d.addAlert(d.getNoConnectionMessage(e),p.setAccountControlModalAlert)})}}]),angular.module("account").controller("RemoveAccountControlCtrl",["$scope","SessionStorageService","NodeService","loginConfig","nodeConfig","DTOptionsBuilder","DTColumnBuilder","AccountService","$compile","$uibModal","controlConfig","$q","AlertService","alertConfig","CryptoService","$state","$rootScope","multiStepFormScope","CommonsService",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g,h,S,C){e.removeAccountControlForm=angular.copy(S.removeAccountControlForm),e.$on("$destroy",function(){try{e.removeAccountControlForm.jsonControl=e.jsonControl}catch(e){}S.removeAccountControlForm=angular.copy(e.removeAccountControlForm)}),e.initStep1=function(){e.removeAccountControlForm={},e.jsonControl=t.getFromSession(u.SESSION_ACCOUNT_CONTROL_JSONCONTROL_KEY),e.removeAccountControlForm.jsonControl=e.jsonControl},e.removeAccountControl=function(){var n,o=S.removeAccountControlForm,i=C.getAccountDetailsFromSession("publicKey"),a=o.secretPhrase;n=a?f.secretPhraseToPrivateKey(a):t.getFromSession(r.SESSION_ACCOUNT_PRIVATE_KEY),e.removeAccountControlPromise=s.removeAccountControl(i,1).then(function(t){if(t.errorCode)p.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},m.controlRemoveModalAlert);else{var r=t.unsignedTransactionBytes,o=f.signatureHex(r,n);e.transactionBytes=f.signTransactionHex(r,o),e.validBytes=!0,e.tx_fee=t.transactionJSON.feeTQT/1e8}},function(e){p.addAlert(p.getNoConnectionMessage(e),m.controlRemoveModalAlert)})},e.hasPrivateKeyInSession=function(){return!!t.getFromSession(r.SESSION_ACCOUNT_PRIVATE_KEY)},e.broadcastTransaction=function(t){e.removeAccountControlPromise=C.broadcastTransaction(t).then(function(t){t.errorCode?p.addAlert({type:"danger",msg:"Unable to broadcast transaction. Reason : "+t.errorDescription}):(p.addAlert({type:"success",msg:"Transaction succesfull broadcasted with id : "+t.transaction}),e.$emit("close-modal"),h.$broadcast("reload-dashboard"))},function(e){p.addAlert(p.getNoConnectionMessage(e),m.controlRemoveModalAlert)})}}]),angular.module("account").directive("activationDirective",["AccountService","TransactionService","$q","$compile",function(e,t,n,r){function o(o,i,a){function s(e){var t=(a.height||o.activationHeight)>o.currentHeight;e.attr("disabled",t),t&&e.addClass("disabled"),r(e.contents())(o)}!function(r,i){var a=t.getBlockChainStatus(),l=e.getActivationHeights(r);n.all([a,l]).then(function(e){var t=e[0].numberOfBlocks,n=e[1][r]||Number.MAX_VALUE;o.activationHeight=n,o.currentHeight=t},function(e){o.activationHeight=0,o.currentHeight=Number.MAX_VALUE}).finally(function(){s(i)})}(a.name,i)}return{link:o}}]),angular.module("account").controller("WelcomeFaucetFormCtrl",["$scope","FaucetService","SessionStorageService","$state","CryptoService","loginConfig","AlertService","alertConfig","FeeService","multiStepFormScope","$rootScope","CommonsService",function(e,t,n,r,o,i,a,s,l,c,u,d){e.publicKey=d.getAccountDetailsFromSession("publicKey"),e.accountRs=d.getAccountDetailsFromSession("accountRs"),e.makeWelcomFaucetCall=function(n){var r=n.email;t.welcomeFaucetCall(r,e.publicKey,e.accountRs).then(function(t){e.$emit("close-modal")},function(e){a.addAlert({type:"danger",msg:"Unable to add new user"},s.welcomeFaucetModalAlert)})},e.closeForm=function(){e.$emit("close-modal")}}]),angular.module("poll",["baseClient","crypto","ui.router","ui.bootstrap","multiStepForm","node","assets","currencies","options"]),angular.module("poll").constant("pollConfig",{pollEndPoint:"api"}),angular.module("poll").config(["RestangularProvider","pollConfig","$stateProvider","$urlRouterProvider",function(e,t,n,r){e.setRestangularFields({options:"_options"}),n.state("client.signedin.polls",{url:"^/polls",templateUrl:"./polls/views/main.html",abstract:!0}).state("client.signedin.polls.polls",{url:"^/polls/polls",templateUrl:"./polls/views/polls.html",controller:"PollsCtrl"}).state("client.signedin.polls.mypolls",{url:"^/polls/polls",templateUrl:"./polls/views/mypolls.html",controller:"MyPollsCtrl"})}]),angular.module("poll").service("PollService",["nodeConfig","SessionStorageService","NodeService","baseConfig","pollConfig","Restangular","TransactionService","$rootScope","OptionsService","controlConfig",function(e,t,n,r,o,i,a,s,l,c){function u(e,t){if(t)for(var n=t.length,r=0;r<n;r++)e[d(r)]=t[r];return e}function d(e){return e>9?"option"+e:"option0"+e}this.getPolls=function(e,t,r){i.setBaseUrl(n.getNodeUrl(l.getOption("CONNECTION_MODE"),l.getOption("RANDOMIZE_NODES")));var a={requestType:"getAllPolls",firstIndex:e,lastIndex:t,includeFinished:r};return i.all(o.pollEndPoint).customGET("",a)},this.getAccountPolls=function(e,t,r,a){i.setBaseUrl(n.getNodeUrl(l.getOption("CONNECTION_MODE"),l.getOption("RANDOMIZE_NODES")));var s={requestType:"getPolls",account:e,firstIndex:t,lastIndex:r,includeFinished:a};return i.all(o.pollEndPoint).customGET("",s)},this.getPoll=function(e){i.setBaseUrl(n.getNodeUrl(l.getOption("CONNECTION_MODE"),l.getOption("RANDOMIZE_NODES")));var t={requestType:"getPoll",poll:e};return i.all(o.pollEndPoint).customGET("",t)},this.getPollData=function(e){i.setBaseUrl(n.getNodeUrl(l.getOption("CONNECTION_MODE"),l.getOption("RANDOMIZE_NODES")));var t={requestType:"getPollResult",poll:e};return i.all(o.pollEndPoint).customGET("",t)},this.searchPolls=function(e,t,r){i.setBaseUrl(n.getNodeUrl(l.getOption("CONNECTION_MODE"),l.getOption("RANDOMIZE_NODES")));var o={requestType:"searchPolls",query:e,includeFinished:!0,firstIndex:t,lastIndex:r};return a.createTransaction(o)},this.castVote=function(e,t,o,s){i.setBaseUrl(n.getNodeUrl(l.getOption("CONNECTION_MODE"),l.getOption("RANDOMIZE_NODES")));for(var c={publicKey:e,requestType:"castVote",poll:t,feeTQT:parseInt(s*r.TOKEN_QUANTS,10),broadcast:"false",deadline:l.getOption("DEADLINE")},u=0;u<o.length;u++)c[o[u]]="1";return a.createTransaction(c)},this.getOptionName=d,this.createPoll=function(e){i.setBaseUrl(n.getNodeUrl(l.getOption("CONNECTION_MODE"),l.getOption("RANDOMIZE_NODES")));var o={requestType:"createPoll",publicKey:e.publicKey,name:e.name,description:e.description,feeTQT:parseInt(e.fee*r.TOKEN_QUANTS,10),deadline:l.getOption("DEADLINE"),broadcast:"false",minNumberOfOptions:e.minNumberOfOptions,maxNumberOfOptions:e.maxNumberOfOptions,minRangeValue:e.minRangeValue,maxRangeValue:e.maxRangeValue,minBalanceModel:e.minBalanceModel,holding:e.holding,minBalance:e.minBalance,finishHeight:e.finishHeight,votingModel:e.votingModel};(o=u(o,e.options),t.getFromSession(c.SESSION_ACCOUNT_CONTROL_HASCONTROL_KEY))&&(s.options.TX_HEIGHT+e.currentHeight>parseInt(e.finishHeight)&&(o.phasingFinishHeight=parseInt(e.finishHeight)-1e3));return a.createTransaction(o)},this.getPollVotes=function(e,t,r){i.setBaseUrl(n.getNodeUrl(l.getOption("CONNECTION_MODE"),l.getOption("RANDOMIZE_NODES")));var a={requestType:"getPollVotes",poll:e,includeWeights:"true",firstIndex:t,lastIndex:r,includeFinished:!0};return i.all(o.pollEndPoint).customGET("",a)}}]),angular.module("poll").controller("PollsMainCtrl",["$scope","PollService","amountTQTFilter","timestampFilter","DTOptionsBuilder","DTColumnBuilder","$uibModal","$compile","baseConfig","supplyFilter","searchTermFilter",function(e,t,n,r,o,i,a,s,l,c,u){e.openCreatePollModal=function(){a.open({animation:!0,templateUrl:"polls/modals/create-poll-form.html",size:"lg",controller:"PollsFormCtrl",resolve:{params:function(){return{}}}})},e.openPollDetailsModal=function(e){a.open({animation:!0,templateUrl:"polls/modals/poll.html",size:"lg",controller:"PollCtrl",windowClass:"poll-modal-window",resolve:{params:function(){return{pollId:e}}}})},e.openPollVotesModal=function(e){a.open({animation:!0,templateUrl:"polls/modals/poll-votes.html",size:"lg",controller:"PollVotesCtrl",windowClass:"poll-modal-window",resolve:{params:function(){return{pollId:e}}}})},e.openPollData=function(e){a.open({animation:!0,templateUrl:"polls/modals/poll-chart.html",size:"sm",controller:"PollChartCtrl",windowClass:"poll-result-modal-window",resolve:{params:function(){return{pollId:e}}}})},e.openCastVoteModal=function(e){a.open({animation:!0,templateUrl:"polls/modals/cast-vote-form.html",size:"lg",controller:"PollsFormCtrl",resolve:{params:function(){return{pollId:e}}}})},e.openSearchPollModal=function(){a.open({animation:!0,templateUrl:"polls/modals/search-poll-form.html",size:"lg",controller:"PollsFormCtrl",resolve:{params:function(){return{}}}})}}]),angular.module("poll").controller("PollsCtrl",["$scope","PollService","DTOptionsBuilder","DTColumnBuilder","$interval","$uibModal","$compile","votingModelFilter","amountTQTFilter","isEnabledFilter","baseConfig","searchTermFilter","replaceQuotesFilter","votingModelLabelFilter","SessionStorageService","pollDaysFilter",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g){e.includeFinished=!0,e.activePolls=function(){e.includeFinished=!1,e.reloadPolls()},e.allPolls=function(){e.includeFinished=!0,e.reloadPolls()},e.dtOptions=n.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("info",!1).withOption("ordering",!1).withOption("serverSide",!0).withDataProp("polls").withOption("processing",!0).withOption("ordering",!1).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){a(t)(e)}).withOption("ajax",function(n,r,o){var i=n.start+n.length-1;t.getPolls(n.start,i,e.includeFinished).then(function(e){r({iTotalRecords:1e3,iTotalDisplayRecords:1e3,polls:e.polls})})}).withDisplayLength(10).withBootstrap(),e.dtColumns=[r.newColumn("poll").withTitle("Details").notSortable().renderWith(function(e,t,n,r){return'<button type="button" class="btn btn-success btn-xs" ng-controller="PollsMainCtrl" ng-click="openPollDetailsModal(\''+e+'\')"> <i class="fa fa-reorder" aria-hidden="true" style="width:15px;"></i> </button>'}),r.newColumn("name").withTitle("Name").notSortable().renderWith(function(e,t,n,r){return e}),r.newColumn("votingModel").withTitle("Model").notSortable().renderWith(function(e,t,n,r){return m(e)}),r.newColumn("options").withTitle("Options").notSortable().renderWith(function(e,t,n,r){return e.length}),r.newColumn("finished").withTitle("Finished").notSortable().renderWith(function(e,t,n,r){return c(e)
}),r.newColumn("finishHeight").withTitle("Height").notSortable(),r.newColumn("finishHeight").withTitle("Days").notSortable().renderWith(function(e,t,n,r){var o=f.getFromSession(u.SESSION_CURRENT_BLOCK),i=0;return i=o&&o<e?(parseInt(e)-o)/1440:0,i<0&&(i=0),g(i.toLocaleString("en-US",{maximumFractionDigits:2,minimumFractionDigits:2}))}),r.newColumn("poll").withTitle("Actions").notSortable().renderWith(function(e,t,n,r){var o=!1;n.finished&&(o=!0);return'<button type="button" class="btn btn-default btn-xs"   popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover= "Result"  ng-controller="PollsMainCtrl" ng-click="openPollData(\''+e+'\')"> <i class="fa fa-area-chart" aria-hidden="true" style="width:15px;"></i> </button>&nbsp;<button type="button" class="btn btn-default btn-xs"   popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover= "Vote" ng-controller="PollsMainCtrl" ng-click="openCastVoteModal(\''+e+'\')" ng-disabled="'+o+'"> <i class="fa fa-signal" aria-hidden="true" style="width:15px;"></i> </button>&nbsp;<button type="button" class="btn btn-default btn-xs"   popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover= "Voters" ng-controller="PollsMainCtrl" ng-click="openPollVotesModal(\''+e+'\')" ng-disabled="'+o+'"> <i class="fa fa-user" aria-hidden="true" style="width:15px;"></i> </button>'})],e.dtInstanceCallback=function(t){e.dtInstance=t},e.reloadPolls=function(){e.dtInstance&&e.dtInstance._renderer.rerender()}}]),angular.module("poll").controller("MyPollsCtrl",["$scope","PollService","DTOptionsBuilder","DTColumnBuilder","$interval","$uibModal","$compile","votingModelFilter","amountTQTFilter","isEnabledFilter","baseConfig","CommonsService","searchTermFilter","votingModelLabelFilter","pollDaysFilter","SessionStorageService",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g){e.includeFinished=!0,e.activePolls=function(){e.includeFinished=!1,e.reloadPolls()},e.allPolls=function(){e.includeFinished=!0,e.reloadPolls()},e.dtOptions=n.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("info",!1).withOption("serverSide",!0).withDataProp("polls").withOption("processing",!0).withOption("ordering",!1).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){a(t)(e)}).withOption("ajax",function(n,r,o){var i=n.start+n.length-1,a=d.getAccountDetailsFromSession("accountId");t.getAccountPolls(a,n.start,i,e.includeFinished).then(function(e){r({iTotalRecords:1e3,iTotalDisplayRecords:1e3,polls:e.polls})})}).withDisplayLength(10).withBootstrap(),e.dtColumns=[r.newColumn("poll").withTitle("Details").notSortable().renderWith(function(e,t,n,r){return'<button type="button" class="btn btn-success btn-xs" ng-controller="PollsMainCtrl" ng-click="openPollDetailsModal(\''+e+'\')"> <i class="fa fa-reorder" aria-hidden="true" style="width:15px;"></i> </button>'}),r.newColumn("name").withTitle("Name").notSortable().renderWith(function(e,t,n,r){return e}),r.newColumn("votingModel").withTitle("Model").notSortable().renderWith(function(e,t,n,r){return m(e)}),r.newColumn("options").withTitle("Options").notSortable().renderWith(function(e,t,n,r){return e.length}),r.newColumn("finished").withTitle("Finished").notSortable().renderWith(function(e,t,n,r){return c(e)}),r.newColumn("finishHeight").withTitle("Height").notSortable(),r.newColumn("finishHeight").withTitle("Days").notSortable().renderWith(function(e,t,n,r){var o=g.getFromSession(u.SESSION_CURRENT_BLOCK),i=0;return i=o&&o<e?(parseInt(e)-o)/1440:0,i<0&&(i=0),f(i.toLocaleString("en-US",{maximumFractionDigits:2,minimumFractionDigits:2}))}),r.newColumn("poll").withTitle("Actions").notSortable().renderWith(function(e,t,n,r){var o=!1;n.finished&&(o=!0);return'<button type="button" class="btn btn-default btn-xs"   popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover= "Result" ng-controller="PollsMainCtrl" ng-click="openPollData(\''+e+'\')"> <i class="fa fa-area-chart" aria-hidden="true" style="width:15px;"></i> </button>&nbsp;<button type="button" class="btn btn-default btn-xs"   popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover= "Vote" ng-controller="PollsMainCtrl" ng-click="openCastVoteModal(\''+e+'\')" ng-disabled="'+o+'"> <i class="fa fa-signal" aria-hidden="true" style="width:15px;"></i> </button>&nbsp;<button type="button" class="btn btn-default btn-xs"   popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover= "Voters" ng-controller="PollsMainCtrl" ng-click="openPollVotesModal(\''+e+'\')" ng-disabled="'+o+'"> <i class="fa fa-user" aria-hidden="true" style="width:15px;"></i> </button>'})],e.dtInstanceCallback=function(t){e.dtInstance=t},e.reloadPolls=function(){e.dtInstance&&e.dtInstance._renderer.rerender()}}]),angular.module("poll").controller("PollsFormCtrl",["$scope","$uibModalInstance","params",function(e,t,n){e.cancel=function(){t.dismiss("cancel")},e.$on("close-modal",function(){t.dismiss("cancel")});var r=[{templateUrl:"polls/modals/create-poll-details.html",title:"Create Poll Step 1",controller:"CreatePollFormController",isolatedScope:!0,data:n},{templateUrl:"polls/modals/create-poll-details-2.html",title:"Create Poll Step 2",controller:"CreatePollFormController",isolatedScope:!0,data:n},{templateUrl:"polls/modals/create-poll-confirm.html",title:"Create Poll Confirmation",controller:"CreatePollFormController",isolatedScope:!0}],o=[{templateUrl:"polls/modals/cast-vote-details.html",title:"Cast Vote Details",controller:"CastVoteFormController",isolatedScope:!0,data:n},{templateUrl:"polls/modals/cast-vote-confirm.html",title:"Cast Vote Confirmation",controller:"CastVoteFormController",isolatedScope:!0}],i=[{templateUrl:"polls/modals/search-poll-details.html",title:"Search Poll Details",controller:"SearchPollFormCtrl",isolatedScope:!0,data:n},{templateUrl:"polls/modals/search-poll-confirm.html",title:"Search Poll Results",controller:"SearchPollFormCtrl",isolatedScope:!0}];e.steps={},e.steps.createPollForm=r,e.steps.castVoteForm=o,e.steps.searchPollForm=i}]),angular.module("poll").controller("PollCtrl",["$scope","PollService","$uibModalInstance","params",function(e,t,n,r){e.pollId=r.pollId,e.loadDetails=function(){t.getPoll(e.pollId).then(function(t){e.poll=t})},e.cancel=function(){n.dismiss("cancel")}}]),angular.module("poll").controller("PollVotesCtrl",["$scope","PollService","DTOptionsBuilder","DTColumnBuilder","$interval","$uibModal","$compile","searchTermFilter","$uibModalInstance","params",function(e,t,n,r,o,i,a,s,l,c){e.pollId=c.pollId,e.cancel=function(){l.dismiss("cancel")},e.dtOptions=n.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("info",!1).withOption("serverSide",!0).withDataProp("votes").withOption("processing",!0).withOption("ordering",!1).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){a(t)(e)}).withOption("ajax",function(n,r,o){var i=n.start+n.length-1;t.getPollVotes(e.pollId,n.start,i).then(function(e){r({iTotalRecords:1e3,iTotalDisplayRecords:1e3,votes:e.votes})})}).withDisplayLength(5).withBootstrap(),e.dtColumns=[r.newColumn("voterRS").withTitle("Voter").notSortable().renderWith(function(e,t,n,r){return s(e)}),r.newColumn("transaction").withTitle("Details").notSortable().renderWith(function(e,t,n,r){return'<button type="button" class="btn btn-success btn-xs" ng-controller="SearchCtrl" ng-click="searchValue(\''+e+'\')"><i class="fa fa-list-ul" aria-hidden="true"></i></button>'})]}]),angular.module("poll").controller("PollChartCtrl",["$scope","PollService","DTOptionsBuilder","DTColumnBuilder","$compile","$uibModalInstance","params","baseConfig","numberStringFilter","$q",function(e,t,n,r,o,i,a,s,l,c){function u(e,t){for(var n=0,r=0;r<e.length;r++)n+=e[r].result/t;return n}function d(e,t,n){var r=1;0!==n&&(r=s.TOKEN_QUANTS);for(var o=[],i=u(t,r),a=0;a<e.length;a++){var l={},c=t[a];l.optionName=e[a],l.result=c.result/r||0,l.weight=c.weight/r,l.percentage=0!==i?100*l.result/i:0,o.push(l)}return o}function p(e,t,n){for(var r=t.length,o=[],i=0;i<r;i++){var a={};a.key=e[i],a.value=t[i].result/n,a.value||(a.value=0),o[i]=a}return o}e.pollId=a.pollId,e.loadPollResults=function(){var n=t.getPoll(e.pollId),r=t.getPollData(e.pollId);c.all([n,r]).then(function(t){var n=t[0],r=t[1];e.pollName=n.name,e.pollDescription=n.description,e.pollResults=r,e.pollLabels=r.options;var o=1;0!==r.votingModel&&(o=s.TOKEN_QUANTS),e.pollData=p(r.options,r.results,o),e.total=u(r.results,o),e.pollResultTableDate=d(r.options,r.results,r.votingModel)})},e.options={chart:{type:"pieChart",height:350,showLegend:!0,noData:"No Votes",margin:{top:30,right:75,bottom:50,left:75},bars:{forceY:[0]},bars2:{forceY:[0]},xAxis:{axisLabel:"X Axis"},x2Axis:{showMaxMin:!1},y1Axis:{axisLabel:"Y1 Axis",axisLabelDistance:12},y2Axis:{axisLabel:"Y2 Axis"},x:function(e){return e.key},y:function(e){return e.value},tooltip:{valueFormatter:function(t){return l(100*t/e.total)+" %"}}}},e.cancel=function(){i.dismiss("cancel")}}]),angular.module("poll").controller("SearchPollFormCtrl",["$scope","PollService","SessionStorageService","$state","DTOptionsBuilder","isEnabledFilter","DTColumnBuilder","searchTermFilter","$compile","multiStepFormScope","$validation","supplyFilter","votingModelFilter","amountTQTFilter","$q",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f){e.searchPollForm={},e.onSubmit=function(){u.validate(e.searchPollForm),e.searchPollForm.$valid&&e.$nextStep()},e.searchPollForm=angular.copy(c.searchPollForm),e.$on("$destroy",function(){c.searchPollForm=angular.copy(e.searchPollForm)}),e.dtOptions=o.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("info",!1).withOption("ordering",!1).withOption("serverSide",!0).withDataProp("polls").withOption("processing",!0).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){l(t)(e)}).withOption("ajax",function(n,r,o){var i=e.searchPollForm.query,a=t.searchPolls(i),s=t.getPoll(i);f.all([a,s]).then(function(e){e[1].poll&&(e[0].polls=e[0].polls||[],e[0].polls.push(e[1])),r({iTotalRecords:e[0].polls.length,iTotalDisplayRecords:e[0].polls.length,polls:e[0].polls})})}).withDisplayLength(10).withBootstrap(),e.dtColumns=[a.newColumn("poll").withTitle("Details").notSortable().renderWith(function(e,t,n,r){return'<button type="button" class="btn btn-success btn-sm" ng-controller="PollsMainCtrl" ng-click="openPollDetailsModal(\''+e+'\')"> <i class="fa fa-reorder" aria-hidden="true"></i> </button>'}),a.newColumn("name").withTitle("Name").notSortable().renderWith(function(e,t,n,r){return e}),a.newColumn("votingModel").withTitle("Model").notSortable().renderWith(function(e,t,n,r){return p(e)}),a.newColumn("finished").withTitle("Finished").notSortable().renderWith(function(e,t,n,r){return i(e)}),a.newColumn("poll").withTitle("Action").notSortable().renderWith(function(e,t,n,r){var o=!1;return n.finished&&(o=!0),'<button type="button" class="btn btn-default btn-sm" ng-controller="PollsMainCtrl" ng-click="openPollData(\''+e+'\')"> <i class="fa fa-area-chart" aria-hidden="true"></i> </button>&nbsp;<button type="button" class="btn btn-default btn-sm" ng-controller="PollsMainCtrl" ng-click="openCastVoteModal(\''+e+'\')" ng-disabled="'+o+'"> <i class="fa fa-signal" aria-hidden="true"></i> </button>&nbsp;<button type="button" class="btn btn-default btn-sm" ng-controller="PollsMainCtrl" ng-click="openPollVotesModal(\''+e+'\')"  ng-disabled="'+o+'"> <i class="fa fa-server" aria-hidden="true"></i> </button>'})],e.dtInstanceCallback=function(t){e.dtInstance=t}}]),angular.module("poll").controller("CreatePollFormController",["$scope","PollService","SessionStorageService","$state","CryptoService","loginConfig","AlertService","alertConfig","$validation","$uibModal","multiStepFormScope","FeeService","$rootScope","CommonsService","AssetsService","CurrenciesService",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g){e.createPollForm=angular.copy(u.createPollForm),e.createPollForm2=angular.copy(u.createPollForm2),e.$on("$destroy",function(){u.createPollForm=angular.copy(e.createPollForm),u.createPollForm2=angular.copy(e.createPollForm2)}),e.finishHeight=1440,e.increment=function(){if(e.finishHeight>=2e4)return void(e.finishHeight=2e4);e.finishHeight=e.finishHeight+1440,e.createPollForm2.finishHeight=e.finishHeight},e.decrement=function(){if(e.finishHeight<=1440)return void(e.finishHeight=1440);e.finishHeight=e.finishHeight-1440,e.createPollForm2.finishHeight=e.finishHeight},e.max=function(){e.finishHeight=2e4,e.createPollForm2.finishHeight=2e4},e.min=function(){e.finishHeight=1440,e.createPollForm2.finishHeight=1440},e.addNewOption=function(){e.createPollForm2.pollOptions=e.createPollForm2.pollOptions||[],e.createPollForm2.pollOptions.length>=10?a.addAlert({type:"danger",msg:"You can add maximum 10 options"},s.createPollModalAlert):e.createPollForm2.pollOptions.push({})},e.getAsset=function(t){f.getAsset(t).then(function(t){e.createPollForm.asset=t})},e.getCurrency=function(t){g.getCurrency(t).then(function(t){e.createPollForm.currency=t})},e.getBlockChainStatus=function(){g.getBlockChainStatus().then(function(t){e.createPollForm2.currentHeight=t.numberOfBlocks})},e.hasPrivateKeyInSession=function(){return!!n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY)},e.votingOptions=[{label:"Account",value:"0"},{label:"Balance",value:"1"},{label:"Asset",value:"2"},{label:"Currency",value:"3"}],e.createPoll=function(){var r=u.createPollForm,l=u.createPollForm2,c={};c.name=r.name,c.description=r.description,c.votingModel=r.votingModel,c.holding=r.holding,"3"===c.votingModel&&(c.holding=r.currency.currency),c.minBalanceModel=r.votingModel,c.minBalance=parseInt(1e8*r.minbalance),c.minNumberOfOptions=l.minNumberOfOptions,c.maxNumberOfOptions=l.maxNumberOfOptions,c.minRangeValue=0,c.maxRangeValue=l.maxNumberOfOptions,c.fee=1,c.options=[];for(var d=0;d<l.pollOptions.length;d++)c.options[d]=l.pollOptions[d].value;c.publicKey=m.getAccountDetailsFromSession("publicKey"),c.finishHeight=e.createPollForm2.currentHeight+l.finishHeight,c.currentHeight=e.createPollForm2.currentHeight;var p,f=r.secretPhrase;p=f?o.secretPhraseToPrivateKey(f):n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY),e.createPollPromise=t.createPoll(c).then(function(t){if(t.errorCode)a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},s.createPollModalAlert);else{var n=t.unsignedTransactionBytes,r=o.signatureHex(n,p);e.transactionBytes=o.signTransactionHex(n,r),e.tx_fee=t.transactionJSON.feeTQT/1e8,e.tx_amount=t.transactionJSON.amountTQT/1e8,e.tx_total=e.tx_fee+e.tx_amount,e.validBytes=!0}},function(e){a.addAlert(a.getNoConnectionMessage(e),s.createPollModalAlert)})},e.broadcastTransaction=function(t){e.createPollPromise=m.broadcastTransaction(t).then(function(t){e.$emit("close-modal"),p.$broadcast("reload-dashboard"),t.errorCode?a.addAlert({type:"danger",msg:"Unable to broadcast transaction. Reason: "+t.errorDescription}):a.addAlert({type:"success",msg:"Transaction succesfull broadcasted with Id : "+t.transaction})},function(e){a.addAlert(a.getNoConnectionMessage(e),s.createPollModalAlert)})}}]),angular.module("poll").controller("CastVoteFormController",["$scope","PollService","SessionStorageService","$state","CryptoService","loginConfig","AlertService","alertConfig","$validation","$uibModal","multiStepFormScope","FeeService","$rootScope","CommonsService",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m){function f(t){for(var n=e.castVoteForm.poll.options,r=t.length||0,o=[],i=0;i<r;i++){var a=n.indexOf(t[i]);o.push(g(a))}return o}function g(e){if(-1!==e)return e>9?"vote"+e:"vote0"+e}e.castVoteForm=angular.copy(u.castVoteForm),e.$on("$destroy",function(){u.castVoteForm=angular.copy(e.castVoteForm)}),e.nextStep=function(){var t=e.castVoteForm.poll,n=e.castVoteForm.options,r=n.length;t.minNumberOfOptions<=r&&t.maxNumberOfOptions>=r?e.$nextStep():a.addAlert({type:"danger",msg:"You have to select at least min. "+t.minNumberOfOptions+" and max. "+t.maxNumberOfOptions+" options."},s.castVoteModalAlert)},e.initStep1=function(){var n=e.$getActiveStep().data;n&&(e.castVoteForm.pollId=n.pollId,t.getPoll(n.pollId).then(function(t){e.options=t.options,e.castVoteForm.poll=t}))},e.hasPrivateKeyInSession=function(){return!!n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY)},e.castVote=function(){var r,l=u.castVoteForm,c=m.getAccountDetailsFromSession("publicKey"),d=l.pollId,p=l.options,g=l.secretPhrase,h=f(p);r=g?o.secretPhraseToPrivateKey(g):n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY),e.castVotePromise=t.castVote(c,d,h,1).then(function(t){if(t.errorCode)a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},s.castVoteModalAlert);else{var n=t.unsignedTransactionBytes,i=o.signatureHex(n,r);e.transactionBytes=o.signTransactionHex(n,i),e.transactionJSON=t.transactionJSON,e.tx_fee=t.transactionJSON.feeTQT/1e8,e.tx_amount=t.transactionJSON.amountTQT/1e8,e.tx_total=e.tx_fee+e.tx_amount,e.validBytes=!0}},function(e){a.addAlert(a.getNoConnectionMessage(e),s.castVoteModalAlert)})},e.broadcastTransaction=function(t){e.castVotePromise=m.broadcastTransaction(t).then(function(t){e.$emit("close-modal"),p.$broadcast("reload-dashboard"),t.errorCode?a.addAlert({type:"danger",msg:"Unable to broadcast transaction. Reason: "+t.errorDescription}):a.addAlert({type:"success",msg:"Transaction succesfull broadcasted with Id : "+t.transaction})},function(e){a.addAlert(a.getNoConnectionMessage(e),s.castVoteModalAlert)})}}]),angular.module("messages",["baseClient","crypto","ui.router","ui.bootstrap","multiStepForm","node","options"]),angular.module("messages").constant("messagesConfig",{messagesEndPoint:"api"}),angular.module("messages").config(["RestangularProvider","messagesConfig","$stateProvider","$urlRouterProvider",function(e,t,n,r){e.setRestangularFields({options:"_options"}),n.state("client.signedin.messages",{url:"^/messages",templateUrl:"./messages/views/main.html",abstract:!0}).state("client.signedin.messages.mymessages",{url:"^/messages/mymessages",templateUrl:"./messages/views/mymessages.html",controller:"MessagesCtrl"})}]),angular.module("messages").service("MessageService",["nodeConfig","SessionStorageService","NodeService","baseConfig","messagesConfig","Restangular","loginConfig","TransactionService","$rootScope","OptionsService",function(e,t,n,r,o,i,a,s,l,c){this.getAccountDetailsFromSession=function(e){var n=t.getFromSession(a.SESSION_ACCOUNT_DETAILS_KEY);return e?n[e]:n},this.getMessages=function(e,t,r,a,s){i.setBaseUrl(n.getNodeUrl(c.getOption("CONNECTION_MODE"),c.getOption("RANDOMIZE_NODES")));var l={requestType:"getBlockchainTransactions",account:e,firstIndex:t,lastIndex:r,type:a,subtype:s,withMessage:!0};return i.all(o.messagesEndPoint).customGET("",l)},this.getAccountDetails=function(e){i.setBaseUrl(n.getNodeUrl(c.getOption("CONNECTION_MODE"),c.getOption("RANDOMIZE_NODES")));var t={requestType:"getAccount",account:e};return i.all(o.messagesEndPoint).customGET("",t)},this.sendMessage=function(e,t,o,a,l,u,d){i.setBaseUrl(n.getNodeUrl(c.getOption("CONNECTION_MODE"),c.getOption("RANDOMIZE_NODES")));var p={requestType:"sendMessage",publicKey:e,recipient:t,encryptedMessageData:a,encryptedMessageNonce:l,messageToEncryptIsText:"true",compressMessageToEncrypt:"true",encryptedMessageIsPrunable:d,feeTQT:parseInt(o*r.TOKEN_QUANTS,10),recipientPublicKey:u,deadline:c.getOption("DEADLINE"),broadcast:"false"};return s.createTransaction(p)},this.broadcastMessage=function(e,t){i.setBaseUrl(n.getNodeUrl(c.getOption("CONNECTION_MODE"),c.getOption("RANDOMIZE_NODES")));var r={requestType:"broadcastTransaction",transactionBytes:e};return t&&(r.prunableAttachmentJSON=JSON.stringify(t)),i.all(o.messagesEndPoint).customPOST("","",r,"")}}]),angular.module("messages").controller("MessagesCtrl",["$scope","SessionStorageService","NodeService","loginConfig","nodeConfig","DTOptionsBuilder","DTColumnBuilder","MessageService","timestampFilter","amountTQTFilter","$compile","transactionIconSubTypeFilter","transactionConfFilter","transactionTypeFilter","searchTermFilter","baseConfig","isEnabledFilter","isMessageFilter","hasMessageFilter","CommonsService","hasMessageDirectionFilter","$uibModal","isEnabledFilter",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g,h,S,C,T,b,y,h){e.filter_type="",e.filter_subtype="",e.filterMessage=function(){e.filter_type="1",e.filter_subtype="0",e.reloadMessages()},e.filterPayment=function(){e.filter_type="0",e.filter_subtype="",e.reloadMessages()},e.filterNone=function(){e.filter_type="",e.filter_subtype="",e.reloadMessages()},e.dtOptionsMessages=i.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("serverSide",!0).withDataProp("data").withOption("responsive",!0).withOption("processing",!0).withOption("paging",!0).withOption("ordering",!1).withOption("info",!1).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){u(t)(e)}).withOption("ajax",function(t,n,r){var o=t.start+t.length-1,i=T.getAccountDetailsFromSession("accountId");s.getMessages(i,t.start,o,e.filter_type,e.filter_subtype).then(function(t){e.data=t.transactions,n({iTotalRecords:1e3,iTotalDisplayRecords:1e3,data:t.transactions})})}).withDisplayLength(10).withBootstrap(),e.dtColumnsMessages=[a.newColumn("transaction").withTitle("Details").notSortable().renderWith(function(e,t,n,r){return'<button type="button" class="btn btn-success btn-xs" ng-controller="SearchCtrl" ng-click="searchValue(\''+n.fullHash+'\')"><i class="fa fa-list-ul" aria-hidden="true" style="width:15px;"></i></button>'}),a.newColumn("timestamp").withTitle("Date").notSortable().renderWith(function(e,t,n,r){return l(e)}),a.newColumn("type").withTitle("Type").notSortable().renderWith(function(e,t,n,r){return d(e,n.subtype)}),a.newColumn("confirmations").withTitle("Conf.").notSortable().renderWith(function(e,t,n,r){return p(e)}),a.newColumn("senderRS").withTitle("Sender").notSortable().withOption("defaultContent"," ").renderWith(function(e,t,n,r){return e?f(e):e}),a.newColumn("phased").withTitle("Send").notSortable().renderWith(function(e,t,n,r){var o=T.getAccountDetailsFromSession("accountRs");return b(n,o)}),a.newColumn("phased").withTitle("Phased").notSortable().renderWith(function(e,t,n,r){return h(e)}),a.newColumn("phased").withTitle("Prunable").notSortable().renderWith(function(e,t,n,r){var o=!1;return _.has(n.attachment,"version.PrunableEncryptedMessage")&&(o=!0),h(o)}),a.newColumn("recipientRS").withTitle("Recipient").notSortable().withOption("defaultContent"," ").renderWith(function(e,t,n,r){return e?f(e):""}),a.newColumn("recipientRS").withTitle("Action").notSortable().renderWith(function(e,t,n,r){var o=T.getAccountDetailsFromSession("accountRs"),i=!1,a=e;o===n.senderRS?i=!0:a=n.senderRS;return'<button class="btn btn-success btn-xs"  popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover= "Open Message" ng-controller="MessagesCtrl" ng-click="openReadMessageModal(\''+r.row+'\')"> <i class="fa fa-envelope-open-o" aria-hidden="true" style="width:15px;"></i></button>&nbsp;&nbsp;<button  class="btn btn-default btn-xs"  popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover= "Reply" ng-controller="MessagesCtrl" ng-disabled="'+i+'" ng-click="openSendMessageModal(\''+a+'\')"> <i class="fa fa-reply" aria-hidden="true" style="width:15px;"></i> </button>'})],e.openSendMessageModal=function(e){y.open({animation:!0,templateUrl:"messages/modals/send-message-form.html",size:"lg",controller:"StepMessageFormCtrl",resolve:{params:function(){return{recipientRS:e}}}})},e.openReadMessageModal=function(t){y.open({animation:!0,templateUrl:"messages/modals/read-message-form.html",size:"lg",controller:"StepMessageFormCtrl",resolve:{params:function(){return e.data[t]}}})},e.reloadMessages=function(){e.dtInstanceMessages&&e.dtInstanceMessages._renderer.rerender()},e.dtInstanceMessagesCallback=function(t){e.dtInstanceMessages=t}}]),angular.module("messages").controller("StepMessageFormCtrl",["$scope","$uibModalInstance","params",function(e,t,n){e.cancel=function(){t.dismiss("cancel")},e.$on("close-modal",function(){t.dismiss("cancel")});var r=[{templateUrl:"messages/modals/send-message-details.html",title:"Send Message Details",controller:"SendMessageFormCtrl",isolatedScope:!0,data:n},{templateUrl:"messages/modals/send-message-confirm.html",title:"Send Message Confirmation",controller:"SendMessageFormCtrl",isolatedScope:!0}],o=[{templateUrl:"messages/modals/read-message-details.html",title:"Read Message Details",controller:"ReadMessageFormCtrl",isolatedScope:!0,data:n},{templateUrl:"messages/modals/read-message-confirm.html",title:"Reply Message Confirmation",controller:"ReadMessageFormCtrl",isolatedScope:!0}];e.steps={},e.steps.sendMessageForm=r,e.steps.readMessageForm=o}]),angular.module("messages").controller("SendMessageFormCtrl",["$scope","MessageService","SessionStorageService","$state","CryptoService","loginConfig","AlertService","alertConfig","$validation","$uibModal","multiStepFormScope","FeeService","$rootScope",function(e,t,n,r,o,i,a,s,l,c,u,d,p){e.sendMessageForm=angular.copy(u.sendMessageForm),e.validForm=!1,e.validBytes=!1,e.hasPublicKeyAdded=!1,e.hasMessageAdded=!1,e.initStep1=function(){var t=e.$getActiveStep().data;t.recipientRS&&(e.sendMessageForm.recipientRS=t.recipientRS)},e.$on("$destroy",function(){u.sendMessageForm=angular.copy(e.sendMessageForm)}),e.$watchCollection("sendMessageForm",function(t){var n=d.getSetAccountFee(t.message);(!e.sendMessageForm.fee||e.sendMessageForm.fee<n)&&(e.sendMessageForm.fee=n)}),e.isPrunable=[{label:"On Chain (160 chars.)",value:"false"},{label:"Off Chain (24k chars.)",value:"true"}],e.openAddressBookModal=function(){c.open({animation:!0,templateUrl:"addressbook/views/addressbook-light.html",controller:"AddressBookCtrl",resolve:{params:function(){return{closeOnClick:!0}}}}).result.then(function(t){e.sendMessageForm.recipientRS=t.accountRS})},e.hasPrivateKeyInSession=function(){return!!n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY)};var m=function(n,r){e.sendMessagePromise=t.sendMessage(n.senderPublicKey,n.recipientRS,1,n.data,n.nonce,n.recipientPublicKey,n.prunable).then(function(t){if(!t.errorCode){var n=t.unsignedTransactionBytes,i=o.signatureHex(n,r),l=o.signTransactionHex(n,i);return e.transactionBytes=l,e.tx_fee=t.transactionJSON.feeTQT/1e8,e.tx_amount=t.transactionJSON.amountTQT/1e8,e.tx_total=e.tx_fee+e.tx_amount,e.prunableAttachmentJSON=t.transactionJSON.attachment,e.validBytes=!0,l}a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},s.sendMessageModalAlert)},function(e){a.addAlert(a.getNoConnectionMessage(e),s.sendMessageModalAlert)})};e.getAndVerifyAccount=function(r){var l=u.sendMessageForm,c=l.recipientRS,d=1,p=l.secretPhrase,f=l.message,g=l.pubkey,h=l.prunable,S=!1,C=!1,T=!1;g&&g.length>0&&(S=!0),f&&f.length>0&&(C=!0),p&&p.length>0&&(T=!0),d||(d=1),e.hasPublicKeyAdded=S,e.hasMessageAdded=C;var b,y=t.getAccountDetailsFromSession("publicKey");b=T?o.secretPhraseToPrivateKey(p):n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY),e.sendMessagePromise=t.getAccountDetails(c).then(function(t){var n=t.publicKey;if(!n&&S&&(n=g),t.errorCode&&5!==t.errorCode)a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},s.sendMessageModalAlert);else{if(e.accountDetails=t,!n&&!S&&C)return void a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: This account has no visible public key because it never had any outbound transaction. Encrypted messages are not available without a public key. Ask the account holder for his public key and add the key on the former page to this transaction"},s.sendMessageModalAlert);var r={data:"",nonce:""};C?(n||(n=g),r=o.encryptMessage(f,b,n),e.encrypted=JSON.stringify(r)):e.encrypted=r;var i={senderPublicKey:y,recipientRS:c,fee:d,data:r.data,nonce:r.nonce,recipientPublicKey:n,prunable:h};m(i,b),""===e.encrypted.data&&(e.encrypted="")}},function(e){a.addAlert(a.getNoConnectionMessage(e),s.sendMessageModalAlert)})},e.broadcastMessage=function(n,r){e.sendMessagePromise=t.broadcastMessage(n,r).then(function(t){e.$emit("close-modal"),p.$broadcast("reload-dashboard"),t.errorCode?a.addAlert({type:"danger",msg:"Unable to broadcast transaction. Reason: "+t.errorDescription}):a.addAlert({type:"success",msg:"Transaction succesfull broadcasted with Id : "+t.transaction})},function(e){a.addAlert(a.getNoConnectionMessage(e),s.sendMessageModalAlert)})}}]),angular.module("messages").controller("ReadMessageFormCtrl",["$scope","$state","$rootScope","CommonsService","SessionStorageService","loginConfig","MessageService","alertConfig","AlertService","CryptoService","multiStepFormScope",function(e,t,n,r,o,i,a,s,l,c,u){e.$on("$destroy",function(){u.sendMessageForm=angular.copy(e.sendMessageForm)}),e.message="",e.readMessage=function(){var t=e.$getActiveStep().data;e.params=t;try{var n=t.attachment.encryptedMessage.data,u=t.attachment.encryptedMessage.nonce,d=r.getAccountDetailsFromSession("accountRs"),p=o.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY),m=t.senderRS,f=(t.recipientRS,t.senderPublicKey),g=""}catch(t){return void(e.message="Sorry, an error has occurred: "+t.message)}e.readMessagePromise=a.getAccountDetails(t.recipientRS).then(function(t){if(t.errorCode)l.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},s.readMessageModalAlert);else{g=t.publicKey;var r;r=d===m?c.decryptMessage(n,u,p,g):c.decryptMessage(n,u,p,f),e.message="string"==typeof r?r:"Non readable message string."}},function(e){l.addAlert(l.getNoConnectionMessage(e),s.readMessageModalAlert)})}}]),angular.module("aliases",["baseClient","crypto","ui.router","ui.bootstrap","multiStepForm","node","options"]),angular.module("aliases").constant("aliasesConfig",{aliasesEndPoint:"api"}),angular.module("aliases").config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("client.signedin.aliases",{url:"^/aliases",templateUrl:"./aliases/views/main.html",abstract:!0}).state("client.signedin.aliases.myaliases",{url:"^/aliases/myaliases",templateUrl:"./aliases/views/myaliases.html",controller:"MyAliasesCtrl"}).state("client.signedin.aliases.openoffers",{url:"^/aliases/openoffers",templateUrl:"./aliases/views/openoffers.html",controller:"AliasesOpenOffersCtrl"}).state("client.signedin.aliases.privateoffers",{url:"^/aliases/privateoffers",templateUrl:"./aliases/views/privateoffers.html",controller:"AliasesPrivateOffersCtrl"}).state("client.signedin.aliases.publicoffers",{url:"^/aliases/publicoffers",templateUrl:"./aliases/views/publicoffers.html",controller:"AliasesPublicOffersCtrl"})}]),angular.module("aliases").service("AliasService",["nodeConfig","SessionStorageService","NodeService","baseConfig","aliasesConfig","Restangular","loginConfig","CryptoService","TransactionService","$rootScope","OptionsService",function(e,t,n,r,o,i,a,s,l,c,u){this.getAccountAliases=function(e,t,r){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE"),u.getOption("RANDOMIZE_NODES")));var a={requestType:"getAliases",account:e,firstIndex:t,lastIndex:r};return i.all(o.aliasesEndPoint).customGET("",a)},this.setAlias=function(e,t,o,a){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE"),u.getOption("RANDOMIZE_NODES")));var s=o,c={publicKey:e,requestType:"setAlias",aliasName:t,aliasURI:s,feeTQT:parseInt(a*r.TOKEN_QUANTS,10),broadcast:"false",deadline:u.getOption("DEADLINE")};return l.createTransaction(c)},this.deleteAlias=function(e,t,o){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE"),u.getOption("RANDOMIZE_NODES")));var a={publicKey:e,requestType:"deleteAlias",aliasName:t,feeTQT:parseInt(o*r.TOKEN_QUANTS,10),broadcast:"false",deadline:u.getOption("DEADLINE")};return l.createTransaction(a)},this.searchAlias=function(e,t,r){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE"),u.getOption("RANDOMIZE_NODES")));var a={requestType:"getAliasesLike",aliasPrefix:e,firstIndex:t,lastIndex:r};return i.all(o.aliasesEndPoint).customGET("",a)},this.sellAlias=function(e,t,o,a,s){
i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE"),u.getOption("RANDOMIZE_NODES")));var c={publicKey:e,requestType:"sellAlias",aliasName:t,priceTQT:a,recipient:o,feeTQT:parseInt(s*r.TOKEN_QUANTS,10),broadcast:"false",deadline:u.getOption("DEADLINE")};return l.createTransaction(c)},this.cancelAlias=function(e,t,o,a){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE"),u.getOption("RANDOMIZE_NODES")));var s={publicKey:e,requestType:"sellAlias",aliasName:t,priceTQT:"0",recipient:o,feeTQT:parseInt(a*r.TOKEN_QUANTS,10),broadcast:"false",deadline:u.getOption("DEADLINE")};return l.createTransaction(s)},this.buyAlias=function(e,t,o,a){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE"),u.getOption("RANDOMIZE_NODES")));var s={publicKey:e,requestType:"buyAlias",aliasName:t,amountTQT:parseInt(o),feeTQT:parseInt(a*r.TOKEN_QUANTS,10),broadcast:"false",deadline:u.getOption("DEADLINE")};return l.createTransaction(s)},this.getAliasesOpenOffers=function(e,t,r){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE"),u.getOption("RANDOMIZE_NODES")));var a={requestType:"getAliasesOpenOffers",account:e,firstIndex:t,lastIndex:r};return i.all(o.aliasesEndPoint).customGET("",a)},this.getAliasesPrivateOffers=function(e,t,r){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE"),u.getOption("RANDOMIZE_NODES")));var a={requestType:"getAliasesPrivateOffers",account:e,firstIndex:t,lastIndex:r};return i.all(o.aliasesEndPoint).customGET("",a)},this.getAliasesPublicOffers=function(e,t,r,a,s){i.setBaseUrl(n.getNodeUrl(u.getOption("CONNECTION_MODE"),u.getOption("RANDOMIZE_NODES")));var l={requestType:"getAliasesPublicOffers",firstIndex:t,lastIndex:r,order:a,orderColumn:s};return i.all(o.aliasesEndPoint).customGET("",l)}}]),angular.module("aliases").controller("AliasesMainCtrl",["$scope","AliasService","amountTQTFilter","timestampFilter","DTOptionsBuilder","DTColumnBuilder","$uibModal","$compile","baseConfig","supplyFilter","searchTermFilter",function(e,t,n,r,o,i,a,s,l,c,u){e.openSetAliasModal=function(e){a.open({animation:!0,templateUrl:"aliases/modals/set-alias-form.html",size:"lg",controller:"AliasesFormCtrl",resolve:{params:function(){return{name:e}}}})},e.openSellAliasModal=function(e,t){a.open({animation:!0,templateUrl:"aliases/modals/sell-alias-form.html",size:"lg",controller:"AliasesFormCtrl",resolve:{params:function(){return{name:e,uri:t}}}})},e.openBuyAliasModal=function(e,t){a.open({animation:!0,templateUrl:"aliases/modals/buy-alias-form.html",size:"lg",controller:"AliasesFormCtrl",resolve:{params:function(){return{name:e,amount:t}}}})},e.openSearchAliasModal=function(){a.open({animation:!0,templateUrl:"aliases/modals/search-alias-form.html",size:"lg",controller:"AliasesFormCtrl",resolve:{params:function(){return{}}}})},e.openDeleteAliasModal=function(e,t){a.open({animation:!0,templateUrl:"aliases/modals/delete-alias-form.html",size:"lg",controller:"AliasesFormCtrl",resolve:{params:function(){return{name:e,uri:t}}}})},e.openTransferAliasModal=function(e,t){a.open({animation:!0,templateUrl:"aliases/modals/transfer-alias-form.html",size:"lg",controller:"AliasesFormCtrl",resolve:{params:function(){return{name:e,uri:t}}}})},e.openCancelAliasModal=function(e,t,n){a.open({animation:!0,templateUrl:"aliases/modals/cancel-alias-form.html",size:"lg",controller:"AliasesFormCtrl",resolve:{params:function(){return{name:e,price:t,uri:n}}}})},e.openEditAliasModal=function(e,t){a.open({animation:!0,templateUrl:"aliases/modals/edit-alias-form.html",size:"lg",controller:"AliasesFormCtrl",resolve:{params:function(){return{name:e,uri:t}}}})}}]),angular.module("aliases").controller("MyAliasesCtrl",["$scope","AliasService","amountTQTFilter","timestampFilter","DTOptionsBuilder","DTColumnBuilder","$uibModal","$compile","baseConfig","supplyFilter","searchTermFilter","CommonsService",function(e,t,n,r,o,i,a,s,l,c,u,d){e.dtOptions=o.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("info",!1).withOption("serverSide",!1).withDataProp("aliases").withOption("responsive",!0).withOption("paging",!0).withOption("ordering",!1).withOption("processing",!1).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){s(t)(e)}).withOption("ajax",function(e,n,r){var o=d.getAccountDetailsFromSession("accountId"),i=e.start+e.length-1;t.getAccountAliases(o,e.start,i).then(function(e){n({iTotalRecords:e.aliases.length,iTotalDisplayRecords:e.aliases.length,aliases:e.aliases})})}).withDisplayLength(10).withBootstrap(),e.dtColumns=[i.newColumn("alias").withTitle("Details").notSortable().renderWith(function(e,t,n,r){return'<button class="btn btn-success btn-xs" ng-controller="SearchCtrl" ng-click="searchValue(\''+e+'\')"><i class="fa fa-list-ul" aria-hidden="true" style="width:15px;"></i></button>'}),i.newColumn("aliasName").withTitle("Name").notSortable(),i.newColumn("aliasURI").withTitle("URI").notSortable().renderWith(function(e,t,n,r){var o=e.split(":")[0];if("acct"===o){return'<a  ng-controller="AccountMainCtrl" ng-click="openSendTokenModal(\''+e.substring(e.lastIndexOf(":")+1,e.lastIndexOf("@"))+"')\">"+e+"</a>"}if("url"===o){var i=e.substring(e.lastIndexOf(":")+1,e.lastIndexOf("@"));return/^https?:\/\//i.test(i)||(i="http://"+i),'<a href="'+i+'" target="_blank">'+e+"</a>"}if("btc"===o){return'<a  ng-controller="BlockrMainController" ng-click="openBtcDetailsModal(\''+e.substring(e.lastIndexOf(":")+1,e.lastIndexOf("@"))+"')\">"+e+"</a>"}return""===e?"Not Set":e}),i.newColumn("aliasName").withTitle("Action").notSortable().renderWith(function(e,t,n,r){var o='<button class="btn btn-default btn-xs"   popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover= "Edit" ng-click="openEditAliasModal(\''+e+"','"+n.aliasURI+'\')" ng-controller="AliasesMainCtrl"> <i class="fa fa-pencil" aria-hidden="true" style="width:15px;height:15px;"></i> </button>',i='<button class="btn btn-default btn-xs"   popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover= "Sell" ng-click="openSellAliasModal(\''+e+"','"+n.aliasURI+'\')" ng-controller="AliasesMainCtrl"> <i class="fa fa-dollar" aria-hidden="true" style="width:15px;"></i> </button>';return o+' <button class="btn btn-default btn-xs"   popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover= "Transfer" ng-click="openTransferAliasModal(\''+e+"','"+n.aliasURI+'\')" ng-controller="AliasesMainCtrl"> <i class="fa fa-user" aria-hidden="true" style="width:15px;"></i> </button> '+i+' <button class="btn btn-default btn-xs"   popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover= "Delete" ng-click="openDeleteAliasModal(\''+e+"','"+n.aliasURI+'\')" ng-controller="AliasesMainCtrl"> <i class="fa fa-times" aria-hidden="true" style="width:15px;"></i> </button>'})],e.dtInstanceCallback=function(t){e.dtInstance=t},e.reloadAliases=function(){e.dtInstance&&e.dtInstance._renderer.rerender()}}]),angular.module("aliases").controller("AliasesOpenOffersCtrl",["$scope","AliasService","amountTQTFilter","timestampFilter","DTOptionsBuilder","DTColumnBuilder","$uibModal","$compile","baseConfig","supplyFilter","searchTermFilter","CommonsService",function(e,t,n,r,o,i,a,s,l,c,u,d){e.dtOptions=o.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("info",!1).withOption("serverSide",!0).withDataProp("aliases").withOption("paging",!0).withOption("ordering",!1).withOption("processing",!0).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){s(t)(e)}).withOption("ajax",function(e,n,r){var o=d.getAccountDetailsFromSession("accountRs"),i=e.start+e.length-1;t.getAliasesOpenOffers(o,e.start,i).then(function(e){n({iTotalRecords:1e3,iTotalDisplayRecords:1e3,aliases:e.aliases})})}).withDisplayLength(10).withBootstrap(),e.dtColumns=[i.newColumn("aliasId").withTitle("Details").notSortable().renderWith(function(e,t,n,r){return'<button type="button" class="btn btn-success btn-xs" ng-controller="SearchCtrl" ng-click="searchValue(\''+e+'\')"><i class="fa fa-list-ul" aria-hidden="true" style="width:15px;"></i></button>'}),i.newColumn("aliasName").withTitle("Name").notSortable(),i.newColumn("recipientRS").withTitle("Recipient").notSortable().renderWith(function(e,t,n,r){return"0"===n.recipientId?"Public Offer":u(e)}),i.newColumn("priceTQT").withTitle("Price").notSortable().renderWith(function(e,t,r,o){return n(e)}),i.newColumn("aliasName").withTitle("Action").notSortable().renderWith(function(e,t,r,o){d.getAccountDetailsFromSession("accountRs");return'<button type="button" class="btn btn-default btn-xs"   popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover= "Cancel"  ng-controller="AliasesMainCtrl" ng-click="openCancelAliasModal(\''+e+"','"+n(r.priceTQT)+"','"+r.aliasURI+'\')"><i class="fa fa-times" aria-hidden="true" style="width:15px;"></i></button>'})],e.dtInstanceCallback=function(t){e.dtInstance=t},e.reloadAliases=function(){e.dtInstance&&e.dtInstance._renderer.rerender()}}]),angular.module("aliases").controller("AliasesPrivateOffersCtrl",["$scope","AliasService","amountTQTFilter","timestampFilter","DTOptionsBuilder","DTColumnBuilder","$uibModal","$compile","baseConfig","supplyFilter","searchTermFilter","CommonsService",function(e,t,n,r,o,i,a,s,l,c,u,d){e.dtOptions=o.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("info",!1).withOption("serverSide",!0).withDataProp("aliases").withOption("paging",!0).withOption("ordering",!1).withOption("processing",!0).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){s(t)(e)}).withOption("ajax",function(e,n,r){var o=d.getAccountDetailsFromSession("accountRs"),i=e.start+e.length-1;t.getAliasesPrivateOffers(o,e.start,i).then(function(e){n({iTotalRecords:1e3,iTotalDisplayRecords:1e3,aliases:e.aliases})})}).withDisplayLength(10).withBootstrap(),e.dtColumns=[i.newColumn("aliasId").withTitle("Details").notSortable().renderWith(function(e,t,n,r){return'<button type="button" class="btn btn-success btn-xs" ng-controller="SearchCtrl" ng-click="searchValue(\''+e+'\')"><i class="fa fa-list-ul" aria-hidden="true" style="width:15px;"></i></button>'}),i.newColumn("aliasName").withTitle("Name").notSortable(),i.newColumn("aliasId").withTitle("ID").notSortable(),i.newColumn("senderRS").withTitle("Sender").notSortable().renderWith(function(e,t,n,r){return u(e)}),i.newColumn("priceTQT").withTitle("Amount").notSortable().renderWith(function(e,t,r,o){return n(e)}),i.newColumn("aliasName").withTitle("Action").notSortable().renderWith(function(e,t,n,r){return'<button class="btn btn-default btn-xs"  popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover= "Buy" ng-click="openBuyAliasModal(\''+e+"','"+n.priceTQT+'\')" ng-controller="AliasesMainCtrl"> <i class="fa fa-shopping-cart" aria-hidden="true" style="width:15px;"></i> </button>'})],e.dtInstanceCallback=function(t){e.dtInstance=t},e.reloadAliases=function(){e.dtInstance&&e.dtInstance._renderer.rerender()}}]),angular.module("aliases").controller("AliasesPublicOffersCtrl",["$scope","AliasService","amountTQTFilter","timestampFilter","DTOptionsBuilder","DTColumnBuilder","$uibModal","$compile","baseConfig","supplyFilter","searchTermFilter","CommonsService",function(e,t,n,r,o,i,a,s,l,c,u,d){e.sort_order="desc",e.sort_orderColumn="height",e.sort_price=function(){e.sort_orderColumn="price",e.reloadAliases()},e.sort_height=function(){e.sort_orderColumn="height",e.reloadAliases()},e.sort_name=function(){e.sort_orderColumn="name",e.reloadAliases()},e.sort_toggle=function(){"desc"===e.sort_order?e.sort_order="asc":"asc"===e.sort_order&&(e.sort_order="desc"),e.reloadAliases()},e.dtOptions=o.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("info",!1).withOption("serverSide",!0).withDataProp("aliases").withOption("paging",!0).withOption("ordering",!1).withOption("processing",!0).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){s(t)(e)}).withOption("ajax",function(n,r,o){var i=d.getAccountDetailsFromSession("accountRs"),a=n.start+n.length-1;t.getAliasesPublicOffers(i,n.start,a,e.sort_order,e.sort_orderColumn).then(function(e){r({iTotalRecords:1e3,iTotalDisplayRecords:1e3,aliases:e.aliases})})}).withDisplayLength(10).withBootstrap(),e.dtColumns=[i.newColumn("aliasId").withTitle("Details").notSortable().renderWith(function(e,t,n,r){return'<button type="button" class="btn btn-success btn-xs" ng-controller="SearchCtrl" ng-click="searchValue(\''+e+'\')"><i class="fa fa-list-ul" aria-hidden="true" style="width:15px;"></i></button>'}),i.newColumn("aliasName").withTitle("Name").notSortable(),i.newColumn("aliasId").withTitle("ID").notSortable(),i.newColumn("senderRS").withTitle("Sender").notSortable().renderWith(function(e,t,n,r){return u(e)}),i.newColumn("priceTQT").withTitle("Price").notSortable().renderWith(function(e,t,r,o){return n(e)}),i.newColumn("aliasName").withTitle("Action").notSortable().renderWith(function(e,t,n,r){return'<button class="btn btn-default btn-xs"  popover-placement="top" popover-trigger="\'mouseenter\'" uib-popover= "Buy" ng-click="openBuyAliasModal(\''+e+"','"+n.priceTQT+'\')" ng-controller="AliasesMainCtrl"> <i class="fa fa-shopping-cart" aria-hidden="true" style="width:15px;"></i> </button>'})],e.dtInstanceCallback=function(t){e.dtInstance=t},e.reloadAliases=function(){e.dtInstance&&e.dtInstance._renderer.rerender()}}]),angular.module("aliases").controller("AliasesFormCtrl",["$scope","$uibModalInstance","params",function(e,t,n){e.cancel=function(){t.dismiss("cancel")},e.$on("close-modal",function(){t.dismiss("cancel")});var r=[{templateUrl:"aliases/modals/set-alias-details.html",title:"Register Alias Details",controller:"SetAliasFormController",isolatedScope:!0,data:n},{templateUrl:"aliases/modals/set-alias-confirm.html",title:"Register Alias Confirmation",controller:"SetAliasFormController",isolatedScope:!0}],o=[{templateUrl:"aliases/modals/sell-alias-details.html",title:"Sell Alias Details",controller:"SellAliasFormController",isolatedScope:!0,data:n},{templateUrl:"aliases/modals/sell-alias-confirm.html",title:"Sell Alias Confirmation",controller:"SellAliasFormController",isolatedScope:!0}],i=[{templateUrl:"aliases/modals/buy-alias-details.html",title:"Buy Alias Details",controller:"BuyAliasFormController",isolatedScope:!0,data:n},{templateUrl:"aliases/modals/buy-alias-confirm.html",title:"Buy Alias Confirmation",controller:"BuyAliasFormController",isolatedScope:!0}],a=[{templateUrl:"aliases/modals/delete-alias-details.html",title:"Delete Alias Details",controller:"DeleteAliasFormController",isolatedScope:!0,data:n},{templateUrl:"aliases/modals/delete-alias-confirm.html",title:"Delete Alias Confirmation",controller:"DeleteAliasFormController",isolatedScope:!0}],s=[{templateUrl:"aliases/modals/search-alias-details.html",title:"Search Alias Details",controller:"SearchAliasFormCtrl",isolatedScope:!0,data:n},{templateUrl:"aliases/modals/search-alias-confirm.html",title:"Search Alias Results",controller:"SearchAliasFormCtrl",isolatedScope:!0}],l=[{templateUrl:"aliases/modals/transfer-alias-details.html",title:"Transfer Alias Details",controller:"TransferAliasFormController",isolatedScope:!0,data:n},{templateUrl:"aliases/modals/transfer-alias-confirm.html",title:"Transfer Alias Confirmation",controller:"TransferAliasFormController",isolatedScope:!0}],c=[{templateUrl:"aliases/modals/edit-alias-details.html",title:"Edit Alias Details",controller:"EditAliasFormController",isolatedScope:!0,data:n},{templateUrl:"aliases/modals/edit-alias-confirm.html",title:"Edit Alias Confirmation",controller:"EditAliasFormController",isolatedScope:!0}],u=[{templateUrl:"aliases/modals/cancel-alias-details.html",title:"Cancel Alias Sell Details",controller:"CancelAliasFormController",isolatedScope:!0,data:n},{templateUrl:"aliases/modals/cancel-alias-confirm.html",title:"Cancel Alias Sell Confirmation",controller:"CancelAliasFormController",isolatedScope:!0}];e.steps={},e.steps.setAliasForm=r,e.steps.sellAliasSteps=o,e.steps.buyAliasForm=i,e.steps.deleteAliasForm=a,e.steps.searchAliasForm=s,e.steps.transferAliasSteps=l,e.steps.editAliasSteps=c,e.steps.cancelAliasSteps=u}]),angular.module("aliases").controller("EditAliasFormController",["$scope","AliasService","SessionStorageService","$state","CryptoService","loginConfig","AlertService","alertConfig","$validation","$uibModal","multiStepFormScope","FeeService","$rootScope","CommonsService","amountToQuantFilter",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f){e.editAliasForm=angular.copy(u.editAliasForm),e.disableFields={},e.formFinalAlias=function(){var e=u.editAliasForm,t=e.uri||"",n=e.prefix.value,r=n+t;return""!==n&&(r+="@xin"),t||(r=""),r},e.validBytes=!1,e.initStep1=function(){var t=e.$getActiveStep().data;e.editAliasForm.name=t.name,e.editAliasForm.uriold=t.uri,e.prefixes=[{name:"Account",value:"acct:"},{name:"URL",value:"url:"},{name:"BTC",value:"btc:"},{name:"Other",value:""}],e.editAliasForm.prefix=e.prefixes[0]},e.$on("$destroy",function(){u.editAliasForm=angular.copy(e.editAliasForm)}),e.hasPrivateKeyInSession=function(){return!!n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY)},e.editAlias=function(){var r,l=u.editAliasForm,c=l.name,d=e.formFinalAlias(),p=l.fee,f=m.getAccountDetailsFromSession("publicKey"),g=l.secretPhrase;r=g?o.secretPhraseToPrivateKey(g):n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY),p||(p=1),e.editAliasPromise=t.setAlias(f,c,d,p).then(function(t){if(t.errorCode)a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},s.editAliasModalAlert);else{var n=t.unsignedTransactionBytes,i=o.signatureHex(n,r);e.transactionBytes=o.signTransactionHex(n,i),e.validBytes=!0,e.tx_fee=t.transactionJSON.feeTQT/1e8,e.tx_amount=t.transactionJSON.amountTQT/1e8,e.tx_total=e.tx_fee+e.tx_amount}},function(e){a.addAlert(a.getNoConnectionMessage(e),s.editAliasModalAlert)})},e.broadcastTransaction=function(t){e.editAliasPromise=m.broadcastTransaction(t).then(function(t){e.$emit("close-modal"),p.$broadcast("reload-dashboard"),t.errorCode?a.addAlert({type:"danger",msg:"Unable to broadcast transaction. Reason: "+t.errorDescription}):a.addAlert({type:"success",msg:"Transaction succesfull broadcasted with Id : "+t.transaction})},function(e){a.addAlert(a.getNoConnectionMessage(e),s.editAliasModalAlert)})}}]),angular.module("aliases").controller("CancelAliasFormController",["$scope","AliasService","SessionStorageService","$state","CryptoService","loginConfig","AlertService","alertConfig","$validation","$uibModal","multiStepFormScope","FeeService","$rootScope","CommonsService","amountToQuantFilter",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f){e.cancelAliasForm=angular.copy(u.cancelAliasForm),e.disableFields={},e.initStep1=function(){var t=e.$getActiveStep().data;e.cancelAliasForm.name=t.name,e.cancelAliasForm.price=t.price,e.cancelAliasForm.aliasURI=t.aliasURI},e.$on("$destroy",function(){u.cancelAliasForm=angular.copy(e.cancelAliasForm)}),e.hasPrivateKeyInSession=function(){return!!n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY)},e.cancelAlias=function(){var r,l=u.cancelAliasForm,c=l.name,d=(l.recipientRS,l.price,l.fee),p=m.getAccountDetailsFromSession("publicKey"),f=l.secretPhrase,g=m.getAccountDetailsFromSession("accountRs");r=f?o.secretPhraseToPrivateKey(f):n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY),d||(d=1),e.cancelAliasPromise=t.cancelAlias(p,c,g,d).then(function(t){if(t.errorCode)a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},s.cancelAliasModalAlert);else{var n=t.unsignedTransactionBytes,i=o.signatureHex(n,r);e.transactionBytes=o.signTransactionHex(n,i),e.validBytes=!0,e.tx_fee=t.transactionJSON.feeTQT/1e8,e.tx_amount=t.transactionJSON.amountTQT/1e8,e.tx_total=e.tx_fee+e.tx_amount}},function(e){a.addAlert(a.getNoConnectionMessage(e),s.cancelAliasModalAlert)})},e.broadcastTransaction=function(t){e.cancelAliasPromise=m.broadcastTransaction(t).then(function(t){e.$emit("close-modal"),p.$broadcast("reload-dashboard"),t.errorCode?a.addAlert({type:"danger",msg:"Unable to broadcast transaction. Reason: "+t.errorDescription}):a.addAlert({type:"success",msg:"Transaction succesfull broadcasted with Id : "+t.transaction})},function(e){a.addAlert(a.getNoConnectionMessage(e),s.cancelAliasModalAlert)})}}]),angular.module("aliases").controller("SetAliasFormController",["$scope","AliasService","SessionStorageService","$state","CryptoService","loginConfig","AlertService","alertConfig","$validation","$uibModal","multiStepFormScope","FeeService","$rootScope","CommonsService",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m){e.setAliasForm=angular.copy(u.setAliasForm),e.disableFields={},e.validBytes=!1,e.initStep1=function(){var t=e.$getActiveStep().data;t&&t.name&&(e.setAliasForm.name=t.name,e.disableFields.name=!0),e.prefixes=[{name:"Account",value:"acct:",placeholder:"XIN______-____-______"},{name:"URL",value:"url:",placeholder:"http://"},{name:"BTC",value:"btc:",placeholder:""},{name:"Other",value:""}],e.setAliasForm.prefix=e.prefixes[0]},e.$on("$destroy",function(){u.setAliasForm=angular.copy(e.setAliasForm)}),e.hasPrivateKeyInSession=function(){return!!n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY)},e.formFinalAlias=function(){var e=u.setAliasForm,t=e.uri,n=e.prefix.value,r=n+t;return""!==n&&(r+="@xin"),t||(r=""),r},e.setAlias=function(){var r,l=u.setAliasForm,c=l.name,d=e.formFinalAlias(),p=l.fee,f=m.getAccountDetailsFromSession("publicKey"),g=l.secretPhrase;r=g?o.secretPhraseToPrivateKey(g):n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY),p||(p=2),e.setAliasPromise=t.setAlias(f,c,d,p).then(function(t){if(t.errorCode)a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},s.setAliasModalAlert);else{var n=t.unsignedTransactionBytes,i=o.signatureHex(n,r);e.transactionBytes=o.signTransactionHex(n,i),e.validBytes=!0,e.tx_fee=t.transactionJSON.feeTQT/1e8,e.tx_amount=t.transactionJSON.amountTQT/1e8,e.tx_total=e.tx_fee+e.tx_amount}},function(e){a.addAlert(a.getNoConnectionMessage(e),s.setAliasModalAlert)})},e.broadcastTransaction=function(t){e.setAliasPromise=m.broadcastTransaction(t).then(function(t){e.$emit("close-modal"),p.$broadcast("reload-dashboard"),t.errorCode?a.addAlert({type:"danger",msg:"Unable to broadcast transaction. Reason: "+t.errorDescription}):a.addAlert({type:"success",msg:"Transaction succesfull broadcasted with Id : "+t.transaction})},function(e){a.addAlert(a.getNoConnectionMessage(e),s.setAliasModalAlert)})}}]),angular.module("aliases").controller("DeleteAliasFormController",["$scope","AliasService","SessionStorageService","$state","CryptoService","loginConfig","AlertService","alertConfig","$validation","$uibModal","multiStepFormScope","FeeService","$rootScope","CommonsService",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m){e.deleteAliasForm=angular.copy(u.deleteAliasForm),e.$on("$destroy",function(){u.deleteAliasForm=angular.copy(e.deleteAliasForm)}),e.initStep1=function(){var t=e.$getActiveStep().data;t&&(e.deleteAliasForm.name=t.name,e.deleteAliasForm.uri=t.uri)},e.hasPrivateKeyInSession=function(){return!!n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY)},e.deleteAlias=function(){var r,l=u.deleteAliasForm,c=l.name,d=l.fee,p=m.getAccountDetailsFromSession("publicKey"),f=l.secretPhrase;r=f?o.secretPhraseToPrivateKey(f):n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY),d||(d=1),e.deleteAliasPromise=t.deleteAlias(p,c,d).then(function(t){if(t.errorCode)a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},s.deleteAliasModalAlert);else{var n=t.unsignedTransactionBytes,i=o.signatureHex(n,r);e.transactionBytes=o.signTransactionHex(n,i),e.validBytes=!0,e.tx_fee=t.transactionJSON.feeTQT/1e8,e.tx_amount=t.transactionJSON.amountTQT/1e8,e.tx_total=e.tx_fee+e.tx_amount}},function(e){a.addAlert(a.getNoConnectionMessage(e),s.deleteAliasModalAlert)})},e.broadcastTransaction=function(t){e.deleteAliasPromise=m.broadcastTransaction(t).then(function(t){e.$emit("close-modal"),p.$broadcast("reload-dashboard"),t.errorCode?a.addAlert({type:"danger",msg:"Unable to broadcast transaction. Reason: "+t.errorDescription}):a.addAlert({type:"success",msg:"Transaction succesfull broadcasted with Id : "+t.transaction})},function(e){a.addAlert(a.getNoConnectionMessage(e),s.deleteAliasModalAlert)})}}]),angular.module("aliases").controller("SearchAliasFormCtrl",["$scope","AliasService","SessionStorageService","$state","DTOptionsBuilder","DTColumnBuilder","searchTermFilter","$compile","multiStepFormScope","$validation","supplyFilter","currencyModelFilter",function(e,t,n,r,o,i,a,s,l,c,u,d){e.searchAliasForm={},e.onSubmit=function(){c.validate(e.searchAliasForm),e.searchAliasForm.$valid&&e.$nextStep()},e.searchAliasForm=angular.copy(l.searchAliasForm),e.$on("$destroy",function(){l.searchAliasForm=angular.copy(e.searchAliasForm)}),e.dtOptions=o.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("info",!1).withOption("serverSide",!0).withDataProp("aliases").withOption("processing",!0).withOption("bFilter",!1).withOption("ordering",!1).withOption("fnRowCallback",function(t,n,r,o){s(t)(e)}).withOption("ajax",function(n,r,o){var i=e.searchAliasForm.query,a=n.start+n.length-1;t.searchAlias(i,n.start,a).then(function(e){r({iTotalRecords:1e3,iTotalDisplayRecords:1e3,aliases:e.aliases})})}).withDisplayLength(10).withBootstrap(),e.dtColumns=[i.newColumn("aliasName").withTitle("Name").notSortable(),i.newColumn("aliasURI").withTitle("URI").notSortable().renderWith(function(e,t,n,r){var o=e.split(":")[0];if("acct"===o){return'<a  ng-controller="AccountMainCtrl" ng-click="openSendTokenModal(\''+e.substring(e.lastIndexOf(":")+1,e.lastIndexOf("@"))+"')\">"+e+"</a>"}if("url"===o){var i=e.substring(e.lastIndexOf(":")+1,e.lastIndexOf("@"));return/^https?:\/\//i.test(i)||(i="http://"+i),'<a href="'+i+'" target="_blank">'+e+"</a>"}if("btc"===o){return'<a  ng-controller="BlockrMainController" ng-click="openBtcDetailsModal(\''+e.substring(e.lastIndexOf(":")+1,e.lastIndexOf("@"))+"')\">"+e+"</a>"}return e}),i.newColumn("accountRS").withTitle("Owner").notSortable().renderWith(function(e,t,n,r){return'<button type="button" class="btn btn-success btn-xs" ng-controller="SearchCtrl" ng-click="searchValue(\''+e+'\')"><i class="fa fa-list-ul" aria-hidden="true"></i></button>'})],e.dtInstanceCallback=function(t){e.dtInstance=t}}]),angular.module("aliases").controller("SellAliasFormController",["$scope","AliasService","SessionStorageService","$state","CryptoService","loginConfig","AlertService","alertConfig","$validation","$uibModal","multiStepFormScope","FeeService","$rootScope","CommonsService","amountToQuantFilter",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f){e.sellAliasForm=angular.copy(u.sellAliasForm),e.disableFields={},e.initStep1=function(){var t=e.$getActiveStep().data;e.sellAliasForm.name=t.name,e.sellAliasForm.uri=t.uri},e.$on("$destroy",function(){u.sellAliasForm=angular.copy(e.sellAliasForm)}),e.hasPrivateKeyInSession=function(){return!!n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY)},e.openAddressBookModal=function(){c.open({animation:!1,templateUrl:"addressbook/views/addressbook-light.html",controller:"AddressBookCtrl",resolve:{params:function(){return{closeOnClick:!0}}}}).result.then(function(t){e.sellAliasForm.recipientRS=t.accountRS})},e.sellAlias=function(){var r,l=u.sellAliasForm,c=l.name,d=l.recipientRS||"",p=f(l.price),g=l.fee,h=m.getAccountDetailsFromSession("publicKey"),S=l.secretPhrase;r=S?o.secretPhraseToPrivateKey(S):n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY),g||(g=1),e.sellAliasPromise=t.sellAlias(h,c,d,p,g).then(function(t){if(t.errorCode)a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},s.setAliasModalAlert);else{var n=t.unsignedTransactionBytes,i=o.signatureHex(n,r);e.transactionBytes=o.signTransactionHex(n,i),e.validBytes=!0,e.tx_fee=t.transactionJSON.feeTQT/1e8,e.tx_amount=t.transactionJSON.amountTQT/1e8,e.tx_total=e.tx_fee+e.tx_amount}},function(e){a.addAlert(a.getNoConnectionMessage(e),s.setAliasModalAlert)})},e.broadcastTransaction=function(t){e.sellAliasPromise=m.broadcastTransaction(t).then(function(t){e.$emit("close-modal"),p.$broadcast("reload-dashboard"),t.errorCode?a.addAlert({type:"danger",msg:"Unable to broadcast transaction. Reason: "+t.errorDescription}):a.addAlert({type:"success",msg:"Transaction succesfull broadcasted with Id : "+t.transaction})},function(e){a.addAlert(a.getNoConnectionMessage(e),s.setAliasModalAlert)})}}]),angular.module("aliases").controller("BuyAliasFormController",["$scope","AliasService","SessionStorageService","$state","CryptoService","loginConfig","AlertService","alertConfig","$validation","$uibModal","multiStepFormScope","FeeService","$rootScope","CommonsService","amountToQuantFilter",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f){e.buyAliasForm=angular.copy(u.buyAliasForm),e.disableFields={},e.initStep1=function(){var t=e.$getActiveStep().data;e.buyAliasForm.name=t.name,e.buyAliasForm.amount=t.amount},e.$on("$destroy",function(){u.buyAliasForm=angular.copy(e.buyAliasForm)}),e.hasPrivateKeyInSession=function(){return!!n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY)},e.buyAlias=function(){var r,l=u.buyAliasForm,c=l.name,d=parseInt(l.amount),p=1,f=m.getAccountDetailsFromSession("publicKey"),g=l.secretPhrase;r=g?o.secretPhraseToPrivateKey(g):n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY),p||(p=1),e.buyAliasPromise=t.buyAlias(f,c,d,p).then(function(t){if(t.errorCode)a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},s.buyAliasModalAlert);else{var n=t.unsignedTransactionBytes,i=o.signatureHex(n,r);e.transactionBytes=o.signTransactionHex(n,i),e.validBytes=!0,e.tx_fee=t.transactionJSON.feeTQT/1e8,e.tx_amount=t.transactionJSON.amountTQT/1e8,e.tx_total=e.tx_fee+e.tx_amount}},function(e){a.addAlert(a.getNoConnectionMessage(e),s.buyAliasModalAlert)})},e.broadcastTransaction=function(t){e.buyAliasPromise=m.broadcastTransaction(t).then(function(t){e.$emit("close-modal"),p.$broadcast("reload-dashboard"),t.errorCode?a.addAlert({type:"danger",msg:"Unable to broadcast transaction. Reason: "+t.errorDescription}):a.addAlert({type:"success",msg:"Transaction succesfull broadcasted with Id : "+t.transaction})},function(e){a.addAlert(a.getNoConnectionMessage(e),s.buyAliasModalAlert)})}}]),angular.module("aliases").controller("TransferAliasFormController",["$scope","AliasService","SessionStorageService","$state","CryptoService","loginConfig","AlertService","alertConfig","$validation","$uibModal","multiStepFormScope","FeeService","$rootScope","CommonsService","amountToQuantFilter",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f){e.transferAliasForm=angular.copy(u.transferAliasForm),e.disableFields={},e.initStep1=function(){var t=e.$getActiveStep().data;e.transferAliasForm.name=t.name,e.transferAliasForm.uri=t.uri},e.$on("$destroy",function(){u.transferAliasForm=angular.copy(e.transferAliasForm)}),e.hasPrivateKeyInSession=function(){return!!n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY)},e.openAddressBookModal=function(){c.open({animation:!1,templateUrl:"addressbook/views/addressbook-light.html",controller:"AddressBookCtrl",resolve:{params:function(){return{closeOnClick:!0}}}}).result.then(function(t){e.transferAliasForm.recipientRS=t.accountRS})},e.TransferAlias=function(){var r,l=u.transferAliasForm,c=l.name,d=l.recipientRS,p=f(l.price),g=l.fee,h=m.getAccountDetailsFromSession("publicKey"),S=l.secretPhrase;r=S?o.secretPhraseToPrivateKey(S):n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY),g||(g=1),e.transferAliasPromise=t.sellAlias(h,c,d,p,g).then(function(t){if(t.errorCode)a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},s.transferAliasModalAlert);else{var n=t.unsignedTransactionBytes,i=o.signatureHex(n,r);e.transactionBytes=o.signTransactionHex(n,i),e.validBytes=!0,e.tx_fee=t.transactionJSON.feeTQT/1e8,e.tx_amount=t.transactionJSON.amountTQT/1e8,e.tx_total=e.tx_fee+e.tx_amount}},function(e){a.addAlert(a.getNoConnectionMessage(e),s.transferAliasModalAlert)})},e.broadcastTransaction=function(t){
e.transferAliasPromise=m.broadcastTransaction(t).then(function(t){e.$emit("close-modal"),p.$broadcast("reload-dashboard"),t.errorCode?a.addAlert({type:"danger",msg:"Unable to broadcast transaction. Reason: "+t.errorDescription}):a.addAlert({type:"success",msg:"Transaction succesfull broadcasted with Id : "+t.transaction})},function(e){a.addAlert(a.getNoConnectionMessage(e),s.transferAliasModalAlert)})}}]);var searchApp=angular.module("search",["baseClient","restangular","datatables","datatables.bootstrap","ui.bootstrap","ui.router","ja.qr"]);angular.module("search").constant("searchConfig",{searchEndPoint:"api",searchAccountString:"XIN",searchPeerUrl:"http://185.103.75.217:8888/api/nodes",searchPeerEndPoint:"api/nodes"}),angular.module("search").config(["RestangularProvider","searchConfig","$stateProvider","$urlRouterProvider",function(e,t,n,r){e.setRestangularFields({options:"_options"})}]),angular.module("search").filter("gateways",["$sce",function(e){return function(e,t){switch(e){case"TenderMint":return t?'<span tooltip-placement="top" uib-tooltip="'+e+'">   <span class="label label-default" >TM</span>  </span>':'<span tooltip-placement="top" uib-tooltip="'+e+'">  <span class="label label-default" >TM</span>   </span>';case"ZeroNet":return'<span tooltip-placement="top" uib-tooltip="'+e+'">  <span class="label label-default" >ZN</span>  </span>';case"IPFS":return t?'<span tooltip-placement="top" uib-tooltip="'+e+'">  <span class="label label-warning" >IPFS</span>  </span>':'<span tooltip-placement="top" uib-tooltip="'+e+'">  <span class="label label-default" >IPFS</span>  </span>';default:return'<small> <span class="glyphicon glyphicon-remove" style="color:red"></span> </small>'}}}]),angular.module("search").filter("proxies",["$sce",function(e){return function(e,t){switch(e){case"BTC":return t?'<span tooltip-placement="top" uib-tooltip="'+e+'">   <span class="label label-warning" >BTC</span>  </span>':'<span tooltip-placement="top" uib-tooltip="'+e+'">  <span class="label label-default" >BTC</span>   </span>';case"ETH":return'<span tooltip-placement="top" uib-tooltip="'+e+'">  <span class="label label-default" >ETH</span>  </span>';case"LTC":return'<span tooltip-placement="top" uib-tooltip="'+e+'">  <span class="label label-default" >LTC</span>  </span>';case"XRP":return'<span tooltip-placement="top" uib-tooltip="'+e+'">  <span class="label label-default" >XRP</span>  </span>';case"MKT":return'<span tooltip-placement="top" uib-tooltip="'+e+'">  <span class="label label-default" >MKT</span>  </span>';default:return'<small> <span class="glyphicon glyphicon-remove" style="color:red"></span> </small>'}}}]),angular.module("search").filter("storage",["$sce",function(e){return function(e,t){switch(e){case"PostgreSQL":return t?'<span tooltip-placement="top" uib-tooltip="'+e+'">   <span class="label label-default" >PS</span>  </span>':'<span tooltip-placement="top" uib-tooltip="'+e+'">  <span class="label label-default" >PS</span>   </span>';case"RethinkDB":return'<span tooltip-placement="top" uib-tooltip="'+e+'">  <span class="label label-default" >RT</span>  </span>';case"MySQL":return'<span tooltip-placement="top" uib-tooltip="'+e+'">  <span class="label label-default" >MY</span>  </span>';case"Mongodb":return t?'<span tooltip-placement="top" uib-tooltip="'+e+'">  <span class="label label-warning" >MO</span>  </span>':'<span tooltip-placement="top" uib-tooltip="'+e+'">  <span class="label label-default" >MO</span>  </span>';default:return'<small> <span class="glyphicon glyphicon-remove" style="color:red"></span> </small>'}}}]),angular.module("search").service("SearchService",["Restangular","searchConfig","PeerService",function(e,t,n){this.searchBlocks=function(n){var r={requestType:"getBlock",height:n,includeTransactions:!0};return e.all(t.searchEndPoint).customGET("",r)},this.searchIp=function(e){return n.searchIp(e)},this.searchTransactionById=function(n){var r={requestType:"getTransaction",transaction:n};return e.all(t.searchEndPoint).customGET("",r)},this.searchBlockById=function(n){var r={requestType:"getBlock",block:n};return e.all(t.searchEndPoint).customGET("",r)},this.searchAccounts=function(n){var r={requestType:"getAccount",account:n,includeAssets:!0,includeCurrencies:!0,includeEffectiveBalance:!0,includeLessors:!0};return e.all(t.searchEndPoint).customGET("",r)},this.searchTransactions=function(n){var r={requestType:"getTransaction",fullHash:n,includePhasingResult:!0};return e.all(t.searchEndPoint).customGET("",r)}}]),angular.module("search").controller("SearchCtrl",["$scope","SearchService","DTOptionsBuilder","DTColumnBuilder","$interval","$uibModal","$compile","searchConfig","$q",function(e,t,n,r,o,i,a,s,l){function c(e){return!!/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(e)}var u=function(e){i.open({animation:!0,templateUrl:"search/search-error.html",size:"sm",controller:"ErrorSearchCtrl",resolve:{params:function(){return{message:e}}}})};e.searchValue=function(e,n){if(e)if(e.startsWith(s.searchAccountString))t.searchAccounts(e).then(function(t){if(t.errorCode)u(e+" account doesn't exists ");else{i.open({animation:!0,templateUrl:"search/search-account-result.html",size:"lg",controller:"AccountSearchCtrl",windowClass:"block-modal-window",resolve:{params:function(){return{account:t,accountId:e}}}})}});else if(isNaN(e))c(e)?t.searchIp(e).then(function(t){t._id?i.open({animation:!0,templateUrl:"search/search-peer.html",size:"lg",controller:"SearchIpCtrl",windowClass:"block-modal-window",resolve:{params:function(){return{node:t}}}}):u(e+" ip doesn't exists ")}):t.searchTransactions(e).then(function(t){t.errorCode?u(e+" is not a valid account, block or transaction"):i.open({animation:!0,templateUrl:"search/search-transaction-result.html",size:"lg",controller:"TransactionSearchCtrl",windowClass:"block-modal-window ",resolve:{params:function(){return{transaction:t}}}})});else{var r=t.searchBlocks(e),o=t.searchBlockById(e),a=t.searchTransactionById(e);l.all([r,o,a]).then(function(t){for(var n=t.length,r=0;r<n;r++){var o=t[r];if(!o.errorCode){if(o.transaction){i.open({animation:!0,templateUrl:"search/search-transaction-result.html",size:"lg",controller:"TransactionSearchCtrl",windowClass:"block-modal-window",resolve:{params:function(){return{transaction:o}}}});break}i.open({animation:!0,templateUrl:"search/block.html",size:"lg",controller:"SearchBlockCtrl",windowClass:"block-modal-window",resolve:{params:function(){return{block:o}}}});break}}0===n&&u(e+" Block or transaction doesn't exists ")})}},e.search=function(){var t=e.searchTerm;e.searchValue(t)}}]),angular.module("search").controller("SearchIpCtrl",["$scope","DTOptionsBuilder","DTColumnBuilder","$compile","$uibModalInstance","$q","params",function(e,t,n,r,o,i,a){function s(e){for(var t={key:"SystemLoad",values:[]},n=0;n<e.length;n++)t.values.push({label:n,value:e[n]});return[t]}function l(e){for(var t={key:"SystemLoad",values:[]},n=0;n<e.length;n++){var r=parseFloat(e[n]),o=100*r/100*100;t.values.push({label:n,value:o})}return[t]}e.chartOptions={chart:{type:"discreteBarChart",height:100,margin:{top:0,right:0,bottom:0,left:0},x:function(e){return e.label},y:function(e){return e.value},showValues:!1,valueFormat:function(e){return d3.format(",.2f")(e)},duration:500,xAxis:{axisLabel:"",ticks:8},yAxis:{axisLabel:"",axisLabelDistance:0,ticks:8},color:function(){return"#9e9e9e"}}},e.cancel=function(){o.dismiss("cancel")},e.showResult=function(){e.nodes=[a.node],e.chartOptions=e.chartOptions,e.chartData1=l(a.node.history_SystemLoadAverage),e.chartData2=s(a.node.history_freeMemory),e.chartData3=s(a.node.history_requestProcessingTime),e.chartData4=s(a.node.history_numberOfActivePeers)}}]),angular.module("search").controller("AccountSearchCtrl",["$scope","DTOptionsBuilder","timestampFilter","amountTQTFilter","amountTKNFilter","isEmptyFilter","DTColumnBuilder","$compile","$uibModalInstance","$q","params","supplyFilter","currencyModelFilter",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m){e.cancel=function(){l.dismiss("cancel")},e.showResult=function(){e.account=u.account,e.accountRs=u.account.accountRS},e.qrCode=function(){e.accountRs=u.account.accountRS}}]),angular.module("search").controller("TransactionSearchCtrl",["$scope","Restangular","DTOptionsBuilder","DTColumnBuilder","$compile","$uibModalInstance","$q","params",function(e,t,n,r,o,i,a,s){e.cancel=function(){i.dismiss("cancel")},e.showResult=function(){e.transaction=t.stripRestangular(s.transaction)},e.convertCamelToRegular=function(e){var t=e.replace(/([A-Z])/g," $1");return t.charAt(0).toUpperCase()+t.slice(1)},e.generateSearchLink=function(e){return'<a href="" ng-controller="SearchCtrl" ng-click="searchValue(\''+e+"')\">"+e+"</a>"}}]),angular.module("search").controller("ErrorSearchCtrl",["$scope","$uibModalInstance","$q","params",function(e,t,n,r){e.cancel=function(){t.dismiss("cancel")},e.showResult=function(){e.message=r.message}}]),angular.module("search").controller("SearchBlockCtrl",["$scope","timestampFilter","amountTQTFilter","DTOptionsBuilder","DTColumnBuilder","$compile","$uibModalInstance","params","$uibModal","transactionConfFilter","transactionTypeFilter","blockTransactionsFilter","SearchService","Restangular","transactionIconSubTypeFilter",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f){e.block=s.block,e.cancel=function(){a.dismiss("cancel")},e.transactions=[],e.dtOptions=r.newOptions().withPaginationType("full_numbers").withOption("serverSide",!0).withDataProp("data").withOption("processing",!0).withOption("paging",!1).withOption("ordering",!1).withOption("info",!1).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){i(t)(e)}).withOption("ajax",function(t,n,r){n({iTotalRecords:1,iTotalDisplayRecords:1,data:{data:[e.block]}.data})}).withDisplayLength(1).withBootstrap(),e.dtColumns=[o.newColumn("height").withTitle("Height").notSortable().renderWith(function(e,t,n,r){return'<button type="button" class="btn btn-success btn-xs" ng-click="openDetailsModal('+e+')">'+e+"</button>"}),o.newColumn("block").withTitle("Block Id").notSortable(),o.newColumn("numberOfTransactions").withTitle("Transactions").notSortable().renderWith(function(e,t,n,r){return d(e)}),o.newColumn("totalAmountTQT").withTitle("Amount").notSortable().renderWith(function(e,t,r,o){return n(e)}),o.newColumn("totalFeeTQT").withTitle("Fee").notSortable().renderWith(function(e,t,r,o){return n(e)}),o.newColumn("generatorRS").withTitle("Generator").notSortable().renderWith(function(e,t,n,r){return'<a href="" ng-controller="SearchCtrl" ng-click="searchValue(\''+e+"')\">"+e+"</a>"}),o.newColumn("payloadLength").withTitle("Payload").notSortable(),o.newColumn("timestamp").withTitle("Date").notSortable().renderWith(function(e,n,r,o){return t(e)}),o.newColumn("previousBlock").withTitle("Previous Block").withOption("defaultContent"," ").notSortable()],e.dtOptionsTransactions=r.newOptions().withDOM("frtip").withPaginationType("full_numbers").withOption("serverSide",!1).withDataProp("data").withOption("processing",!0).withOption("paging",!0).withOption("ordering",!1).withOption("info",!1).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){i(t)(e)}).withOption("ajax",function(t,n,r){var o=e.block;n({iTotalRecords:o.transactions.length,iTotalDisplayRecords:o.transactions.length,data:o.transactions})}).withDisplayLength(5).withBootstrap(),e.dtColumnsTransactions=[o.newColumn("transaction").withTitle("Details").notSortable().renderWith(function(e,t,n,r){return'<a type="button" class="btn btn-success btn-xs" ng-controller="SearchCtrl" ng-click="searchValue(\''+n.fullHash+'\')"><i class="fa fa-list-ul" aria-hidden="true"></i></a>'}),o.newColumn("type").withTitle("Type").notSortable().renderWith(function(e,t,n,r){return f(e,n.subtype)}),o.newColumn("timestamp").withTitle("Date").notSortable().renderWith(function(e,n,r,o){return t(e)}),o.newColumn("amountTQT").withTitle("Amount").notSortable().renderWith(function(e,t,r,o){return n(e)}),o.newColumn("feeTQT").withTitle("Fee").notSortable().renderWith(function(e,t,r,o){return n(e)}),o.newColumn("confirmations").withTitle("Conf.").notSortable().renderWith(function(e,t,n,r){return c(e)}),o.newColumn("senderRS").withTitle("Sender").notSortable().withOption("defaultContent"," ").renderWith(function(e,t,n,r){return e?'<a href="" ng-controller="SearchCtrl" ng-click="searchValue(\''+e+"')\">"+e+"</a>":e}),o.newColumn("recipientRS").withTitle("Recipient").notSortable().withOption("defaultContent"," ").renderWith(function(e,t,n,r){return e?'<a href="" ng-controller="SearchCtrl" ng-click="searchValue(\''+e+"')\">"+e+"</a>":e})],e.dtInstanceCallbackTransactions={},e.showBlockDetails=function(){p.searchBlocks(s.blockDetails,!1).then(function(t){e.blockDetails=m.stripRestangular(t)})},e.convertCamelToRegular=function(e){var t=e.replace(/([A-Z])/g," $1");return t.charAt(0).toUpperCase()+t.slice(1)},e.openDetailsModal=function(e){l.open({animation:!0,templateUrl:"search/block-details.html",size:"lg",controller:"SearchBlockCtrl",windowClass:"block-modal-window",resolve:{params:function(){return{blockDetails:e}}}})},e.generateSearchLink=function(e){return'<a href="" ng-controller="SearchCtrl" ng-click="searchValue(\''+e+"')\">"+e+"</a>"},e.generateNumberOfTxsHtml=function(e){return getBlocksTxs(e)}}]),angular.module("chain-viewer",["baseClient","node","options"]),angular.module("chain-viewer").constant("chainViewerConfig",{apiUrl:"http://199.127.137.169:23457",peerUrl:"http://199.127.137.169:8888",peerEndPoint:"api/nodes",endPoint:"api"}),angular.module("chain-viewer").config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("client.signedin.chainviewer",{url:"^/chainviewer",templateUrl:"./extensions/chain-viewer/views/main.html",abstract:!0}).state("client.signedin.chainviewer.blocks",{url:"^/chainviewer/blocks",templateUrl:"./extensions/chain-viewer/views/blocks.html",controller:"ChainViewerBlocksCtrl"}).state("client.signedin.chainviewer.transactions",{url:"^/chainviewer/transactions",templateUrl:"./extensions/chain-viewer/views/transactions.html",controller:"ChainViewerTransactionsCtrl"}).state("client.signedin.chainviewer.peers",{url:"^/chainviewer/peers",templateUrl:"./extensions/chain-viewer/views/peers.html",controller:"ChainViewerPeersCtrl"}).state("client.signedin.chainviewer.unconfirmed",{url:"^/chainviewer/unconfirmed",templateUrl:"./extensions/chain-viewer/views/unconfirmed.html",controller:"ChainViewerUnconfirmedTransactionsCtrl"})}]),angular.module("chain-viewer").service("ChainViewerService",["Restangular","chainViewerConfig","NodeService","OptionsService","PeerService",function(e,t,n,r,o){this.getBlocks=function(o,i){e.setBaseUrl(n.getNodeUrl(r.getOption("CONNECTION_MODE"),r.getOption("RANDOMIZE_NODES")));var a={requestType:"getBlocks",firstIndex:o,lastIndex:i};return e.all(t.endPoint).customGET("",a)},this.getTransactions=function(o,i){e.setBaseUrl(n.getNodeUrl(r.getOption("CONNECTION_MODE"),r.getOption("RANDOMIZE_NODES")));var a={requestType:"getTransactions",firstIndex:o,lastIndex:i};return e.all(t.endPoint).customGET("",a)},this.getPeers=function(t,n){e.setBaseUrl(o.getPeerEndPoints()[0]);var r={page:t,results:n,filter:"numberOfActivePeers",order:"desc"};return e.all("").customGET("",r)},this.getUnconfirmedTransactions=function(){e.setBaseUrl(n.getNodeUrl(r.getOption("CONNECTION_MODE"),r.getOption("RANDOMIZE_NODES")));var o={requestType:"getUnconfirmedTransactions"};return e.all(t.endPoint).customGET("",o)}}]),angular.module("chain-viewer").controller("ChainViewerBlocksCtrl",["$scope","ChainViewerService","baseConfig","timestampFilter","amountTQTFilter","DTOptionsBuilder","DTColumnBuilder","$interval","$uibModal","$compile","transactionConfFilter","searchTermFilter","blockTransactionsFilter","$sanitize",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m){e.dtOptions=i.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("info",!1).withOption("ordering",!1).withOption("serverSide",!0).withDataProp("blocks").withOption("paging",!0).withOption("info",!1).withOption("processing",!0).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){c(t)(e)}).withOption("ajax",function(e,n,r){var o=e.start+e.length-1;t.getBlocks(e.start,o).then(function(e){n({iTotalRecords:1e3,iTotalDisplayRecords:1e3,blocks:e.blocks})})}).withDisplayLength(10).withBootstrap(),e.dtColumns=[a.newColumn("height").withTitle("Details").withOption("bSortable",!1).notSortable().renderWith(function(e,t,n,r){return'<a type="button" class="btn btn-infinity btn-xs" ng-controller="SearchCtrl" ng-click="searchValue(\''+e+"')\">"+e+"</a>"}),a.newColumn("block").withTitle("Id").notSortable(),a.newColumn("numberOfTransactions").withTitle("Txs").notSortable().renderWith(function(e,t,n,r){return p(e)}),a.newColumn("totalAmountTQT").withTitle("Amount").notSortable().renderWith(function(e,t,n,r){return o(e)}),a.newColumn("totalFeeTQT").withTitle("Fee").notSortable().renderWith(function(e,t,n,r){return o(e)}),a.newColumn("generatorRS").withTitle("Generator").notSortable().renderWith(function(e,t,n,r){return d(e)}),a.newColumn("timestamp").withTitle("Date").notSortable().renderWith(function(e,t,n,o){return r(e)})],e.dtInstanceCallback=function(t){e.dtInstance=t},e.reloadBlocks=function(){e.dtInstance&&e.dtInstance._renderer.rerender()}}]),angular.module("chain-viewer").controller("ChainViewerTransactionsCtrl",["$scope","ChainViewerService","baseConfig","amountTQTFilter","timestampFilter","DTOptionsBuilder","DTColumnBuilder","$interval","$uibModal","$compile","searchTermFilter","transactionTypeFilter","transactionConfFilter","transactionIconSubTypeFilter","$sanitize",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f){e.dtOptions=i.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("info",!1).withOption("ordering",!1).withOption("serverSide",!0).withDataProp("transactions").withOption("processing",!0).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){c(t)(e)}).withOption("ajax",function(e,n,r){var o=e.start+e.length-1;t.getTransactions(e.start,o).then(function(e){n({iTotalRecords:1e3,iTotalDisplayRecords:1e3,transactions:e.transactions})})}).withDisplayLength(10).withBootstrap(),e.dtColumns=[a.newColumn("Id").withTitle("Details").notSortable().renderWith(function(e,t,n,r){return'<a type="button" class="btn btn-infinity btn-xs" ng-controller="SearchCtrl" ng-click="searchValue(\''+e+'\')"><i class="fa fa-list-ul" aria-hidden="true" style="width:15px;"></i></a>'}),a.newColumn("type").withTitle("Type").notSortable().renderWith(function(e,t,n,r){return m(e,n.subtype)}),a.newColumn("timestamp").withTitle("Date").notSortable().renderWith(function(e,t,n,r){return o(e)}),a.newColumn("amountTQT").withTitle("Amount").notSortable().renderWith(function(e,t,n,o){return r(e)}),a.newColumn("feeTQT").withTitle("Fee").notSortable().renderWith(function(e,t,n,o){return r(e)}),a.newColumn("confirmations").withTitle("Conf.").notSortable().renderWith(function(e,t,n,r){return p(e)}),a.newColumn("senderRS").withTitle("Sender").notSortable().renderWith(function(e,t,n,r){return u(e)}),a.newColumn("recipientRS").withTitle("Recipient").notSortable().renderWith(function(e,t,n,r){return u(e)})],e.dtInstanceCallback=function(t){e.dtInstance=t},e.reloadTransactions=function(){e.dtInstance&&e.dtInstance._renderer.rerender()}}]),angular.module("chain-viewer").controller("ChainViewerPeersCtrl",["$scope","ChainViewerService","DTOptionsBuilder","DTColumnBuilder","$interval","$uibModal","$compile","searchTermFilter","numericalStringFilter","$sanitize",function(e,t,n,r,o,i,a,s,l,c){function u(e,t){return!0===e?'<small> <span tooltip-placement="top" uib-tooltip="'+t+'" class="glyphicon glyphicon-ok" style="color:black"></span></small>':'<small> <span tooltip-placement="top" uib-tooltip="'+t+'" class="glyphicon glyphicon-remove" style="color:black"></span></small>'}e.chartOptions={chart:{type:"discreteBarChart",height:20,margin:{top:0,right:0,bottom:0,left:0},x:function(e){return e.label},y:function(e){return e.value},showValues:!1,duration:500,xAxis:{axisLabel:"",axisLabelDistance:0,ticks:0},yAxis:{axisLabel:"",axisLabelDistance:0,ticks:0},color:function(){return"#9e9e9e"}}},e.dtOptions=n.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("info",!1).withOption("ordering",!1).withOption("info",!1).withOption("serverSide",!0).withDataProp("peers").withOption("processing",!0).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){a(t)(e)}).withOption("ajax",function(e,n,r){var o=e.start/e.length+1;t.getPeers(o,e.length).then(function(e){n({iTotalRecords:1e3,iTotalDisplayRecords:1e3,peers:{peers:e}.peers})})}).withDisplayLength(10).withBootstrap().withOption("rank",[1,"desc"]).withOption("rowReordering",!0),e.dtColumns=[r.newColumn("rank").withTitle("Rank").notSortable().renderWith(function(e,t,n,r){return l(e)}),r.newColumn("_id").withTitle("Node Details").notSortable().renderWith(function(e,t,n,r){return'<a type="button" class="btn btn-infinity btn-xs" style="width:75%;" ng-controller="SearchCtrl" ng-click="searchValue(\''+e+"')\">"+e+"</a>"}),r.newColumn("numberOfActivePeers").withTitle("Peers").notSortable(),r.newColumn("SystemLoadAverage").withTitle("CPU").notSortable().renderWith(function(e,t,n,r){var o=parseInt(n.availableProcessors);return(100*parseFloat(n.SystemLoadAverage)/(100*o)*100).toFixed(2)+" %"}),r.newColumn("history_SystemLoadAverage").withTitle("CPU Load History").notSortable().renderWith(function(e,t,n,r){for(var o=[],i=0;i<e.length-30;i++){var a=parseFloat(e[i]),s=100*a/100*100;o.push({label:i,value:s})}var l=[{values:[]}];return l[0].values=o,'<nvd3 options="chartOptions" data='+JSON.stringify(l)+"></nvd3>"}),r.newColumn("lastBlockchainFeeder").withTitle("Last Feeder").notSortable(),r.newColumn("numberOfBlocks").withTitle("Blocks").notSortable(),r.newColumn("version").withTitle("Version").notSortable(),r.newColumn("superNodeEnable").withTitle("Services").notSortable().renderWith(function(e,t,n,r){return u(n.superNodeEnable,"SuperNode Services Enabled")}),r.newColumn("apiServerEnable").withTitle("API").notSortable().renderWith(function(e,t,n,r){return u(n.apiServerEnable,"API Enabled")})],e.dtInstanceCallback=function(t){e.dtInstance=t},e.reloadPeers=function(){e.dtInstance&&e.dtInstance._renderer.rerender()}}]),angular.module("chain-viewer").controller("ChainViewerUnconfirmedTransactionsCtrl",["$scope","ChainViewerService","baseConfig","amountTQTFilter","timestampFilter","DTOptionsBuilder","DTColumnBuilder","$interval","$uibModal","$compile","searchTermFilter","transactionTypeFilter","transactionConfFilter","transactionIconSubTypeFilter",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m){e.dtOptions=i.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("paging",!0).withOption("ordering",!1).withOption("info",!1).withOption("serverSide",!1).withDataProp("unconfirmedTransactions").withOption("paging",!0).withOption("ordering",!1).withOption("processing",!1).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){c(t)(e)}).withOption("ajax",function(e,n,r){t.getUnconfirmedTransactions().then(function(e){n({iTotalRecords:e.unconfirmedTransactions.length,iTotalDisplayRecords:e.unconfirmedTransactions.length,unconfirmedTransactions:e.unconfirmedTransactions})})}).withDisplayLength(10).withBootstrap(),e.dtColumns=[a.newColumn("transaction").withTitle("Details").notSortable().renderWith(function(e,t,n,r){return'<a type="button" class="btn btn-infinity btn-xs" ng-controller="SearchCtrl" ng-click="searchValue(\''+e+'\')"><i class="fa fa-list-ul" aria-hidden="true" style="width:15px;"></i></a>'}),a.newColumn("type").withTitle("Type").notSortable().renderWith(function(e,t,n,r){return m(e,n.subtype)}),a.newColumn("timestamp").withTitle("Date").notSortable().renderWith(function(e,t,n,r){return o(e)}),a.newColumn("amountTQT").withTitle("Amount").notSortable().renderWith(function(e,t,n,o){return r(e)}),a.newColumn("feeTQT").withTitle("Fee").notSortable().renderWith(function(e,t,n,o){return r(e)}),a.newColumn("confirmations").withTitle("Conf.").notSortable().renderWith(function(e,t,n,r){return p(e)}),a.newColumn("senderRS").withTitle("Sender").notSortable().renderWith(function(e,t,n,r){return u(e)}),a.newColumn("recipientRS").withTitle("Recipient").notSortable().renderWith(function(e,t,n,r){return u(e)})],e.dtInstanceCallback=function(t){e.dtInstance=t},e.reloadUnconfirmedTransactions=function(){e.dtInstance&&e.dtInstance._renderer.rerender()}}]),angular.module("macap-viewer",["baseClient","node","options"]),angular.module("macap-viewer").constant("macapViewerConfig",{macapUrl:"http://185.103.75.217:8892",macapEndPoint:"api/v1/get"}),angular.module("macap-viewer").config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("client.signedin.macapviewer",{url:"^/macapviewer",templateUrl:"./extensions/macap-viewer/views/main.html",abstract:!0}).state("client.signedin.macapviewer.macap",{url:"^/macapviewer/macap",templateUrl:"./extensions/macap-viewer/views/macap.html",controller:"MaCapViewerMainCtrl"})}]),angular.module("macap-viewer").service("MaCapViewerService",["Restangular","macapViewerConfig",function(e,t){this.getMaCap=function(n,r){e.setBaseUrl(t.macapUrl);var o={page:n,results:r};return e.all(t.macapEndPoint).customGET("",o)}}]),angular.module("macap-viewer").controller("MaCapViewerMainCtrl",["$scope","MaCapViewerService","baseConfig","numericalStringFilter","DTOptionsBuilder","DTColumnBuilder","$interval","$uibModal","$compile","upDownFilter","$sanitize",function(e,t,n,r,o,i,a,s,l,c,u){e.dtOptions=o.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("info",!1).withOption("ordering",!1).withOption("info",!1).withOption("serverSide",!0).withDataProp("macap").withOption("processing",!0).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){l(t)(e)}).withOption("ajax",function(e,n,r){var o=e.start/e.length+1;t.getMaCap(o,e.length).then(function(e){n({iTotalRecords:1e3,iTotalDisplayRecords:1e3,macap:{macap:e}.macap})},function(e){n({iTotalRecords:0,iTotalDisplayRecords:0,macap:[]})})}).withDisplayLength(10).withBootstrap().withOption("rank",[1,"desc"]).withOption("rowReordering",!0),e.dtColumns=[i.newColumn("rank").withTitle("Rank").notSortable().renderWith(function(e,t,n,r){return u(e)}),i.newColumn("symbol").withTitle("Symbol").notSortable().renderWith(function(e,t,n,r){return"<strong>"+u(e)+"</strong>"}),i.newColumn("name").withTitle("Name").notSortable().renderWith(function(e,t,n,r){return u(e)}),i.newColumn("price_usd").withTitle("Price USD").notSortable().renderWith(function(e,t,n,r){return e.toLocaleString("en-US",{maximumFractionDigits:4,minimumFractionDigits:4})}),i.newColumn("price_btc").withTitle("Price BTC").notSortable().renderWith(function(e,t,n,r){return e.toLocaleString("en-US",{maximumFractionDigits:8,minimumFractionDigits:8})}),i.newColumn("market_cap_usd").withTitle("Market Cap USD").notSortable().renderWith(function(e,t,n,r){return e.toLocaleString("en-US",{maximumFractionDigits:0,minimumFractionDigits:0})}),i.newColumn("available_supply").withTitle("Supply").notSortable().renderWith(function(e,t,n,r){return e.toLocaleString("en-US",{maximumFractionDigits:0,minimumFractionDigits:0})}),i.newColumn("percent_change_1h").withTitle("1 H").notSortable().renderWith(function(e,t,n,r){return c(e)}),i.newColumn("percent_change_24h").withTitle("24 H").notSortable().renderWith(function(e,t,n,r){return c(e)}),i.newColumn("percent_change_7d").withTitle("7 D").notSortable().renderWith(function(e,t,n,r){return c(e)})],e.dtInstanceCallback=function(t){e.dtInstance=t},e.reloadMaCap=function(){e.dtInstance&&e.dtInstance._renderer.rerender()}}]),angular.module("news-viewer",["baseClient","crypto","ui.router","ui.bootstrap","multiStepForm","node","options"]),angular.module("news-viewer").constant("newsViewerConfig",{newsUrl:"http://199.127.137.169:8889",newsEndPoint:"api/v1/news"}),angular.module("news-viewer").config(["RestangularProvider","newsViewerConfig","$stateProvider","$urlRouterProvider",function(e,t,n,r){n.state("client.signedin.newsviewer",{url:"^/newsviewer",templateUrl:"./extensions/news-viewer/views/main.html",abstract:!0}).state("client.signedin.newsviewer.news",{url:"^/newsviewer/news",templateUrl:"./extensions/news-viewer/views/news.html",controller:"NewsViewerMainCtrl"})}]),angular.module("news-viewer").service("NewsViewerService",["Restangular","newsViewerConfig",function(e,t){this.getNews=function(n,r){e.setBaseUrl(t.newsUrl);var o={page:n,results:r,order:"desc"};return e.all(t.newsEndPoint).customGET("",o)}}]),angular.module("news-viewer").controller("NewsViewerMainCtrl",["$scope","NewsViewerService","baseConfig","DTOptionsBuilder","DTColumnBuilder","$interval","$uibModal","$compile","timestampFilter","$sanitize","$compile","$sce","CommonsService","newsTypeFilter","newsSectionFilter","newsPriorityFilter",function(e,t,n,r,o,i,a,s,l,c,s,u,d,p,m,f){e.channel="Foundation",e.dtOptions=r.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("info",!1).withOption("ordering",!1).withOption("info",!1).withOption("serverSide",!0).withDataProp("news").withOption("processing",!0).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){s(t)(e)}).withOption("ajax",function(n,r,o){var i=n.start/n.length+1;t.getNews(i,n.length).then(function(t){t=d.sanitizeJson(t),e.data={news:t},r({iTotalRecords:1e3,iTotalDisplayRecords:1e3,news:e.data.news})},function(e){r({iTotalRecords:0,iTotalDisplayRecords:0,news:[]})})}).withDisplayLength(10).withBootstrap().withOption("rank",[1,"desc"]).withOption("rowReordering",!0),e.dtColumns=[o.newColumn("date").withTitle("Date").notSortable().renderWith(function(e,t,n,r){return c(e)}),o.newColumn("priority").withTitle("Priority").notSortable().renderWith(function(e,t,n,r){return f(e)}),o.newColumn("title").withTitle("Title").notSortable().renderWith(function(e,t,n,r){return c(e)}),o.newColumn("section").withTitle("Section").notSortable().renderWith(function(e,t,n,r){return m(e)}),o.newColumn("_id").withTitle("Action").notSortable().renderWith(function(e,t,n,r){return'<button type="button" class="btn btn-success btn-xs" +  popover-placement="left" popover-trigger="\'mouseenter\'" uib-popover= "Read News" ng-controller="NewsViewerMainCtrl" ng-click="openReadNewsModal(\''+r.row+'\')" ng-disabled="false"> <i class="fa fa-envelope-open-o" aria-hidden="true" style="width:15px;"></i> </button>'})],e.openReadNewsModal=function(t){a.open({animation:!0,templateUrl:"extensions/news-viewer/modals/read-news-form.html",size:"lg",controller:"StepNewsFormCtrl",resolve:{params:function(){return e.data.news[t]}}})},e.dtInstanceCallback=function(t){e.dtInstance=t},e.reloadNews=function(){e.dtInstance&&e.dtInstance._renderer.rerender()}}]),angular.module("news-viewer").controller("StepNewsFormCtrl",["$scope","$uibModalInstance","params",function(e,t,n){e.cancel=function(){t.dismiss("cancel")},e.$on("close-modal",function(){t.dismiss("cancel")});var r=[{templateUrl:"extensions/news-viewer/modals/read-news-details.html",title:"Read News",controller:"NewsViewerReadCtrl",isolatedScope:!0,data:n}];e.steps={},e.steps.readNewsForm=r}]),angular.module("news-viewer").controller("NewsViewerReadCtrl",["$scope","$state","$rootScope","CommonsService","SessionStorageService","loginConfig","NewsViewerService","alertConfig","AlertService","CryptoService",function(e,t,n,r,o,i,a,s,l,c){e.readNews=function(){var t=e.$getActiveStep().data;e.params=t},e.getLatestNews=function(t,n){a.getNews(t,n).then(function(t){e.news_content=t},function(e){})}}]),angular.module("servicemon",["baseClient","crypto","ui.router","ui.bootstrap","multiStepForm","node","options"]),angular.module("servicemon").config(["RestangularProvider","serviceMonConfig","$stateProvider","$urlRouterProvider",function(e,t,n,r){
n.state("client.signedin.servicemon",{url:"^/servicemon",templateUrl:"./extensions/servicemon/views/main.html",abstract:!0}).state("client.signedin.servicemon.view",{url:"^/servicemon/view",templateUrl:"./extensions/servicemon/views/servicemon.html",controller:"ServiceStatusCtrl"})}]),angular.module("servicemon").constant("ServicePeerEndpoints",[{label:"Peer #1",ip:"185.35.137.7",url:"http://185.35.137.7:8888/api/nodes"},{label:"Peer #2",ip:"185.103.75.217",url:"http://185.103.75.217:8888/api/nodes"},{label:"Peer #3",ip:"185.35.139.101",url:"http://185.35.139.101:8888/api/nodes"},{label:"Peer #4",ip:"185.35.139.102",url:"http://185.35.139.102:8888/api/nodes"},{label:"Peer #5",ip:"185.35.139.103",url:"http://185.35.139.103:8888/api/nodes"},{label:"Peer #6",ip:"185.35.139.104",url:"http://185.35.139.104:8888/api/nodes"},{label:"Peer #7",ip:"185.35.139.105",url:"http://185.35.139.105:8888/api/nodes"},{label:"Peer #8",ip:"46.244.20.41",url:"http://46.244.20.41:8888/api/nodes"},{label:"Peer #9",ip:"208.95.1.177",url:"http://208.95.1.177:8888/api/nodes"},{label:"Peer #10",ip:"199.127.137.169",url:"http://199.127.137.169:8888/api/nodes"}]),angular.module("servicemon").constant("ServiceMacapEndpoints",[{label:"MaCap",ip:"185.103.75.217",url:"http://185.103.75.217:8892/api/v1/get"}]),angular.module("servicemon").constant("ServiceWebsiteEndpoints",[{label:"Peerexplorer I",ip:"185.103.75.217",url:"http://185.103.75.217/peer/images/logo_nav.png"},{label:"Blockexplorer I",ip:"185.103.75.217",url:"http://185.103.75.217/block/images/logo_nav.png"},{label:"Peerexplorer II",ip:"185.35.139.101 ",url:"http://185.35.139.101/peer/images/logo_nav.png"},{label:"Blockexplorer II",ip:"185.35.139.101 ",url:"http://185.35.139.101/block/images/logo_nav.png"},{label:"Online Wallet #1",ip:"46.244.20.41",url:"http://46.244.20.41/wallet/images/logo.png"},{label:"Online Wallet #1",ip:"185.35.137.7",url:"http://185.35.137.7/wallet/images/logo.png"},{label:"Online Wallet #1",ip:"208.95.1.177",url:"http://208.95.1.177/wallet/images/logo.png"},{label:"Online Wallet SSL",ip:"185.35.139.105",url:"https://securewallet.infinity-economics.org/wallet/images/logo.png"}]),angular.module("servicemon").constant("ServiceTestnetEndpoints",[{label:"Online Wallet",ip:"185.35.138.140",url:"http://185.35.138.140/wallet/images/logo.png"},{label:"Peerexplorer",ip:"185.35.138.140",url:"http://185.35.138.140/peer/images/logo_nav.png"},{label:"Blockexplorer",ip:"185.35.138.140",url:"http://185.35.138.140/block/images/logo_nav.png"}]),angular.module("servicemon").constant("ServiceApiEndpoints",[{label:"API Node",ip:"199.127.137.169",url:"http://199.127.137.169:9005/docs/images/favicon-16x16.png"},{label:"API Backends",ip:"199.127.137.169",url:"http://199.127.137.169:9006/docs/images/favicon-16x16.png"}]),angular.module("servicemon").constant("serviceMonConfig",{apiUrl:"api/nodes"}),angular.module("servicemon").service("ServiceMonService",["Restangular","serviceMonConfig","$q",function(e,t,n){this.getPeerStatus=function(t,r){return r?n(function(e,n){var r=new Image;r.src=t,r.onload=function(){e(r)},r.onerror=function(e){n(e)}}):(e.setBaseUrl(t),e.all("").one("").get())}}]),angular.module("servicemon").controller("ServiceStatusCtrl",["$scope","ServiceMonService","ServicePeerEndpoints","ServiceMacapEndpoints","ServiceWebsiteEndpoints","ServiceTestnetEndpoints","ServiceApiEndpoints","isOnlineFilter","$sce",function(e,t,n,r,o,i,a,s,l){e.peerEndpoints=n,e.macapEndpoints=r,e.websiteEndpoints=o,e.testnetEndpoints=i,e.apiEndpoints=a,e.trustAsHtml=l.trustAsHtml,e.IP_STATUS={},e.getAllIpStatus=function(n,r){angular.forEach(n,function(n,o){t.getPeerStatus(n.url,r).then(function(t){e.IP_STATUS[n.url]=e.IP_STATUS[n.url]||{},e.IP_STATUS[n.url].status='<span class="label label-success">ONLINE</span>',e.IP_STATUS[n.url].timestamp=(new Date).toString()},function(t){e.IP_STATUS[n.url]=e.IP_STATUS[n]||{},e.IP_STATUS[n.url].status='<span class="label label-warning">OFFLINE</span>',e.IP_STATUS[n.url].timestamp=(new Date).toString()})})},e.getStatus=function(n,r){var o=n.url;return e.IP_STATUS[o]={},t.getPeerStatus(o,r).then(function(t){e.IP_STATUS[o]=e.IP_STATUS[o]||{},e.IP_STATUS[o].status='<span class="label label-success">ONLINE</span>',e.IP_STATUS[o].timestamp=(new Date).toString()},function(t){e.IP_STATUS[o]=e.IP_STATUS[o]||{},e.IP_STATUS[o].status='<span class="label label-warning">OFFLINE</span>',e.IP_STATUS[o].timestamp=(new Date).toString()})}}]),angular.module("atworkbench",["baseClient","crypto","ui.router","ui.bootstrap","multiStepForm","node","options"]),angular.module("atworkbench").constant("ATWorkbenchConfig",{}),angular.module("atworkbench").config(["RestangularProvider","ATWorkbenchConfig","$stateProvider","$urlRouterProvider",function(e,t,n,r){n.state("client.signedin.atworkbench",{url:"^/atworkbench",templateUrl:"./extensions/atworkbench/views/main.html",abstract:!0}).state("client.signedin.atworkbench.start",{url:"^/atworkbench/start",templateUrl:"./extensions/atworkbench/views/start.html",controller:"ATWorkbenchMainCtrl"})}]),angular.module("atworkbench").service("ATWorkbenchService",["Restangular","ATWorkbenchConfig",function(e,t){}]),angular.module("atworkbench").controller("ATWorkbenchMainCtrl",["$scope","ATWorkbenchService","baseConfig","DTOptionsBuilder","DTColumnBuilder","$interval","$uibModal","$compile","timestampFilter","$sanitize","$compile","$sce","CommonsService",function(e,t,n,r,o,i,a,s,l,c,s,u,d){}]),angular.module("extensions",["chain-viewer","macap-viewer","news-viewer","servicemon","atworkbench"]),angular.module("extensions").constant("extensionsConfig",{extensionsEndPoint:"api"}),angular.module("messages").config(["RestangularProvider","messagesConfig","$stateProvider","$urlRouterProvider",function(e,t,n,r){e.setRestangularFields({options:"_options"}),n.state("client.signedin.extensions",{url:"^/extensions",templateUrl:"./extensions/views/main.html",abstract:!0}).state("client.signedin.extensions.welcome",{url:"^/extensions/welcome",templateUrl:"./extensions/views/welcome.html"})}]),angular.module("tools",["baseClient","crypto","ui.router","ui.bootstrap","multiStepForm","node","options"]),angular.module("tools").constant("toolsConfig",{messagesEndPoint:"api"}),angular.module("tools").config(["RestangularProvider","messagesConfig","$stateProvider","$urlRouterProvider",function(e,t,n,r){}]),angular.module("tools").service("ToolsService",["nodeConfig","SessionStorageService","NodeService","baseConfig","toolsConfig","Restangular","loginConfig","TransactionService","$rootScope","OptionsService",function(e,t,n,r,o,i,a,s,l,c){this.decodeToken=function(e,t){i.setBaseUrl(n.getNodeUrl(c.getOption("CONNECTION_MODE"),c.getOption("RANDOMIZE_NODES")));var r={requestType:"decodeToken",website:t,token:e};return i.all(o.messagesEndPoint).customGET("",r)},this.parseTransaction=function(e){i.setBaseUrl(n.getNodeUrl(c.getOption("CONNECTION_MODE"),c.getOption("RANDOMIZE_NODES")));var t={requestType:"parseTransaction",transactionBytes:e};return i.all(o.messagesEndPoint).customGET("",t)},this.broadcastTransaction=function(e){i.setBaseUrl(n.getNodeUrl(c.getOption("CONNECTION_MODE"),c.getOption("RANDOMIZE_NODES")));var t={requestType:"broadcastTransaction",transactionBytes:e};return i.all(o.messagesEndPoint).customPOST("","",t,"")},this.calculateHash=function(e,t){i.setBaseUrl(n.getNodeUrl(c.getOption("CONNECTION_MODE"),c.getOption("RANDOMIZE_NODES")));var r={requestType:"hash",hashAlgorithm:e,secret:t,secretIsText:!0};return i.all(o.messagesEndPoint).customGET("",r)},this.getChainStats=function(){i.setBaseUrl(n.getNodeUrl(c.getOption("CONNECTION_MODE"),c.getOption("RANDOMIZE_NODES")));var e={requestType:"getStatistics"};return i.all(o.messagesEndPoint).customGET("",e)}}]),angular.module("tools").controller("ToolsMainCtrl",["$scope","$uibModal","SessionStorageService","NodeService","loginConfig","nodeConfig","DTOptionsBuilder","DTColumnBuilder","AccountService","timestampFilter","amountTQTFilter","$compile","controlConfig","CommonsService","quantToAmountFilter","quantityToShareFilter","numericalStringFilter","AssetsService","CurrenciesService","$timeout","numberStringFilter",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g,h,S,C,T,b){e.openTransactionTypeModal=function(){t.open({animation:!0,templateUrl:"tools/modals/transaction-types.html",size:"lg",controller:"ToolsStepFormCtrl",resolve:{params:function(){return{}}}})},e.openServiceFeesModal=function(){t.open({animation:!0,templateUrl:"tools/modals/service-fees.html",size:"lg",controller:"ToolsStepFormCtrl",resolve:{params:function(){return{}}}})},e.openGenerateTokenModal=function(){t.open({animation:!0,templateUrl:"tools/modals/token-generate.html",size:"lg",controller:"GenerateTokenCtrl",resolve:{params:function(){return{}}}})},e.openValidateTokenModal=function(){t.open({animation:!0,templateUrl:"tools/modals/token-validate.html",size:"lg",controller:"ValidateTokenCtrl",resolve:{params:function(){return{}}}})},e.openTransactionBroadcastModal=function(){t.open({animation:!0,templateUrl:"tools/modals/transaction-broadcast.html",size:"lg",controller:"BroadcastTransactionCtrl",resolve:{params:function(){return{}}}})},e.openTransactionParseModal=function(){t.open({animation:!0,templateUrl:"tools/modals/transaction-parse.html",size:"lg",controller:"ParseTransactionCtrl",resolve:{params:function(){return{}}}})},e.openCalculateHashModal=function(){t.open({animation:!0,templateUrl:"tools/modals/hash-calculate.html",size:"lg",controller:"CalculateHashCtrl",resolve:{params:function(){return{}}}})},e.openUserGuideModal=function(){t.open({animation:!0,templateUrl:"tools/modals/user-guide.html",size:"lg",controller:"ToolsStepFormCtrl",resolve:{params:function(){return{}}}})},e.openChainStatisticsModal=function(){t.open({animation:!0,templateUrl:"tools/modals/chain-statistics.html",size:"lg",controller:"chainStatisticsCtrl",resolve:{params:function(){return{}}}})},e.cancel=function(){$uibModalInstance.dismiss("cancel")}}]),angular.module("tools").controller("GenerateTokenCtrl",["$scope","$uibModalInstance","params","CryptoService","baseConfig","AccountService","SessionStorageService","loginConfig",function(e,t,n,r,o,i,a,s){e.cancel=function(){t.dismiss("cancel")},e.$on("close-modal",function(){t.dismiss("cancel")}),e.generateTokenForm={},e.buttonColor="default",e.generateToken=function(t){var n=i.getAccountDetailsFromSession("publicKey"),l=a.getFromSession(s.SESSION_ACCOUNT_PRIVATE_KEY),c=o.EPOCH;e.generateTokenForm.output=r.generateToken(t,l,n,c),e.buttonColor="success"}}]),angular.module("tools").controller("ValidateTokenCtrl",["$scope","$uibModalInstance","params","CryptoService","baseConfig","AccountService","SessionStorageService","loginConfig","ToolsService","AlertService","alertConfig",function(e,t,n,r,o,i,a,s,l,c,u){e.cancel=function(){t.dismiss("cancel")},e.$on("close-modal",function(){t.dismiss("cancel")}),e.validateTokenForm={},e.color="black;",e.buttonColor="default",e.account="Account",e.validateToken=function(t,n){l.decodeToken(t,n).then(function(t){t.errorCode?c.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},u.decodeToken):(e.valid=t.valid,t.valid?(e.color="green;",e.buttonColor="success",e.account=t.accountRS):(e.color="red;",e.buttonColor="danger",e.account="Invalid Account"))},function(e){c.addAlert({type:"danger",msg:"Sorry, an error occured! Status: "+e.status},u.decodeToken)})}}]),angular.module("tools").controller("ParseTransactionCtrl",["$scope","$uibModalInstance","params","CryptoService","baseConfig","AccountService","SessionStorageService","loginConfig","ToolsService","AlertService","alertConfig",function(e,t,n,r,o,i,a,s,l,c,u){e.cancel=function(){t.dismiss("cancel")},e.$on("close-modal",function(){t.dismiss("cancel")}),e.buttonColor="default",e.parseTransaction=function(t){l.parseTransaction(t).then(function(t){t.errorCode?c.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},u.parseTransaction):(delete t.restangularized,delete t.fromServer,delete t.parentResource,delete t.restangularCollection,delete t.route,delete t.reqParams,t.verify?e.buttonColor="success":e.buttonColor="danger",e.parseTransactionForm.json=JSON.stringify(t))},function(e){c.addAlert({type:"danger",msg:"Sorry, an error occured! Status: "+e.status},u.parseTransaction)})}}]),angular.module("tools").controller("BroadcastTransactionCtrl",["$scope","$uibModalInstance","params","CryptoService","baseConfig","AccountService","SessionStorageService","loginConfig","ToolsService","AlertService","alertConfig",function(e,t,n,r,o,i,a,s,l,c,u){e.cancel=function(){t.dismiss("cancel")},e.$on("close-modal",function(){t.dismiss("cancel")}),e.buttonColor="default",e.showTransaction=!1,e.broadcastTransaction=function(t){l.broadcastTransaction(t).then(function(t){t.errorCode?c.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},u.broadcastTransaction):(e.fullHash=t.fullHash,e.requestProcessingTime=t.requestProcessingTime,e.transaction=t.transaction,t.transaction?(e.buttonColor="success",e.showTransaction=!0):e.buttonColor="danger")},function(e){c.addAlert({type:"danger",msg:"Sorry, an error occured! Status: "+e.status},u.broadcastTransaction)})}}]),angular.module("tools").controller("CalculateHashCtrl",["$scope","$uibModalInstance","params","CryptoService","baseConfig","AccountService","SessionStorageService","loginConfig","ToolsService","AlertService","alertConfig",function(e,t,n,r,o,i,a,s,l,c,u){e.cancel=function(){t.dismiss("cancel")},e.$on("close-modal",function(){t.dismiss("cancel")}),e.buttonColor="default",e.showHash=!1,e.calculateHashForm={},e.calculateHash=function(t,n){l.calculateHash(t,n).then(function(t){t.errorCode?c.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},u.calculateHash):(e.calculateHashForm.hash=t.hash,t.hash?e.buttonColor="success":e.buttonColor="danger")},function(e){c.addAlert({type:"danger",msg:"Sorry, an error occured! Status: "+e.status},u.calculateHash)})}}]),angular.module("tools").controller("chainStatisticsCtrl",["$scope","$uibModalInstance","params","CryptoService","baseConfig","AccountService","SessionStorageService","loginConfig","ToolsService","AlertService","alertConfig",function(e,t,n,r,o,i,a,s,l,c,u){e.cancel=function(){t.dismiss("cancel")},e.$on("close-modal",function(){t.dismiss("cancel")}),e.getChainStats=function(){e.getChainStatsPromise=l.getChainStats().then(function(t){t.errorCode?c.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},u.calculateHash):(e.numberOfAccountLeases=t.numberOfAccountLeases,e.numberOfAccountLeases=t.numberOfAccountLeases,e.numberOfAccounts=t.numberOfAccounts,e.numberOfActiveAccountLeases=t.numberOfActiveAccountLeases,e.numberOfActivePeers=t.numberOfActivePeers,e.numberOfAliases=t.numberOfAliases,e.numberOfAskOrders=t.numberOfAskOrders,e.numberOfAsks=t.numberOfAsks,e.numberOfAssets=t.numberOfAssets,e.numberOfBidOrders=t.numberOfBidOrders,e.numberOfBids=t.numberOfBids,e.numberOfBlocks=t.numberOfBlocks,e.numberOfCurrencies=t.numberOfCurrencies,e.numberOfAccountLeases=t.numberOfAccountLeases,e.numberOfCurrencyTransfers=t.numberOfCurrencyTransfers,e.numberOfExchangeRequests=t.numberOfExchangeRequests,e.numberOfExchanges=t.numberOfExchanges,e.numberOfOffers=t.numberOfOffers,e.numberOfOrders=t.numberOfOrders,e.numberOfPeers=t.numberOfPeers,e.numberOfPhasingOnlyAccounts=t.numberOfPhasingOnlyAccounts,e.numberOfPolls=t.numberOfPolls,e.numberOfTrades=t.numberOfTrades,e.numberOfTransactions=t.numberOfTransactions,e.numberOfTransfers=t.numberOfTransfers,e.numberOfVotes=t.numberOfVotes)},function(e){c.addAlert({type:"danger",msg:"Sorry, an error occured! Status: "+e.status},u.calculateHash)})}}]),angular.module("tools").controller("ToolsStepFormCtrl",["$scope","$uibModalInstance","params",function(e,t,n){e.cancel=function(){t.dismiss("cancel")},e.$on("close-modal",function(){t.dismiss("cancel")})}]),angular.module("dashboard",["baseClient","crypto","ui.router","ui.bootstrap","node","options"]),angular.module("dashboard").constant("dashboardConfig",{apiEndPoint:"api"}),angular.module("dashboard").config(["$stateProvider","$urlRouterProvider",function(e,t){}]),angular.module("dashboard").filter("informativeCount",["$sce",function(e){return function(e,t){return e?e.length===t?t+"+":e.length:0}}]),angular.module("dashboard").filter("arrayCount",["$sce",function(e){return function(e){return e?e.length:0}}]),angular.module("dashboard").filter("balanceStyler",["$sce",function(e){return function(e){var t="0",n="00";if(e){var r=e.split(".");t=r[0],n=r[1]}return t+"<small>."+n+"<small> XIN </small></small>"}}]),angular.module("dashboard").service("DashboardService",["SessionStorageService","Restangular","baseConfig","dashboardConfig","NodeService","$rootScope","OptionsService",function(e,t,n,r,o,i,a){this.getAccountPolls=function(e,n,i){t.setBaseUrl(o.getNodeUrl(a.getOption("CONNECTION_MODE"),a.getOption("RANDOMIZE_NODES")));var s={requestType:"getPolls",account:e,firstIndex:n,lastIndex:i,includeFinished:!0};return t.all(r.apiEndPoint).customGET("",s)},this.getAccountAliases=function(e,n,i){t.setBaseUrl(o.getNodeUrl(a.getOption("CONNECTION_MODE"),a.getOption("RANDOMIZE_NODES")));var s={requestType:"getAliases",firstIndex:n,lastIndex:i,includeFinished:!0,account:e};return t.all(r.apiEndPoint).customGET("",s)},this.getAccountAssetsAndBalances=function(e){t.setBaseUrl(o.getNodeUrl(a.getOption("CONNECTION_MODE"),a.getOption("RANDOMIZE_NODES")));var n={requestType:"getAccount",includeAssets:"true",includeCurrencies:"true",includeEffectiveBalance:"true",includeLessors:"true",account:e};return t.all(r.apiEndPoint).customGET("",n)},this.getAccountBlockChainTransactions=function(e,n,i){t.setBaseUrl(o.getNodeUrl(a.getOption("CONNECTION_MODE"),a.getOption("RANDOMIZE_NODES")));var s={requestType:"getBlockchainTransactions",account:e,firstIndex:n,lastIndex:i,withMessage:!0};return t.all(r.apiEndPoint).customGET("",s)}}]),angular.module("dashboard").controller("DashboardCtrl",["$scope","SessionStorageService","$state","$uibModal","$stateParams","DashboardService","informativeCountFilter","loginConfig","arrayCountFilter","balanceStylerFilter","amountTQTFilter",function(e,t,n,r,o,i,a,s,l,c,u){function d(e){var n=t.getFromSession(s.SESSION_ACCOUNT_DETAILS_KEY);return e?n[e]:n}function p(){e.getAccountPollsCount(),e.getAccountAliasesCount(),e.getAccountAssetsAndBalances(),e.getAccountMessagesCount()}e.closeAllDashboards=!1,e.getAccountPollsCount=function(){var t=d("accountRs");i.getAccountPolls(t,0,100).then(function(t){e.pollsCount=a(t.polls,100)},function(e){})},e.getAccountAliasesCount=function(){var t=d("accountId");i.getAccountAliases(t,0,100).then(function(t){e.aliasesCount=a(t.aliases,100)},function(e){})},e.getAccountMessagesCount=function(){var t=d("accountRs");i.getAccountBlockChainTransactions(t,0,100).then(function(t){e.messagesCount=a(t.transactions,100)},function(e){})},e.getAccountAssetsAndBalances=function(){var t=d("accountRs");i.getAccountAssetsAndBalances(t).then(function(t){e.currenciesCount=l(t.accountCurrencies),e.assetsCount=l(t.assetBalances),e.accountBalance=u(t.balanceTQT)},function(e){})},e.reloadDashboard=p,e.$on("reload-dashboard",p)}]),angular.module("crowdfunding",["baseClient","crypto","ui.router","ui.bootstrap","multiStepForm","node","options"]),angular.module("crowdfunding").constant("crowdfundingConfig",{crowdfundingEndPoint:"api"}),angular.module("crowdfunding").config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("client.signedin.crowdfunding",{url:"^/crowdfunding",templateUrl:"./crowdfunding/views/main.html",abstract:!0}).state("client.signedin.crowdfunding.mycampaigns",{url:"^/crowdfunding/mycampaigns",templateUrl:"./crowdfunding/views/mycampaigns.html",controller:"MyCampaignsCtrl"}).state("client.signedin.crowdfunding.allcampaigns",{url:"^/crowdfunding/allcampaigns",templateUrl:"./crowdfunding/views/allcampaigns.html",controller:"AllCampaignsCtrl"})}]),angular.module("crowdfunding").service("CrowdfundingService",["nodeConfig","SessionStorageService","NodeService","baseConfig","Restangular","loginConfig","CryptoService","TransactionService","$rootScope","OptionsService","crowdfundingConfig",function(e,t,n,r,o,i,a,s,l,c,u){this.createCampaign=function(e,t,i,a,l,u,d,p,m,f,g,h){o.setBaseUrl(n.getNodeUrl(c.getOption("CONNECTION_MODE"),c.getOption("RANDOMIZE_NODES")));var S={publicKey:e,requestType:"issueCurrency",name:t,code:i,description:a,type:l,initialSupply:parseInt(u),reserveSupply:parseInt(d),maxSupply:parseInt(p),minReservePerUnitTQT:parseInt(g),issuanceHeight:parseInt(h),decimals:parseInt(m),feeTQT:parseInt(f*r.TOKEN_QUANTS,10),broadcast:"false",deadline:c.getOption("DEADLINE")};return s.createTransaction(S)},this.getAllCampaigns=function(e,t,r){o.setBaseUrl(n.getNodeUrl(c.getOption("CONNECTION_MODE"),c.getOption("RANDOMIZE_NODES")));var i={requestType:"getAllCrowdfundings",firstIndex:e,lastIndex:t,includeCounts:!1,includeAmounts:!0,account:r,orderColumn:"issuance_height",order:"desc"};return o.all(u.crowdfundingEndPoint).customGET("",i)},this.getCampaignFounders=function(e,t,r){o.setBaseUrl(n.getNodeUrl(c.getOption("CONNECTION_MODE")));var i={requestType:"getCurrencyFounders",currency:e,firstIndex:t,lastIndex:r};return o.all(u.crowdfundingEndPoint).customGET("",i)},this.setCampaignReserve=function(e,t,i){o.setBaseUrl(n.getNodeUrl(c.getOption("CONNECTION_MODE")));var a={requestType:"currencyReserveIncrease",publicKey:i,currency:e,amountPerUnitTQT:t,feeTQT:parseInt(1*r.TOKEN_QUANTS,10),broadcast:"false",deadline:c.getOption("DEADLINE")};return s.createTransaction(a)},this.getCampaignClaim=function(e,t){o.setBaseUrl(n.getNodeUrl(c.getOption("CONNECTION_MODE")));var r={requestType:"currencyReserveClaim",currency:e,units:t,lastIndex:lastIndex};return o.all(u.crowdfundingEndPoint).customGET("",r)}}]),angular.module("crowdfunding").controller("CrowdfundingMainCtrl",["$scope","CrowdfundingService","amountTQTFilter","timestampFilter","DTOptionsBuilder","DTColumnBuilder","$uibModal","$compile","baseConfig","supplyFilter","searchTermFilter",function(e,t,n,r,o,i,a,s,l,c,u){e.openCreateCampaignModal=function(){a.open({animation:!0,templateUrl:"crowdfunding/modals/create-campaign-form.html",size:"lg",controller:"CampaignFormCtrl",resolve:{params:function(){return{}}}})},e.openReserveCampaignModal=function(e,t,n,r,o){a.open({animation:!0,templateUrl:"crowdfunding/modals/reserve-campaign-form.html",size:"lg",controller:"CampaignFormCtrl",resolve:{params:function(){return{currency:e,decimals:t,minReservePerUnitTQT:n,code:r,reserveSupply:o}}}})},e.openFoundersCampaignModal=function(e){a.open({animation:!0,templateUrl:"crowdfunding/modals/founders-campaign-details.html",size:"lg",controller:"FoundersCampaignsCtrl",resolve:{params:function(){return{currency:e}}}})}}]),angular.module("crowdfunding").controller("CampaignFormCtrl",["$scope","$uibModalInstance","params",function(e,t,n){e.cancel=function(){t.dismiss("cancel")},e.$on("close-modal",function(){t.dismiss("cancel")});var r=[{templateUrl:"crowdfunding/modals/create-campaign-details.html",title:"Create Campaign Details 1",controller:"CreateCampaignsCtrl",isolatedScope:!0,data:n},{templateUrl:"crowdfunding/modals/create-campaign-details-2.html",title:"Create Campaign Details 2",controller:"CreateCampaignsCtrl",isolatedScope:!0,data:n},{templateUrl:"crowdfunding/modals/create-campaign-confirm.html",title:"Create Campaign Confirmation",controller:"CreateCampaignsCtrl",isolatedScope:!0}],o=[{templateUrl:"crowdfunding/modals/reserve-campaign-details.html",title:"Reserve Campaign Details",controller:"ReserveCampaignsCtrl",isolatedScope:!0,data:n},{templateUrl:"crowdfunding/modals/reserve-campaign-confirm.html",title:"Reserve Campaign Confirmation",controller:"ReserveCampaignsCtrl",isolatedScope:!0}];e.steps={},e.steps.createCampaignSteps=r,e.steps.reserveCampaignSteps=o}]),angular.module("crowdfunding").controller("AllCampaignsCtrl",["$scope","CrowdfundingService","amountTQTFilter","timestampFilter","DTOptionsBuilder","DTColumnBuilder","$uibModal","$compile","baseConfig","supplyFilter","searchTermFilter","CommonsService","SessionStorageService","pollDaysFilter",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m){e.dtAllCampaignsOptions=o.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("info",!1).withOption("ordering",!1).withOption("serverSide",!0).withDataProp("currencies").withOption("processing",!0).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){s(t)(e)}).withOption("ajax",function(e,n,r){var o=e.start+e.length-1;t.getAllCampaigns(e.start,o).then(function(e){n({iTotalRecords:1e3,iTotalDisplayRecords:1e3,currencies:e.currencies})})}).withDisplayLength(10).withBootstrap(),e.dtAllCampaignsColumns=[i.newColumn("currency").withTitle("Details").notSortable().renderWith(function(e,t,n,r){return'<button type="button" class="btn btn-success btn-xs" ng-controller="SearchCtrl" ng-click="searchValue(\''+e+'\')"><i class="fa fa-list-ul" aria-hidden="true" style="width:15px;"></i></button>'}),i.newColumn("code").withTitle("Ticker").notSortable().renderWith(function(e,t,n,r){return"<a ng-click=\"openCurrencyDetailsModal('"+n.code+'\')" ng-controller="CurrenciesMainCtrl"> '+e+"</a>"}),i.newColumn("issuanceHeight").withTitle("Blocks").notSortable().renderWith(function(e,t,n,r){var o=(n.creationHeight,n.issuanceHeight),i=p.getFromSession(l.SESSION_CURRENT_BLOCK),a=o-i,s=0;return s=i&&i<e?(parseInt(e)-i)/1440:0,s<0&&(s=0),a<0&&(a=0),a}),i.newColumn("issuanceHeight").withTitle("Days").notSortable().renderWith(function(e,t,n,r){var o=(n.creationHeight,n.issuanceHeight),i=p.getFromSession(l.SESSION_CURRENT_BLOCK),a=o-i,s=0;return s=i&&i<e?(parseInt(e)-i)/1440:0,s<0&&(s=0),a<0&&(a=0),m(s.toLocaleString("en-US",{maximumFractionDigits:2,minimumFractionDigits:2}))}),i.newColumn("reserveSupply").withTitle("Supply").notSortable().renderWith(function(e,t,n,r){return c(e,n.decimals)}),i.newColumn("decimals").withTitle("Status").notSortable().renderWith(function(e,t,n,r){var o="danger",i=parseInt(100*n.currentReservePerUnitTQT/n.minReservePerUnitTQT);return i>25&&i<=50?o="danger":i>50&&i<=75?o="warning":i>75&&(o="success"),'<uib-progressbar class="progress-striped active" value="'+i+'" type="'+o+'" style="height:20px;margin-bottom:0px;background-color: #aaa;">'+i+"%</uib-progressbar>"}),i.newColumn("currentReservePerUnitTQT").withTitle("Raised").notSortable().renderWith(function(e,t,r,o){var i=r.reserveSupply*e;return n(i)}),i.newColumn("reserveSupply").withTitle("Goal").notSortable().renderWith(function(e,t,r,o){var i=e*r.minReservePerUnitTQT;return n(i)}),i.newColumn("currency").withTitle("Action").notSortable().renderWith(function(e,t,n,r){var o=!1,i=!1,a=(n.creationHeight,n.issuanceHeight),s=p.getFromSession(l.SESSION_CURRENT_BLOCK),c=a-s;c>0&&(i=!0),c<=0&&(o=!0);return'<button type="button" class="btn btn-default btn-xs"   popover-placement="left" popover-trigger="\'mouseenter\'" uib-popover= "TradeDesk" ng-controller="CurrenciesMainCtrl"ng-disabled="'+i+'" ng-click="openTradeDesk(\''+e+"','"+n.decimals+'\')"> <i class="fa fa-bar-chart" aria-hidden="true" style="width:15px;"></i> </button> <button type="button" class="btn btn-default btn-xs"   popover-placement="left" popover-trigger="\'mouseenter\'" uib-popover= "Reserve Founders" ng-controller="CrowdfundingMainCtrl"ng-disabled="false" ng-click="openFoundersCampaignModal(\''+e+'\')"> <i class="fa fa-user" aria-hidden="true" style="width:15px;"></i> </button> <button type="button" class="btn btn-default btn-xs"   popover-placement="left" popover-trigger="\'mouseenter\'" uib-popover= "Reserve Units" ng-controller="CrowdfundingMainCtrl"ng-disabled="'+o+'" ng-click="openReserveCampaignModal(\''+e+"','"+n.decimals+"','"+n.minReservePerUnitTQT+"','"+n.code+"','"+n.reserveSupply+'\')"> <i class="fa fa-bus" aria-hidden="true" style="width:15px;"></i> </button>'})],e.dtAllCampaignsInstanceCallback=function(t){e.dtInstance=t},e.reloadAllCampaigns=function(){e.dtInstance&&e.dtInstance._renderer.rerender()}}]),angular.module("crowdfunding").controller("MyCampaignsCtrl",["$scope","CrowdfundingService","amountTQTFilter","timestampFilter","DTOptionsBuilder","DTColumnBuilder","$uibModal","$compile","baseConfig","supplyFilter","searchTermFilter","CommonsService","SessionStorageService","pollDaysFilter","AccountService",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f){e.dtMyCampaignsOptions=o.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("info",!1).withOption("ordering",!1).withOption("serverSide",!0).withDataProp("currencies").withOption("processing",!0).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){s(t)(e)}).withOption("ajax",function(e,n,r){var o=e.start+e.length-1,i=f.getAccountDetailsFromSession("accountId");t.getAllCampaigns(e.start,o,i).then(function(e){e.currencies||(e.currencies={}),n({iTotalRecords:1e3,iTotalDisplayRecords:1e3,currencies:e.currencies})})}).withDisplayLength(10).withBootstrap(),e.dtMyCampaignsColumns=[i.newColumn("currency").withTitle("Details").notSortable().renderWith(function(e,t,n,r){return'<button type="button" class="btn btn-success btn-xs" ng-controller="SearchCtrl" ng-click="searchValue(\''+e+'\')"><i class="fa fa-list-ul" aria-hidden="true" style="width:15px;"></i></button>'}),i.newColumn("code").withTitle("Ticker").notSortable().renderWith(function(e,t,n,r){return"<a ng-click=\"openCurrencyDetailsModal('"+n.code+'\')" ng-controller="CurrenciesMainCtrl"> '+e+"</a>"}),i.newColumn("issuanceHeight").withTitle("Blocks").notSortable().renderWith(function(e,t,n,r){var o=(n.creationHeight,n.issuanceHeight),i=p.getFromSession(l.SESSION_CURRENT_BLOCK),a=o-i,s=0;return s=i&&i<e?(parseInt(e)-i)/1440:0,s<0&&(s=0),a<0&&(a=0),a}),i.newColumn("issuanceHeight").withTitle("Days").notSortable().renderWith(function(e,t,n,r){var o=(n.creationHeight,n.issuanceHeight),i=p.getFromSession(l.SESSION_CURRENT_BLOCK),a=o-i,s=0;return s=i&&i<e?(parseInt(e)-i)/1440:0,s<0&&(s=0),a<0&&(a=0),m(s.toLocaleString("en-US",{maximumFractionDigits:2,minimumFractionDigits:2}))}),i.newColumn("reserveSupply").withTitle("Supply").notSortable().renderWith(function(e,t,n,r){return c(e,n.decimals)}),i.newColumn("decimals").withTitle("Status").notSortable().renderWith(function(e,t,n,r){var o="danger",i=parseInt(100*n.currentReservePerUnitTQT/n.minReservePerUnitTQT);return i>25&&i<=50?o="danger":i>50&&i<=75?o="warning":i>75&&(o="success"),'<uib-progressbar class="progress-striped active" value="'+i+'" type="'+o+'" style="height:20px;margin-bottom:0px;background-color: #aaa;">'+i+"%</uib-progressbar>"}),i.newColumn("currentReservePerUnitTQT").withTitle("Raised").notSortable().renderWith(function(e,t,r,o){var i=r.reserveSupply*e;return n(i)}),i.newColumn("reserveSupply").withTitle("Goal").notSortable().renderWith(function(e,t,r,o){var i=e*r.minReservePerUnitTQT;return n(i)}),i.newColumn("currency").withTitle("Action").notSortable().renderWith(function(e,t,n,r){var o=!1,i=!1,a=(n.creationHeight,n.issuanceHeight),s=p.getFromSession(l.SESSION_CURRENT_BLOCK),c=a-s;c>0&&(i=!0),c<=0&&(o=!0)
;return'<button type="button" class="btn btn-default btn-xs"   popover-placement="left" popover-trigger="\'mouseenter\'" uib-popover= "TradeDesk" ng-controller="CurrenciesMainCtrl"ng-disabled="'+i+'" ng-click="openTradeDesk(\''+e+"','"+n.decimals+'\')"> <i class="fa fa-bar-chart" aria-hidden="true" style="width:15px;"></i> </button> <button type="button" class="btn btn-default btn-xs"   popover-placement="left" popover-trigger="\'mouseenter\'" uib-popover= "Reserve Founders" ng-controller="CrowdfundingMainCtrl"ng-disabled="false" ng-click="openFoundersCampaignModal(\''+e+'\')"> <i class="fa fa-user" aria-hidden="true" style="width:15px;"></i> </button> <button type="button" class="btn btn-default btn-xs"   popover-placement="left" popover-trigger="\'mouseenter\'" uib-popover= "Reserve Units" ng-controller="CrowdfundingMainCtrl"ng-disabled="'+o+'" ng-click="openReserveCampaignModal(\''+e+"','"+n.decimals+"','"+n.minReservePerUnitTQT+"','"+n.code+"','"+n.reserveSupply+'\')"> <i class="fa fa-bus" aria-hidden="true" style="width:15px;"></i> </button>'})],e.dtMyCampaignsInstanceCallback=function(t){e.dtInstance=t},e.reloadMyCampaigns=function(){e.dtInstance&&e.dtInstance._renderer.rerender()}}]),angular.module("crowdfunding").controller("CreateCampaignsCtrl",["$scope","CrowdfundingService","SessionStorageService","$state","CryptoService","loginConfig","AlertService","alertConfig","$validation","$uibModal","multiStepFormScope","$rootScope","CommonsService","CurrenciesService",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m){e.createCampaignForm1=angular.copy(u.createCampaignForm1),e.createCampaignForm2=angular.copy(u.createCampaignForm2),e.$watchGroup(["createCampaignForm2.reserveSupply","createCampaignForm2.minReservePerUnitTQT"],function(){e.createCampaignForm2&&(e.createCampaignForm2.maxSupply=parseInt(e.createCampaignForm2.reserveSupply),e.createCampaignForm2.totalAmount=parseInt(e.createCampaignForm2.reserveSupply)*e.createCampaignForm2.minReservePerUnitTQT)}),e.issuanceHeight=1440,e.day=1440,e.hmax=43200,e.days=1,e.increment=function(){if(e.issuanceHeight>=e.hmax)return void(e.issuanceHeight=e.hmax);e.issuanceHeight=e.issuanceHeight+e.day,e.createCampaignForm2.issuanceHeight=e.issuanceHeight,e.days=parseInt(e.issuanceHeight/e.day)},e.decrement=function(){if(e.issuanceHeight<=e.day)return void(e.issuanceHeight=e.day);e.issuanceHeight=e.issuanceHeight-e.day,e.createCampaignForm2.issuanceHeight=e.issuanceHeight,e.days=parseInt(e.issuanceHeight/e.day)},e.max=function(){e.issuanceHeight=e.hmax,e.createCampaignForm2.issuanceHeight=e.hmax,e.days=parseInt(e.issuanceHeight/e.day)},e.min=function(){e.issuanceHeight=e.day,e.createCampaignForm2.issuanceHeight=e.day,e.days=parseInt(e.issuanceHeight/e.day)},e.getBlockChainStatus=function(){m.getBlockChainStatus().then(function(t){e.createCampaignForm2.currentHeight=t.numberOfBlocks})},e.$on("$destroy",function(){u.createCampaignForm1=angular.copy(e.createCampaignForm1),u.createCampaignForm2=angular.copy(e.createCampaignForm2)}),e.hasPrivateKeyInSession=function(){return!!n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY)},e.createCampaign=function(){var r=u.createCampaignForm1,l=u.createCampaignForm2,c=r.name,d=r.code.toUpperCase(),m=r.desc,f=parseInt(l.initialSupply)*Math.pow(10,0),g=parseInt(l.issuanceHeight)+parseInt(l.currentHeight),h=1e8*l.minReservePerUnitTQT,S=parseInt(l.reserveSupply)*Math.pow(10,0),C=S;e.minReservePerUnitTotal=C*h/1e8;var T=1;T||(T=1);var b,y=p.getAccountDetailsFromSession("publicKey"),O=l.secretPhrase;b=O?o.secretPhraseToPrivateKey(O):n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY),e.createCampaignPromise=t.createCampaign(y,c,d,m,5,f,S,C,0,T,h,g).then(function(t){if(t.errorCode)a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},s.createCampaignAlert);else{var n=t.unsignedTransactionBytes,r=o.signatureHex(n,b);e.transactionBytes=o.signTransactionHex(n,r),e.validBytes=!0,e.tx_fee=t.transactionJSON.feeTQT/1e8,e.tx_amount=t.transactionJSON.amountTQT/1e8,e.tx_total=e.tx_fee+e.tx_amount}},function(e){a.addAlert(a.getNoConnectionMessage(e),s.createCampaignAlert)})},e.broadcastTransaction=function(t){e.createCampaignPromise=p.broadcastTransaction(t).then(function(t){e.$emit("close-modal"),d.$broadcast("reload-dashboard"),t.errorCode?a.addAlert({type:"danger",msg:"Unable to broadcast transaction. Reason: "+t.errorDescription}):a.addAlert({type:"success",msg:"Transaction succesfull broadcasted with Id : "+t.transaction})},function(e){a.addAlert(a.getNoConnectionMessage(e),s.createCampaignAlert)})}}]),angular.module("crowdfunding").controller("ReserveCampaignsCtrl",["$scope","CrowdfundingService","SessionStorageService","$state","CryptoService","loginConfig","AlertService","alertConfig","$validation","$uibModal","multiStepFormScope","$rootScope","CommonsService","CurrenciesService","amountTQTFilter",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f){e.form=e.$getActiveStep().data,e.cancel=function(){$uibModalInstance.dismiss("cancel")},e.$on("$destroy",function(){u.reserveCampaignForm=angular.copy(e.reserveCampaignForm)}),e.reserveCampaignForm=angular.copy(u.reserveCampaignForm),e.initStep1=function(){var t=e.$getActiveStep().data||{};t.currency&&(e.reserveCampaignForm.currency=t.currency,e.reserveCampaignForm.decimals=t.decimals,e.reserveCampaignForm.minReservePerUnitTQT=t.minReservePerUnitTQT,e.reserveCampaignForm.code=t.code,e.reserveCampaignForm.reserveSupply=t.reserveSupply,e.reserveCampaignForm.goal=f(t.reserveSupply*t.minReservePerUnitTQT),e.reserveCampaignForm.raised=f(t.reserveSupply*t.minReservePerUnitTQT))},e.$watchCollection("reserveCampaignForm.amountTotal",function(){e.reserveCampaignForm.amountUnit=parseFloat(e.reserveCampaignForm.amountTotal/e.reserveCampaignForm.reserveSupply)}),e.reserveCampaign=function(){var r=u.reserveCampaignForm,l=r.currency,c=(r.decimals,parseInt(1e8*r.amountUnit)),d=(r.reserveSupply,Math.pow(10,r.decimals),1);d||(d=1);var m,f=p.getAccountDetailsFromSession("publicKey"),g=r.secretPhrase;m=g?o.secretPhraseToPrivateKey(g):n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY),e.reserveCampaignPromise=t.setCampaignReserve(l,c,f).then(function(t){if(t.errorCode)a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},s.reserveCampaignAlert);else{var n=t.unsignedTransactionBytes,r=o.signatureHex(n,m);e.transactionBytes=o.signTransactionHex(n,r),e.validBytes=!0,e.tx_fee=t.transactionJSON.feeTQT/1e8,e.tx_amount=t.transactionJSON.amountTQT/1e8,e.tx_total=e.tx_fee+e.tx_amount}},function(e){a.addAlert(a.getNoConnectionMessage(e),s.reserveCampaignAlert)})},e.broadcastTransaction=function(t){e.createCampaignPromise=p.broadcastTransaction(t).then(function(t){e.$emit("close-modal"),d.$broadcast("reload-dashboard"),t.errorCode?a.addAlert({type:"danger",msg:"Unable to broadcast transaction. Reason: "+t.errorDescription}):a.addAlert({type:"success",msg:"Transaction succesfull broadcasted with Id : "+t.transaction})},function(e){a.addAlert(a.getNoConnectionMessage(e),s.reserveCampaignAlert)})}}]),angular.module("crowdfunding").controller("FoundersCampaignsCtrl",["$scope","CrowdfundingService","SessionStorageService","$state","CryptoService","loginConfig","AlertService","alertConfig","$validation","$uibModal","$rootScope","CommonsService","CurrenciesService","amountTQTFilter","$uibModalInstance","DTOptionsBuilder","DTColumnBuilder","params","$compile","searchTermFilter",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g,h,S,C,T){var b=S.currency;e.dtFoundersCampaignsOptions=g.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("info",!1).withOption("ordering",!1).withOption("serverSide",!0).withDataProp("data").withOption("processing",!0).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){C(t)(e)}).withOption("ajax",function(e,n,r){var o=e.start+e.length-1;t.getCampaignFounders(b,e.start,o).then(function(e){n({iTotalRecords:1e3,iTotalDisplayRecords:1e3,data:e.founders})})}).withDisplayLength(10).withBootstrap(),e.dtFoundersCampaignsColumns=[h.newColumn("currency").withTitle("Details").notSortable().renderWith(function(e,t,n,r){return T(e)}),h.newColumn("accountRS").withTitle("Account").notSortable().renderWith(function(e,t,n,r){return T(e)}),h.newColumn("amountPerUnitTQT").withTitle("Amount per Unit").notSortable().renderWith(function(e,t,n,r){return m(e)})],e.cancel=function(){f.dismiss("cancel")},e.dtFoundersInstanceCallback=function(t){e.dtInstance=t},e.reloadFoundersCampaigns=function(){e.dtInstance&&e.dtInstance._renderer.rerender()}}]),angular.module("subscription",["baseClient","crypto","ui.router","ui.bootstrap","multiStepForm","node","options"]),angular.module("subscription").constant("subscriptionConfig",{subscriptionEndPoint:"api"}),angular.module("subscription").config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("client.signedin.subscription",{url:"^/subscriptions",templateUrl:"./subscriptions/views/main.html",abstract:!0}).state("client.signedin.subscription.mysubscriptions",{url:"^/subscriptions/mysubscriptions",templateUrl:"./subscriptions/views/mysubscriptions.html",controller:"MySubscriptionsCtrl"})}]),angular.module("subscription").service("SubscriptionService",["nodeConfig","SessionStorageService","NodeService","baseConfig","Restangular","loginConfig","CryptoService","TransactionService","$rootScope","OptionsService","subscriptionConfig",function(e,t,n,r,o,i,a,s,l,c,u){this.createSubscription=function(e,t,i,a,l){o.setBaseUrl(n.getNodeUrl(c.getOption("CONNECTION_MODE"),c.getOption("RANDOMIZE_NODES")));var u={publicKey:e,requestType:"sendMoneySubscription",recipient:t,amountTQT:i,frequency:a,feeTQT:parseInt(l*r.TOKEN_QUANTS,10),broadcast:"false",deadline:c.getOption("DEADLINE")};return s.createTransaction(u)},this.subscriptionCancel=function(e,t,i){o.setBaseUrl(n.getNodeUrl(c.getOption("CONNECTION_MODE"),c.getOption("RANDOMIZE_NODES")));var a={requestType:"subscriptionCancel",publicKey:e,subscription:t,feeTQT:parseInt(i*r.TOKEN_QUANTS,10),broadcast:"false",deadline:c.getOption("DEADLINE")};return s.createTransaction(a)},this.getSubscription=function(e,t,r){o.setBaseUrl(n.getNodeUrl(c.getOption("CONNECTION_MODE")));var i={requestType:"getSubscription",subscription:e,firstIndex:t,lastIndex:r};return o.all(u.subscriptionEndPoint).customGET("",i)},this.getAccountSubscriptions=function(e,t,r){o.setBaseUrl(n.getNodeUrl(c.getOption("CONNECTION_MODE")));var i={requestType:"getAccountSubscriptions",account:e,firstIndex:t,lastIndex:r};return o.all(u.subscriptionEndPoint).customGET("",i)},this.getSubscriptionsToAccount=function(e,t,r){o.setBaseUrl(n.getNodeUrl(c.getOption("CONNECTION_MODE")));var i={requestType:"getSubscriptionsToAccount",account:e,firstIndex:t,lastIndex:r};return o.all(u.subscriptionEndPoint).customGET("",i)}}]),angular.module("subscription").controller("SubscriptionsMainCtrl",["$scope","SubscriptionService","amountTQTFilter","timestampFilter","DTOptionsBuilder","DTColumnBuilder","$uibModal","$compile","baseConfig","supplyFilter","searchTermFilter",function(e,t,n,r,o,i,a,s,l,c,u){e.openCreateSubscriptionModal=function(){a.open({animation:!0,templateUrl:"subscriptions/modals/create-subscription-form.html",size:"lg",controller:"SubscriptionFormCtrl",resolve:{params:function(){return{}}}})},e.openCancelSubscriptionModal=function(e,t){a.open({animation:!0,templateUrl:"subscriptions/modals/cancel-subscription-form.html",size:"lg",controller:"SubscriptionFormCtrl",resolve:{params:function(){return{id:e,account:t}}}})}}]),angular.module("subscription").controller("SubscriptionFormCtrl",["$scope","$uibModalInstance","params",function(e,t,n){e.cancel=function(){t.dismiss("cancel")},e.$on("close-modal",function(){t.dismiss("cancel")});var r=[{templateUrl:"subscriptions/modals/create-subscription-details.html",title:"Create Subscription Details",controller:"CreateSubscriptionCtrl",isolatedScope:!0,data:n},{templateUrl:"subscriptions/modals/create-subscription-confirm.html",title:"Create Subscription Confirmation",controller:"CreateSubscriptionCtrl",isolatedScope:!0}],o=[{templateUrl:"subscriptions/modals/cancel-subscription-confirm.html",title:"Cancel Subscription Confirmation",controller:"CancelSubscriptionCtrl",isolatedScope:!0,data:n}];e.steps={},e.steps.createSubscriptionSteps=r,e.steps.cancelSubscriptionSteps=o}]),angular.module("subscription").controller("MySubscriptionsCtrl",["$scope","SubscriptionService","amountTQTFilter","timestampFilter","DTOptionsBuilder","DTColumnBuilder","$uibModal","$compile","baseConfig","supplyFilter","searchTermFilter","CommonsService","SessionStorageService","pollDaysFilter","AccountService",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f){e.dtMySubscriptionsOptions=o.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("info",!1).withOption("ordering",!1).withOption("serverSide",!0).withDataProp("data").withOption("processing",!0).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){s(t)(e)}).withOption("ajax",function(e,n,r){var o=e.start+e.length-1,i=f.getAccountDetailsFromSession("accountId");t.getAccountSubscriptions(i,e.start,o).then(function(e){e.subscriptions||(e.subscriptions={}),n({iTotalRecords:1e3,iTotalDisplayRecords:1e3,data:e.subscriptions})})}).withDisplayLength(10).withBootstrap(),e.dtMySubscriptionsColumns=[i.newColumn("id").withTitle("Details").notSortable().renderWith(function(e,t,n,r){return'<button type="button" class="btn btn-success btn-xs" ng-controller="SearchCtrl" ng-click="searchValue(\''+e+'\')"><i class="fa fa-list-ul" aria-hidden="true" style="width:15px;"></i></button>'}),i.newColumn("frequency").withTitle("Interval (D)").notSortable().renderWith(function(e,t,n,r){return(e/86400).toFixed(4)}),i.newColumn("timeNext").withTitle("Next Payment").notSortable().renderWith(function(e,t,n,o){return r(e)}),i.newColumn("amountTQT").withTitle("Amount").notSortable().renderWith(function(e,t,r,o){return n(e)}),i.newColumn("recipientRS").withTitle("Recipient").notSortable().renderWith(function(e,t,n,r){return e?u(e):e}),i.newColumn("id").withTitle("Action").notSortable().renderWith(function(e,t,n,r){return'<button type="button" class="btn btn-default btn-xs"   popover-placement="left" popover-trigger="\'mouseenter\'" uib-popover= "Cancel Subscription" ng-controller="SubscriptionsMainCtrl"ng-disabled="false" ng-click="openCancelSubscriptionModal(\''+e+"','"+n.recipientRS+'\')"> <i class="fa fa-times" aria-hidden="true" style="width:15px;"></i> </button>'})],e.dtMySubscriptionsInstanceCallback=function(t){e.dtInstance=t},e.reloadMySubscriptions=function(){e.dtInstance&&e.dtInstance._renderer.rerender()}}]),angular.module("subscription").controller("CreateSubscriptionCtrl",["$scope","SubscriptionService","SessionStorageService","$state","CryptoService","loginConfig","AlertService","alertConfig","$validation","$uibModal","multiStepFormScope","$rootScope","CommonsService","AccountService","amountToQuantFilter",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f){e.$on("$destroy",function(){u.createSubscription=angular.copy(e.createSubscription)}),e.openAddressBookModal=function(){c.open({animation:!0,templateUrl:"addressbook/views/addressbook-light.html",controller:"AddressBookCtrl",resolve:{params:function(){return{closeOnClick:!0}}}}).result.then(function(t){e.createSubscription.recipientRS=t.accountRS})},e.hasPrivateKeyInSession=function(){return!!n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY)},e.createSubscription=function(){var r=u.createSubscription;e.createSubscription.recipientRS=r.recipientRS,e.createSubscription.amount=r.amount,e.createSubscription.interval=r.interval;var l=r.recipientRS,c=f(r.amount),d=parseInt(86400*r.interval),p=m.getAccountDetailsFromSession("publicKey"),g=n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY);e.setCreateSubscriptionPromise=m.getAccountDetails(l).then(function(n){var r=n.publicKey;n.errorCode&&5!==n.errorCode?a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+n.errorDescription},s.createSubscriptionAlert):(e.accountDetails=n,r||a.addAlert({type:"info",msg:"Note: This account never had an outbound transaction. Make sure this account is the right one. In doubt, ask the account holder for his public key and add it on the former page to this transaction."},s.createSubscriptionAlert),e.setCreateSubscriptionPromise=t.createSubscription(p,l,c,d,1).then(function(t){if(t.errorCode)a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},s.createSubscriptionAlert);else{var n=t.unsignedTransactionBytes,r=o.signatureHex(n,g);e.transactionBytes=o.signTransactionHex(n,r),e.validBytes=!0,e.tx_fee=t.transactionJSON.feeTQT/1e8,e.tx_amount=t.transactionJSON.amountTQT/1e8,e.tx_total=e.tx_fee+e.tx_amount}},function(e){a.addAlert(a.getNoConnectionMessage(e),s.createSubscriptionAlert)}))},function(e){a.addAlert(a.getNoConnectionMessage(e),s.createSubscriptionAlert)})},e.broadcastTransaction=function(t){e.sendTokenPromise=m.broadcastTransaction(t).then(function(t){t.errorCode?a.addAlert({type:"danger",msg:"Unable to broadcast transaction. Reason: "+t.errorDescription}):(a.addAlert({type:"success",msg:"Transaction succesfull broadcasted with Id : "+t.transaction}),e.$emit("close-modal"))},function(e){a.addAlert(a.getNoConnectionMessage(e),s.createSubscriptionAlert)})}}]),angular.module("subscription").controller("CancelSubscriptionCtrl",["$scope","SubscriptionService","SessionStorageService","$state","CryptoService","loginConfig","AlertService","alertConfig","$validation","$uibModal","multiStepFormScope","$rootScope","CommonsService","AccountService","amountToQuantFilter","multiStepFormInstance",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g){e.$on("$destroy",function(){u.cancelSubscription=angular.copy(e.cancelSubscription)}),e.hasPrivateKeyInSession=function(){return!!n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY)},e.cancelSubscription=function(){var r=e.$getActiveStep().data;r&&(e.cancelSubscription.id=r.id,e.cancelSubscription.recipientRS=r.account);var l=p.getAccountDetailsFromSession("publicKey"),c=e.cancelSubscription.id,u=n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY);e.setCancelSubscriptionPromise=t.subscriptionCancel(l,c,1).then(function(t){if(t.errorCode)a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},s.cancelSubscriptionAlert);else{var n=t.unsignedTransactionBytes,r=o.signatureHex(n,u);e.transactionBytes=o.signTransactionHex(n,r),e.validBytes=!0,e.tx_fee=t.transactionJSON.feeTQT/1e8,e.tx_amount=t.transactionJSON.amountTQT/1e8,e.tx_total=e.tx_fee+e.tx_amount}},function(e){a.addAlert(a.getNoConnectionMessage(e),s.cancelSubscriptionAlert)})},e.broadcastTransaction=function(t){e.cancelOrderPromise=p.broadcastTransaction(t).then(function(t){e.$emit("close-modal"),d.$broadcast("reload-dashboard"),t.errorCode?a.addAlert({type:"danger",msg:"Unable to broadcast transaction. Reason: "+t.errorDescription}):a.addAlert({type:"success",msg:"Transaction succesfull broadcasted with Id : "+t.transaction})},function(e){a.addAlert(a.getNoConnectionMessage(e),s.cancelBidOrderModalAlert)})}}]),angular.module("escrow",["baseClient","crypto","ui.router","ui.bootstrap","multiStepForm","node","options"]),angular.module("escrow").constant("escrowConfig",{escrowEndPoint:"api"}),angular.module("escrow").config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("client.signedin.escrow",{url:"^/escrow",templateUrl:"./escrow/views/main.html",abstract:!0}).state("client.signedin.escrow.myescrow",{url:"^/escrow/myescrow",templateUrl:"./escrow/views/myescrow.html",controller:"MyEscrowCtrl"})}]),angular.module("escrow").service("EscrowService",["nodeConfig","SessionStorageService","NodeService","baseConfig","Restangular","loginConfig","CryptoService","TransactionService","$rootScope","OptionsService","escrowConfig",function(e,t,n,r,o,i,a,s,l,c,u){this.createEscrow=function(e,t,i,a,l,u,d,p){o.setBaseUrl(n.getNodeUrl(c.getOption("CONNECTION_MODE")));var m={requestType:"sendMoneyEscrow",publicKey:e,recipient:t,amountTQT:i,escrowDeadline:a,deadlineAction:l,requiredSigners:u,signers:d,feeTQT:parseInt(p*r.TOKEN_QUANTS,10),deadline:c.getOption("DEADLINE"),broadcast:"false"};return s.createTransaction(m)},this.getAccountEscrowTransactions=function(e,t,r){o.setBaseUrl(n.getNodeUrl(c.getOption("CONNECTION_MODE")));var i={requestType:"getAccountEscrowTransactions",account:e,firstIndex:t,lastIndex:r};return o.all(u.escrowEndPoint).customGET("",i)},this.getEscrowTransaction=function(e,t,r){o.setBaseUrl(n.getNodeUrl(c.getOption("CONNECTION_MODE")));var i={requestType:"getEscrowTransaction",escrow:e,firstIndex:t,lastIndex:r};return o.all(u.escrowEndPoint).customGET("",i)},this.escrowSign=function(e,t,i,a){o.setBaseUrl(n.getNodeUrl(c.getOption("CONNECTION_MODE")));var l={requestType:"escrowSign",publicKey:e,escrow:t,decision:i,feeTQT:parseInt(a*r.TOKEN_QUANTS,10),deadline:c.getOption("DEADLINE"),broadcast:"false"};return s.createTransaction(l)}}]),angular.module("escrow").controller("EscrowMainCtrl",["$scope","EscrowService","amountTQTFilter","timestampFilter","DTOptionsBuilder","DTColumnBuilder","$uibModal","$compile","baseConfig","supplyFilter","searchTermFilter",function(e,t,n,r,o,i,a,s,l,c,u){e.openCreateEscrowModal=function(){a.open({animation:!0,templateUrl:"escrow/modals/create-escrow-form.html",size:"lg",controller:"EscrowFormCtrl",resolve:{params:function(){return{}}}})},e.openSignEscrowModal=function(e){a.open({animation:!0,templateUrl:"escrow/modals/sign-escrow-form.html",size:"lg",controller:"EscrowFormCtrl",resolve:{params:function(){return{escrowId:e}}}})},e.openStatusEscrowModal=function(e){a.open({animation:!0,templateUrl:"escrow/modals/status-escrow-details.html",size:"lg",controller:"EscrowStatusCtrl",resolve:{params:function(){return{escrowId:e}}}})}}]),angular.module("escrow").controller("EscrowFormCtrl",["$scope","$uibModalInstance","params",function(e,t,n){e.cancel=function(){t.dismiss("cancel")},e.$on("close-modal",function(){t.dismiss("cancel")});var r=[{templateUrl:"escrow/modals/create-escrow-details.html",title:"Create Escrow Details",controller:"CreateEscrowCtrl",isolatedScope:!0,data:n},{templateUrl:"escrow/modals/create-escrow-confirm.html",title:"Create Escrow Confirmation",controller:"CreateEscrowCtrl",isolatedScope:!0}],o=[{templateUrl:"escrow/modals/sign-escrow-details.html",title:"Sign Escrow Details",controller:"SignEscrowCtrl",isolatedScope:!0,data:n},{templateUrl:"escrow/modals/sign-escrow-confirm.html",title:"Sign Escrow Confirmation",controller:"SignEscrowCtrl",isolatedScope:!0}];e.steps={},e.steps.createEscrowSteps=r,e.steps.signEscrowSteps=o}]),angular.module("escrow").controller("MyEscrowCtrl",["$scope","EscrowService","amountTQTFilter","timestampFilter","DTOptionsBuilder","DTColumnBuilder","$uibModal","$compile","baseConfig","supplyFilter","searchTermFilter","AccountService",function(e,t,n,r,o,a,s,l,c,u,d,p){e.dtMyEscrowOptions=o.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("info",!1).withOption("ordering",!1).withOption("serverSide",!0).withDataProp("data").withOption("processing",!0).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){l(t)(e)}).withOption("ajax",function(e,n,r){var o=e.start+e.length-1,i=p.getAccountDetailsFromSession("accountId");t.getAccountEscrowTransactions(i,e.start,o).then(function(e){e.escrows||(e.escrows={}),n({iTotalRecords:1e3,iTotalDisplayRecords:1e3,data:e.escrows})})}).withDisplayLength(10).withBootstrap(),e.dtMyEscrowColumns=[a.newColumn("id").withTitle("Details").notSortable().renderWith(function(e,t,n,r){return'<button type="button" class="btn btn-success btn-xs" ng-controller="SearchCtrl" ng-click="searchValue(\''+e+'\')"><i class="fa fa-list-ul" aria-hidden="true" style="width:15px;"></i></button>'}),a.newColumn("id").withTitle("Role").notSortable().renderWith(function(e,t,n,r){var o=p.getAccountDetailsFromSession("accountRs");return o===n.senderRS?"SENDER":o===n.recipientRS?"RECIPIENT":"SIGNER"}),a.newColumn("deadline").withTitle("Expires").notSortable().renderWith(function(e,t,n,o){return r(e)}),a.newColumn("deadlineAction").withTitle("Deadline").notSortable().renderWith(function(e,t,n,r){return e.toUpperCase()}),a.newColumn("senderRS").withTitle("Sender").notSortable().renderWith(function(e,t,n,r){return e?d(e):e}),a.newColumn("amountTQT").withTitle("Amount").notSortable().renderWith(function(e,t,r,o){return n(e)}),a.newColumn("recipientRS").withTitle("Recipient").notSortable().renderWith(function(e,t,n,r){return e?d(e):e}),a.newColumn("id").withTitle("Action").notSortable().renderWith(function(e,t,n,r){var o=p.getAccountDetailsFromSession("accountRs"),a=!0,s="btn-default";for(i=0;i<n.signers.length;i++)o===n.signers[i].idRS&&"undecided"===n.signers[i].decision&&(a=!1,s="btn-success");var l='<button type="button" class="btn '+s+' btn-xs"   popover-placement="left" popover-trigger="\'mouseenter\'" uib-popover= "Sign Escrow" ng-controller="EscrowMainCtrl"ng-disabled="'+a+'" ng-click="openSignEscrowModal(\''+n.id+'\')"> <i class="fa fa-pencil-square-o" aria-hidden="true" style="width:15px;"></i> </button>';return'<button type="button" class="btn btn-default btn-xs"   popover-placement="left" popover-trigger="\'mouseenter\'" uib-popover= "Escrow Status" ng-controller="EscrowMainCtrl"ng-disabled="false" ng-click="openStatusEscrowModal(\''+n.id+'\')"> <i class="fa fa-question-circle-o" aria-hidden="true" style="width:15px;"></i> </button> '+l})],e.dtMyEscrowInstanceCallback=function(t){e.dtInstance=t},e.reloadMyEscrow=function(){e.dtInstance&&e.dtInstance._renderer.rerender()}}]),angular.module("escrow").controller("CreateEscrowCtrl",["$scope","EscrowService","SessionStorageService","$state","CryptoService","loginConfig","AlertService","alertConfig","$validation","$uibModal","multiStepFormScope","$rootScope","CommonsService","AccountService","amountToQuantFilter","CurrenciesService",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g){e.createEscrow=angular.copy(u.createEscrow),e.$on("$destroy",function(){u.createEscrow=angular.copy(e.createEscrow)}),e.openAddressBookModal=function(){c.open({animation:!0,templateUrl:"addressbook/views/addressbook-light.html",controller:"AddressBookCtrl",resolve:{params:function(){return{closeOnClick:!0}}}}).result.then(function(t){e.createEscrow.recipientRS=t.accountRS})},e.hasPrivateKeyInSession=function(){return!!n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY)},e.escrowDeadline=1,e.day=1,e.hmax=90,e.days=1,e.increment=function(){if(e.escrowDeadline>=e.hmax)return void(e.escrowDeadline=e.hmax);e.escrowDeadline=e.escrowDeadline+e.day,e.createEscrow.escrowDeadline=e.escrowDeadline,e.days=parseInt(e.escrowDeadline/e.day)},e.decrement=function(){if(e.escrowDeadline<=e.day)return void(e.escrowDeadline=e.day);e.escrowDeadline=e.escrowDeadline-e.day,e.createEscrow.escrowDeadline=e.escrowDeadline,e.days=parseInt(e.escrowDeadline/e.day)},e.deadlineActionOptions=[{label:"Refund",value:"refund"},{label:"Relase",value:"release"},{label:"Split",value:"Split"}],e.createEscrow=function(){var r=u.createEscrow;e.createEscrow.recipientRS=r.recipientRS,e.createEscrow.amount=r.amount,e.createEscrow.escrowDeadline=r.escrowDeadline,e.createEscrow.deadlineAction=r.deadlineAction,e.createEscrow.requiredSigners=r.requiredSigners,e.createEscrow.signers=r.signers;var l=r.recipientRS,c=f(r.amount),d=parseInt(86400*r.escrowDeadline),p=r.deadlineAction,g=r.requiredSigners,h=r.signers,S=m.getAccountDetailsFromSession("publicKey"),C=n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY);e.setCreateEscrowPromise=m.getAccountDetails(l).then(function(n){var r=n.publicKey;n.errorCode&&5!==n.errorCode?a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+n.errorDescription},s.createEscrowAlert):(e.accountDetails=n,r||a.addAlert({type:"info",msg:"Note: This account never had an outbound transaction. Make sure this account is the right one. In doubt, ask the account holder for his public key and add it on the former page to this transaction."},s.createEscrowAlert),e.setCreateEscrowPromise=t.createEscrow(S,l,c,d,p,g,h,1).then(function(t){if(t.errorCode)a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},s.createEscrowAlert);else{var n=t.unsignedTransactionBytes,r=o.signatureHex(n,C);e.transactionBytes=o.signTransactionHex(n,r),e.validBytes=!0,e.tx_fee=t.transactionJSON.feeTQT/1e8,e.tx_amount=t.transactionJSON.amountTQT/1e8,e.tx_total=e.tx_fee+e.tx_amount}},function(e){a.addAlert(a.getNoConnectionMessage(e),s.createEscrowAlert)}))},function(e){a.addAlert(a.getNoConnectionMessage(e),s.createEscrowAlert)})},e.broadcastTransaction=function(t){e.createEscrowPromise=m.broadcastTransaction(t).then(function(t){t.errorCode?a.addAlert({type:"danger",msg:"Unable to broadcast transaction. Reason: "+t.errorDescription}):(a.addAlert({type:"success",msg:"Transaction succesfull broadcasted with Id : "+t.transaction}),e.$emit("close-modal"))},function(e){a.addAlert(a.getNoConnectionMessage(e),s.createEscrowAlert)})}}]),angular.module("escrow").controller("EscrowStatusCtrl",["$scope","EscrowService","amountTQTFilter","timestampFilter","DTOptionsBuilder","DTColumnBuilder","$uibModal","$compile","baseConfig","supplyFilter","searchTermFilter","AccountService","$uibModalInstance","params",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m){e.escrowId=m.escrowId,e.cancel=function(){p.dismiss("cancel")},e.$on("close-modal",function(){p.dismiss("cancel")}),e.dtStatusEscrowOptions=o.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("info",!1).withOption("ordering",!1).withOption("serverSide",!0).withDataProp("data").withOption("processing",!0).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){s(t)(e)}).withOption("ajax",function(n,r,o){var i=n.start+n.length-1;t.getEscrowTransaction(e.escrowId,n.start,i).then(function(e){r({iTotalRecords:10,iTotalDisplayRecords:10,data:e.signers})})}).withDisplayLength(5).withBootstrap(),e.dtStatusEscrowColumns=[i.newColumn("idRS").withTitle("Signer").notSortable().renderWith(function(e,t,n,r){return u(e)}),i.newColumn("decision").withTitle("Decision").notSortable().renderWith(function(e,t,n,r){return e.toUpperCase()})],e.dtStatusEscrowInstanceCallback=function(t){e.dtInstance=t},e.reloadStatusEscrow=function(){e.dtInstance&&e.dtInstance._renderer.rerender()}}]),angular.module("escrow").controller("SignEscrowCtrl",["$scope","EscrowService","SessionStorageService","$state","CryptoService","loginConfig","AlertService","alertConfig","$validation","$uibModal","multiStepFormScope","$rootScope","CommonsService","AccountService","amountToQuantFilter","CurrenciesService",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g){e.signEscrow=angular.copy(u.signEscrow),e.initStep1=function(){(e.$getActiveStep().data||{}).escrowId&&(e.signEscrow.ID=e.$getActiveStep().data.escrowId)},e.$on("$destroy",function(){u.signEscrow=angular.copy(e.signEscrow)}),e.decisionOptions=[{label:"Refund",value:"refund"},{label:"Relase",value:"release"},{label:"Split",value:"split"}],e.signEscrow=function(){var r=u.signEscrow;e.signEscrow.ID=r.ID,e.signEscrow.decision=r.decision;var l=r.ID,c=r.decision,d=m.getAccountDetailsFromSession("publicKey"),p=n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY);e.setSignEscrowPromise=t.escrowSign(d,l,c,1).then(function(t){if(t.errorCode)a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},s.signEscrowAlert);else{var n=t.unsignedTransactionBytes,r=o.signatureHex(n,p);e.transactionBytes=o.signTransactionHex(n,r),e.validBytes=!0,e.tx_fee=t.transactionJSON.feeTQT/1e8,e.tx_amount=t.transactionJSON.amountTQT/1e8,e.tx_total=e.tx_fee+e.tx_amount}},function(e){a.addAlert(a.getNoConnectionMessage(e),s.signEscrowAlert)})},e.broadcastTransaction=function(t){e.setSignEscrowPromise=m.broadcastTransaction(t).then(function(t){t.errorCode?a.addAlert({type:"danger",msg:"Unable to broadcast transaction. Reason: "+t.errorDescription}):(a.addAlert({type:"success",
msg:"Transaction succesfull broadcasted with Id : "+t.transaction}),e.$emit("close-modal"))},function(e){a.addAlert(a.getNoConnectionMessage(e),s.signEscrowAlert)})}}]),angular.module("shufflings",["baseClient","crypto","ui.router","ui.bootstrap","multiStepForm","node","assets","currencies","options"]),angular.module("shufflings").constant("shufflingsConfig",{shufflingEndPoint:"api"}),angular.module("shufflings").config(["RestangularProvider","shufflingsConfig","$stateProvider","$urlRouterProvider",function(e,t,n,r){e.setRestangularFields({options:"_options"}),n.state("client.signedin.shufflings",{url:"^/shufflings",templateUrl:"./shufflings/views/main.html",abstract:!0}).state("client.signedin.shufflings.shufflings",{url:"^/shufflings/shufflings",templateUrl:"./shufflings/views/shufflings.html",controller:"ShufflingsCtrl"}).state("client.signedin.shufflings.myshufflings",{url:"^/shufflings/myshufflings",templateUrl:"./shufflings/views/myshufflings.html",controller:"MyShufflingsCtrl"})}]),angular.module("shufflings").service("ShufflingService",["nodeConfig","SessionStorageService","NodeService","baseConfig","shufflingsConfig","Restangular","TransactionService","$rootScope","OptionsService","CommonsService",function(e,t,n,r,o,i,a,s,l,c){var u=this;this.getAllShufflings=function(e,t,r){i.setBaseUrl(n.getNodeUrl(l.getOption("CONNECTION_MODE"),l.getOption("RANDOMIZE_NODES")));var a={requestType:"getAllShufflings",firstIndex:e,lastIndex:t,includeFinished:r,includeHoldingInfo:!0};return i.all(o.shufflingEndPoint).customGET("",a)},this.getAccountShufflings=function(e,t,r,a){i.setBaseUrl(n.getNodeUrl(l.getOption("CONNECTION_MODE"),l.getOption("RANDOMIZE_NODES")));var s={requestType:"getAccountShufflings",account:e,firstIndex:t,lastIndex:r,includeFinished:a,includeHoldingInfo:!0};return i.all(o.shufflingEndPoint).customGET("",s)},this.createShuffling=function(e,t,n,o,i,s,c){var u={requestType:"shufflingCreate",amount:parseInt(t),publicKey:e,participantCount:n,registrationPeriod:o,holding:i,holdingType:s,feeTQT:parseInt(c*r.TOKEN_QUANTS,10),deadline:l.getOption("DEADLINE"),broadcast:"false"};return a.createTransaction(u)},this.registerShuffle=function(e,t,n){var o={requestType:"shufflingRegister",shufflingFullHash:n,publicKey:e,feeTQT:parseInt(t*r.TOKEN_QUANTS,10),deadline:l.getOption("DEADLINE"),broadcast:"false"};return a.createTransaction(o)},this.isLocalHostOrTestnet=function(){var e=l.getOption("CONNECTION_MODE");if("TESTNET"===e||"LOCAL_HOST"===e||"DEVTESTNET"===e)return!0;if("MANUAL"===e){if(n.getNodeUrl(l.getOption("CONNECTION_MODE"),l.getOption("RANDOMIZE_NODES")).indexOf("localhost")>-1)return!0}},this.getShufflingParticipants=function(e){i.setBaseUrl(n.getNodeUrl(l.getOption("CONNECTION_MODE"),l.getOption("RANDOMIZE_NODES")));var t={requestType:"getShufflingParticipants",shuffling:e};return i.all(o.shufflingEndPoint).customGET("",t)},this.getShuffling=function(e){i.setBaseUrl(n.getNodeUrl(l.getOption("CONNECTION_MODE"),l.getOption("RANDOMIZE_NODES")));var t={requestType:"getShuffling",shuffling:e,includeHoldingInfo:!0};return i.all(o.shufflingEndPoint).customGET("",t)},this.getShufflers=function(e,t,r,a){i.setBaseUrl(n.getNodeUrl(l.getOption("CONNECTION_MODE"),l.getOption("RANDOMIZE_NODES")));var s={requestType:"getShufflers",adminPassword:e,account:t,shufflingFullHash:r,secretPhrase:a,adminPassword:e,includeParticipantState:!0};return i.all(o.shufflingEndPoint).customGET("",s)},this.getShuffleAndStopIfExpired=function(e,t){return u.getShuffling(e).then(function(e){return e.errorCode?Promise.resolve(e):4===e.stage||5===e.stage?u.stopShuffler(e.shufflingFullHash,void 0,1,t,c.getAccountDetailsFromSession("accountRs")).then(function(e){return Promise.resolve(e)},function(e){return Promise.resolve(e)}):Promise.resolve("Shuffling is in starat state")},function(e){return Promise.resolve(e)})},this.getHoldingShufflings=function(e,t,r,a,s,c){i.setBaseUrl(n.getNodeUrl(l.getOption("CONNECTION_MODE"),l.getOption("RANDOMIZE_NODES")));var u={requestType:"getHoldingShufflings",holding:e,stage:t,includeFinished:r,firstIndex:a,lastIndex:s,adminPassword:c};return i.all(o.shufflingEndPoint).customGET("",u)},this.getAssignedShufflings=function(e,t,r,a,s){i.setBaseUrl(n.getNodeUrl(l.getOption("CONNECTION_MODE"),l.getOption("RANDOMIZE_NODES")));var c={requestType:"getAssignedShufflings",account:e,includeHoldingInfo:!0,firstIndex:r,lastIndex:a,adminPassword:s};return i.all(o.shufflingEndPoint).customGET("",c)},this.shufflingVerify=function(e,t,n,o,i){var s={requestType:"shufflingVerify",shuffling:e,shufflingStateHash:t,recipientSecretPhrase:n,secretPhrase:o,feeTQT:parseInt(i*r.TOKEN_QUANTS,10),deadline:l.getOption("DEADLINE"),broadcast:"false"};return a.createTransaction(s)},this.startShuffler=function(e,t,n,o,i){var s={requestType:"startShuffler",secretPhrase:e,shufflingFullHash:t,recipientSecretPhrase:n,recipientPublicKey:o,feeTQT:parseInt(i*r.TOKEN_QUANTS,10),deadline:l.getOption("DEADLINE"),broadcast:"false"};return a.createTransaction(s)},this.stopShuffler=function(e,t,n,o,i){var s={requestType:"stopShuffler",shufflingFullHash:e,secretPhrase:t,adminPassword:o,account:i,feeTQT:parseInt(n*r.TOKEN_QUANTS,10),deadline:l.getOption("DEADLINE"),broadcast:"false"};return a.createTransaction(s)},this.cancelShuffle=function(e,t,n,o,i){var s={requestType:"shufflingCancel",shuffling:t,shufflingStateHash:n,secretPhrase:e,cancellingAccount:o,feeTQT:parseInt(i*r.TOKEN_QUANTS,10),deadline:l.getOption("DEADLINE"),broadcast:"false"};return a.createTransaction(s)}}]),angular.module("shufflings").controller("ShufflingsMainCtrl",["$scope","ShufflingService","amountTQTFilter","timestampFilter","DTOptionsBuilder","DTColumnBuilder","$uibModal","$compile","baseConfig","supplyFilter","searchTermFilter","shufflingsConfig","$q","AlertService","CryptoService","CommonsService","SessionStorageService","loginConfig",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g,h,S){e.openCreateShuffleModal=function(){a.open({animation:!0,templateUrl:"shufflings/modals/create-shuffle-form.html",size:"lg",controller:"ShufflingFormCtrl",resolve:{params:function(){return{}}}})},e.openRegisterShuffleModal=function(e,t,n,r){a.open({animation:!0,templateUrl:"shufflings/modals/register-shuffle-form.html",size:"lg",controller:"ShufflingFormCtrl",resolve:{params:function(){return{shufflingFullHash:e,amount:t,shuffling:n,holding:r}}}})},e.openStartShuffleModal=function(e){a.open({animation:!0,templateUrl:"shufflings/modals/start-shuffle-form.html",size:"lg",controller:"ShufflingFormCtrl",resolve:{params:function(){return{shufflingFullHash:e}}}})},e.openStopShuffleModal=function(e){a.open({animation:!0,templateUrl:"shufflings/modals/stop-shuffle-form.html",size:"lg",controller:"ShufflingFormCtrl",resolve:{params:function(){return{shufflingFullHash:e}}}})},e.openCancelShuffleModal=function(e,t,n){a.open({animation:!0,templateUrl:"shufflings/modals/cancel-shuffle-form.html",size:"lg",controller:"ShufflingFormCtrl",resolve:{params:function(){return{shufflingId:e,shufflingStateHash:t,cancellingAccountId:n}}}})},e.openShufflingParticipantsModal=function(e){a.open({animation:!0,templateUrl:"shufflings/modals/shuffling-participants.html",size:"lg",controller:"ShufflingParticipantsCtrl",resolve:{params:function(){return{shufflingId:e}}}})},e.openShufflingDetailsModal=function(e){a.open({animation:!0,templateUrl:"shufflings/modals/shuffling-details.html",size:"lg",controller:"ShufflingDetailsCtrl",resolve:{params:function(){return{shufflingId:e}}}})},e.clearAllShufflers=function(){var n=g.getAccountDetailsFromSession("accountId"),r=h.getFromSession(S.SESSION_ACCOUNT_PRIVATE_KEY);e.clearShufflerPromise=t.getAccountShufflings(n,void 0,void 0,!0).then(function(n){var o=n.shufflings;if(o.length>0){for(var i=[],a=Math.min(o.length,10),s=0;s<a;s++){var l=o[s];4!==l.stage&&5!==l.stage||i.push(t.stopShuffler(l.shufflingFullHash,f.secretPhraseFromPrivateKey(r)))}i.length>0&&(e.clearShufflerPromise=p.all(i).then(function(e){m.addAlert({type:"success",msg:"Succesfully stopped all the shufflers on testnet node"})},function(e){}))}},function(e){})}}]),angular.module("shufflings").controller("ShufflingsCtrl",["$scope","ShufflingService","DTOptionsBuilder","DTColumnBuilder","$interval","$uibModal","$compile","amountTQTFilter","baseConfig","searchTermFilter","SessionStorageService","shufflingStageFilter","holdingTypeFilter","CommonsService","quantityToShareFilter","numberStringFilter","$sanitize",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g,h){e.includeFinished=!1,e.account=m.getAccountDetailsFromSession("accountRs"),e.filterNone=function(){e.includeFinished=!1,e.reloadShufflings()},e.activeShuffles=function(){e.includeFinished=!1,e.reloadShufflings()},e.allShuffles=function(){e.includeFinished=!0,e.reloadShufflings()},e.dtOptions=n.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("info",!1).withOption("ordering",!1).withOption("serverSide",!0).withDataProp("shufflings").withOption("processing",!0).withOption("ordering",!1).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){a(t)(e)}).withOption("ajax",function(n,r,o){var i=n.start+n.length-1;t.getAllShufflings(n.start,i,e.includeFinished).then(function(e){r({iTotalRecords:1e3,iTotalDisplayRecords:1e3,shufflings:e.shufflings||[]})})}).withDisplayLength(10).withBootstrap(),e.dtColumns=[r.newColumn("shuffling").withTitle("Details").notSortable().renderWith(function(e,t,n,r){return'<button class="btn btn-success btn-xs" ng-controller="SearchCtrl" ng-click="searchValue(\''+h(e)+'\')"><i class="fa fa-list-ul" aria-hidden="true" style="width:15px;"></i></button>'}),r.newColumn("participantCount").withTitle("Participants").notSortable().renderWith(function(e,t,n,r){return h(e)+"/"+h(n.registrantCount)}),r.newColumn("shuffling").withTitle("Shuffling").notSortable().renderWith(function(e,t,n,r){return'<button type="button" class="btn btn-default btn-xs" +  popover-placement="left" popover-trigger="\'mouseenter\'" uib-popover= "Shuffling Details" ng-controller="ShufflingsMainCtrl" ng-click="openShufflingDetailsModal(\''+h(e)+'\')" ng-disabled="false"> <i class="fa fa-question-circle-o" aria-hidden="true" style="width:15px;"></i> </button>'}),r.newColumn("stage").withTitle("Stage").notSortable().renderWith(function(e,t,n,r){return d(h(e))}),r.newColumn("holdingType").withTitle("Type").notSortable().renderWith(function(e,t,n,r){return p(h(e))}),r.newColumn("holding").withTitle("Holding").notSortable().renderWith(function(e,t,n,r){var o=n.holdingType;return 1===o?"<a ng-click=\"openAssetDetailsModal('"+h(e)+'\')" ng-controller="AssetsMainCtrl"> Details</a>':2===o?"<a ng-click=\"openCurrencyDetailsModal('"+h(n.holdingInfo.code)+'\')" ng-controller="CurrenciesMainCtrl"> Details</a>':""}),r.newColumn("amount").withTitle("Amount").notSortable().renderWith(function(e,t,n,r){var o=n.holdingType;return 0===o?s(h(e)):1===o||2===o?g(f(e,h(n.holdingInfo.decimals))):void 0}),r.newColumn("issuerRS").withTitle("Assigne").notSortable().renderWith(function(e,t,n,r){return c(h(e))}),r.newColumn("blocksRemaining").withTitle("Blocks").notSortable(),r.newColumn("shufflingFullHash").withTitle("Action").notSortable().renderWith(function(t,n,r,o){var i=!1,a="btn-success";(r.stage>0||r.issuerRS===e.account)&&(i=!0,a="btn-default");return'<button type="button" class="btn '+a+' btn-xs" +  popover-placement="left" popover-trigger="\'mouseenter\'" uib-popover= "Join Shuffling" ng-controller="ShufflingsMainCtrl" ng-click="openRegisterShuffleModal(\''+h(t)+"','"+h(r.amount)+"','"+h(r.shuffling)+"','"+h(r.holding)+'\')" ng-disabled="'+i+'"> <i class="fa fa-plus" aria-hidden="true" style="width:15px;"></i> </button>'})],e.dtInstanceCallback=function(t){e.dtInstance=t},e.reloadShufflings=function(){e.dtInstance&&e.dtInstance._renderer.rerender()}}]),angular.module("shufflings").controller("MyShufflingsCtrl",["$scope","ShufflingService","DTOptionsBuilder","DTColumnBuilder","$interval","$uibModal","$compile","amountTQTFilter","baseConfig","searchTermFilter","SessionStorageService","shufflingStageFilter","holdingTypeFilter","CommonsService","quantityToShareFilter","numberStringFilter","shufflingsConfig","$q","loginConfig","CryptoService","$sanitize",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g,h,S,C,T,b){e.includeFinished=!1,e.filterNone=function(){e.includeFinished=!1,e.reloadShufflings()},e.activeShuffles=function(){e.includeFinished=!1,e.reloadShufflings()},e.allShuffles=function(){e.includeFinished=!0,e.reloadShufflings()},e.dtOptions=n.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("info",!1).withOption("ordering",!1).withOption("serverSide",!0).withDataProp("shufflings").withOption("processing",!0).withOption("ordering",!1).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){a(t)(e)}).withOption("ajax",function(n,r,o){var i=n.start+n.length-1,a=m.getAccountDetailsFromSession("accountId"),s=u.getFromSession(C.SESSION_ACCOUNT_PRIVATE_KEY),l=t.getShufflers(void 0,a,void 0,T.secretPhraseFromPrivateKey(s)),c=t.getAccountShufflings(a,n.start,i,e.includeFinished);S.all([c,l]).then(function(t){var n=t[0];e.shufflersState={},angular.forEach(t[1].shufflers,function(t){e.shufflersState[t.shuffling]=t}),r({iTotalRecords:1e3,iTotalDisplayRecords:1e3,shufflings:n.shufflings||[]})})}).withDisplayLength(10).withBootstrap(),e.dtColumns=[r.newColumn("shuffling").withTitle("Details").notSortable().renderWith(function(e,t,n,r){return'<button class="btn btn-success btn-xs" ng-controller="SearchCtrl" ng-click="searchValue(\''+b(e)+'\')"><i class="fa fa-list-ul" aria-hidden="true" style="width:15px;"></i></button>'}),r.newColumn("participantCount").withTitle("Participants").notSortable().renderWith(function(e,t,n,r){return'<a  ng-controller="ShufflingsMainCtrl" ng-click="openShufflingParticipantsModal(\''+b(n.shuffling)+"')\">"+b(e)+"/"+n.registrantCount+"</a>"}),r.newColumn("shuffling").withTitle("Shuffling").notSortable().renderWith(function(e,t,n,r){return'<button type="button" class="btn btn-default btn-xs" +  popover-placement="left" popover-trigger="\'mouseenter\'" uib-popover= "Shuffling Details" ng-controller="ShufflingsMainCtrl" ng-click="openShufflingDetailsModal(\''+b(e)+'\')" ng-disabled="false"> <i class="fa fa-question-circle-o" aria-hidden="true" style="width:15px;"></i> </button>'}),r.newColumn("stage").withTitle("Stage").notSortable().renderWith(function(e,t,n,r){return d(b(e))}),r.newColumn("holdingType").withTitle("Type").notSortable().renderWith(function(e,t,n,r){return p(b(e))}),r.newColumn("holding").withTitle("Holding").notSortable().renderWith(function(e,t,n,r){var o=n.holdingType;return 1===o?"<a ng-click=\"openAssetDetailsModal('"+b(e)+'\')" ng-controller="AssetsMainCtrl"> Details</a>':2===o?"<a ng-click=\"openCurrencyDetailsModal('"+b(n.holdingInfo.code)+'\')" ng-controller="CurrenciesMainCtrl"> Details</a>':""}),r.newColumn("amount").withTitle("Amount").notSortable().renderWith(function(e,t,n,r){var o=n.holdingType;return 0===o?s(b(e)):1===o||2===o?g(f(b(e),b(n.holdingInfo.decimals))):void 0}),r.newColumn("issuerRS").withTitle("Assigne").notSortable().renderWith(function(e,t,n,r){return c(b(e))}),r.newColumn("blocksRemaining").withTitle("Blocks").notSortable(),r.newColumn("shufflingFullHash").withTitle("Action").notSortable().renderWith(function(t,n,r,o){var i=1!==r.stage,a=1!==r.stage;i=!!e.shufflersState[r.shuffling],a=!e.shufflersState[r.shuffling];return'<button type="button" class="btn btn-default btn-xs" +  popover-placement="left" popover-trigger="\'mouseenter\'" uib-popover= "Start Shuffling" ng-controller="ShufflingsMainCtrl" ng-click="openStartShuffleModal(\''+b(t)+"','"+b(r.amount)+'\')" ng-disabled="'+i+'"> <i class="fa fa-play" aria-hidden="true" style="width:15px;"></i> </button>&nbsp;<button type="button" class="btn btn-default btn-xs" +  popover-placement="left" popover-trigger="\'mouseenter\'" uib-popover= "Stop Shuffling" ng-controller="ShufflingsMainCtrl" ng-click="openStopShuffleModal(\''+b(t)+'\')" ng-disabled="'+a+'"> <i class="fa fa-stop" aria-hidden="true" style="width:15px;"></i> </button>'})],e.dtInstanceCallback=function(t){e.dtInstance=t},e.reloadShufflings=function(){e.dtInstance&&e.dtInstance._renderer.rerender()}}]),angular.module("shufflings").controller("ShufflingFormCtrl",["$scope","$uibModalInstance","params",function(e,t,n){e.cancel=function(){t.dismiss("cancel")},e.$on("close-modal",function(){t.dismiss("cancel")});var r=[{templateUrl:"shufflings/modals/create-shuffle-details.html",title:"Create Shuffle Details",controller:"CreateShuffleFormController",isolatedScope:!0,data:n},{templateUrl:"shufflings/modals/create-shuffle-confirm.html",title:"Create Shuffle Confirmation",controller:"CreateShuffleFormController",isolatedScope:!0}],o=[{templateUrl:"shufflings/modals/cancel-shuffle-details.html",title:"Cancel Shuffle Details",controller:"CancelShuffleFormController",isolatedScope:!0,data:n},{templateUrl:"shufflings/modals/cancel-shuffle-confirm.html",title:"Cacnel Shuffle Confirmation",controller:"CancelShuffleFormController",isolatedScope:!0}],i=[{templateUrl:"shufflings/modals/register-shuffle-details.html",title:"Join Shuffle Details",controller:"RegisterShuffleFormController",isolatedScope:!0,data:n},{templateUrl:"shufflings/modals/register-shuffle-confirm.html",title:"Join Shuffle Confirmation",controller:"RegisterShuffleFormController",isolatedScope:!0}],a=[{templateUrl:"shufflings/modals/start-shuffle-details.html",title:"Start Shuffle Details",controller:"StartShuffleFormController",isolatedScope:!0,data:n}],s=[{templateUrl:"shufflings/modals/stop-shuffle-details.html",title:"Stop Shuffle Details",controller:"StopShuffleFormController",isolatedScope:!0,data:n}];e.steps={},e.steps.createShuffleForm=r,e.steps.registerShuffleForm=i,e.steps.startShuffleForm=a,e.steps.stopShuffleForm=s,e.steps.cancelShuffleForm=o}]),angular.module("shufflings").controller("ShufflingParticipantsCtrl",["$scope","ShufflingService","SessionStorageService","$state","CryptoService","loginConfig","AlertService","alertConfig","$validation","$uibModal","FeeService","$rootScope","CommonsService","AssetsService","CurrenciesService","amountToQuantFilter","OptionsService","$uibModalInstance","params","searchTermFilter","shufflingStageFilter","DTOptionsBuilder","DTColumnBuilder","$compile","$sanitize",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g,h,S,C,T,b,y,O,v,A){e.params=C,e.dtOptions=y.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("info",!1).withOption("ordering",!1).withOption("serverSide",!0).withDataProp("participants").withOption("processing",!0).withOption("ordering",!1).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){v(t)(e)}).withOption("ajax",function(e,n,r){e.start,e.length;t.getShufflingParticipants(C.shufflingId).then(function(e){n({iTotalRecords:e.participants.length,iTotalDisplayRecords:e.participants.length,participants:e.participants||[]})})}).withDisplayLength(10).withBootstrap(),e.dtColumns=[O.newColumn("state").withTitle("Stage").notSortable().renderWith(function(e,t,n,r){return b(A(e))}),O.newColumn("accountRS").withTitle("Assigne").notSortable().renderWith(function(e,t,n,r){return T(A(e))})],e.cancel=function(){S.dismiss("cancel")},e.$on("close-modal",function(){S.dismiss("cancel")})}]),angular.module("shufflings").controller("ShufflingDetailsCtrl",["$scope","ShufflingService","SessionStorageService","$state","CryptoService","loginConfig","AlertService","alertConfig","$validation","$uibModal","FeeService","$rootScope","CommonsService","AssetsService","CurrenciesService","amountToQuantFilter","OptionsService","$uibModalInstance","params","searchTermFilter","shufflingStageFilter","DTOptionsBuilder","DTColumnBuilder","$compile",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g,h,S,C,T,b,y,O,v){e.params=C,e.getShuffleDetails=function(n){n=n||C.shufflingId,e.shuffleDetailsPromise=t.getShuffling(n).then(function(t){e.shuffle=t},function(e){console.log(e)})},e.cancel=function(){S.dismiss("cancel")},e.$on("close-modal",function(){S.dismiss("cancel")})}]),angular.module("shufflings").controller("CreateShuffleFormController",["$scope","ShufflingService","SessionStorageService","$state","CryptoService","loginConfig","AlertService","alertConfig","$validation","$uibModal","multiStepFormScope","FeeService","$rootScope","CommonsService","AssetsService","CurrenciesService","amountToQuantFilter","OptionsService","shareToQuantiyFilter","$sanitize","$timeout",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g,h,S,C,T,b){e.createShuffleForm=angular.copy(u.createShuffleForm),e.$on("$destroy",function(){u.createShuffleForm=angular.copy(e.createShuffleForm)}),e.alerts=[{type:"warning",msg:"After creating or joining a shuffling you must keep your node online and your shuffler running. Make sure your balance is able to cover the 12 XIN shuffling fees until the shuffling completes. If you don't and miss your turn you will be charged 1.000 XIN."}],e.closeAlert=function(t){e.alerts.splice(t,1)},e.isLocalhostOrTestnet=t.isLocalHostOrTestnet()||!1,e.isLocalhostOrTestnet||b(function(){a.addAlert({type:"danger",msg:"Localhost (127.0.0.1) is not available. For security reasons localhost is mandatory to create a shuffle."},s.createShuffleModalAlert)},1e3),e.finishHeight=1440,e.increment=function(){if(e.finishHeight>=2e4)return void(e.finishHeight=2e4);e.finishHeight=e.finishHeight+1440,e.createShuffleForm.finishHeight=e.finishHeight},e.decrement=function(){if(e.finishHeight<=1440)return void(e.finishHeight=1440);e.finishHeight=e.finishHeight-1440,e.createShuffleForm.finishHeight=e.finishHeight},e.max=function(){e.finishHeight=2e4,e.createShuffleForm.finishHeight=2e4},e.min=function(){e.finishHeight=1440,e.createShuffleForm.finishHeight=1440},e.getAsset=function(t){f.getAsset(t).then(function(t){e.createShuffleForm.asset=t})},e.getCurrency=function(t){g.getCurrency(t).then(function(t){e.createShuffleForm.currency=t})},e.getBlockChainStatus=function(){g.getBlockChainStatus().then(function(t){e.createShuffleForm.currentHeight=t.numberOfBlocks})},e.hasPrivateKeyInSession=function(){return!!n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY)},e.holdingOptions=[{label:"XIN",value:"0"},{label:"Asset",value:"1"},{label:"Currency",value:"2"}],e.isLocalhostOrTestnet=t.isLocalHostOrTestnet(),e.createShuffle=function(){var r=u.createShuffleForm,l={};l.amount=r.amount,l.holdingType=r.holdingType,l.holding=r.holding,l.participantCount=r.participantCount,"2"===l.holdingType?(l.holding=r.currency.currency,l.amount=C(l.amount,r.currency.decimals)):"1"===l.holdingType?l.amount=C(l.amount,r.asset.decimals):"0"===l.holdingType&&(l.amount=h(l.amount)),l.fee=1,l.publicKey=m.getAccountDetailsFromSession("publicKey"),l.finishHeight=r.finishHeight;var c,d=r.secretPhrase;c=d?o.secretPhraseToPrivateKey(d):n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY),t.isLocalHostOrTestnet()?e.createShufflePromise=t.createShuffling(l.publicKey,l.amount,l.participantCount,l.finishHeight,l.holding,l.holdingType,l.fee).then(function(t){if(t.errorCode)a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+T(t.errorDescription)},s.createShuffleModalAlert);else{var n=t.unsignedTransactionBytes,r=o.signatureHex(n,c);e.transactionBytes=o.signTransactionHex(n,r),e.tx_fee=t.transactionJSON.feeTQT/1e8,e.tx_amount=t.transactionJSON.amountTQT/1e8,e.tx_total=e.tx_fee+e.tx_amount,e.validBytes=!0}},function(e){a.addAlert(a.getNoConnectionMessage(e),s.createShuffleModalAlert)}):a.addAlert({type:"danger",msg:"You must be connected to localhost or testnet to perform shuffling"},s.createShuffleModalAlert)},e.broadcastTransaction=function(t){e.createPollPromise=m.broadcastTransaction(t).then(function(t){e.$emit("close-modal"),p.$broadcast("reload-dashboard"),t.errorCode?a.addAlert({type:"danger",msg:"Unable to broadcast transaction. Reason: "+T(t.errorDescription)}):a.addAlert({type:"success",msg:"Transaction succesfull broadcasted with Id : "+T(t.transaction)})},function(e){a.addAlert(a.getNoConnectionMessage(e),s.createShuffleModalAlert)})}}]),angular.module("shufflings").controller("RegisterShuffleFormController",["$scope","ShufflingService","SessionStorageService","$state","CryptoService","loginConfig","AlertService","alertConfig","$validation","$uibModal","multiStepFormScope","FeeService","$rootScope","CommonsService","AssetsService","CurrenciesService","amountToQuantFilter","$sanitize",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g,h,S){e.registerShuffleForm=angular.copy(u.registerShuffleForm),e.initStep1=function(){var t=e.$getActiveStep().data;e.registerShuffleForm=e.registerShuffleForm||{},t&&(e.registerShuffleForm.shufflingFullHash=t.shufflingFullHash,e.registerShuffleForm.amount=t.amount,e.registerShuffleForm.shuffling=t.shuffling,e.registerShuffleForm.holding=t.holding)},e.isLocalhostOrTestnet=t.isLocalHostOrTestnet()||!1,e.isLocalhostOrTestnet||a.addAlert({type:"danger",msg:"You must be connected to localhost or testnet to perform shuffling"},s.createShuffleModalAlert),e.$on("$destroy",function(){u.registerShuffleForm=angular.copy(e.registerShuffleForm)}),e.alerts=[{type:"warning",msg:"After creating or joining a shuffling you must keep your node online and your shuffler running. Make sure your balance is able to cover the 12 XIN shuffling fees until the shuffling completes. If you don't and miss your turn you will be charged 1.000 XIN."}],e.closeAlert=function(t){e.alerts.splice(t,1)},e.hasPrivateKeyInSession=function(){return!!n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY)},e.registerShuffle=function(){var r,l=u.registerShuffleForm,c=l.shufflingFullHash,d=m.getAccountDetailsFromSession("publicKey"),p=l.secretPhrase;r=p?o.secretPhraseToPrivateKey(p):n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY),e.isLocalhostOrTestnet?e.registerShufflePromise=t.registerShuffle(d,1,c).then(function(t){if(t.errorCode)a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+S(t.errorDescription)},s.registerShuffleModalAlert);else{var n=t.unsignedTransactionBytes,i=o.signatureHex(n,r);e.transactionBytes=o.signTransactionHex(n,i),e.tx_fee=t.transactionJSON.feeTQT/1e8,e.tx_amount=t.transactionJSON.amountTQT/1e8,e.tx_total=e.tx_fee+e.tx_amount,e.validBytes=!0}},function(e){a.addAlert(a.getNoConnectionMessage(e),s.registerShuffleModalAlert)}):a.addAlert({type:"danger",msg:"You must be connected to localhost or testnet to perform shuffling"},s.createShuffleModalAlert)},e.broadcastTransaction=function(t){e.createPollPromise=m.broadcastTransaction(t).then(function(t){e.$emit("close-modal"),p.$broadcast("reload-dashboard"),t.errorCode?a.addAlert({type:"danger",msg:"Unable to broadcast transaction. Reason: "+S(t.errorDescription)}):a.addAlert({type:"success",msg:"Transaction succesfull broadcasted with Id : "+S(t.transaction)})},function(e){a.addAlert(a.getNoConnectionMessage(e),s.registerShuffleModalAlert)})}}]),angular.module("shufflings").controller("StartShuffleFormController",["$scope","ShufflingService","SessionStorageService","$state","CryptoService","loginConfig","AlertService","alertConfig","$validation","$uibModal","multiStepFormScope","FeeService","$rootScope","CommonsService","AssetsService","CurrenciesService","amountToQuantFilter","$sanitize",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g,h,S){e.startShuffleForm=angular.copy(u.startShuffleForm),e.initStep1=function(){var t=e.$getActiveStep().data;e.startShuffleForm=e.startShuffleForm||{},t&&(e.startShuffleForm.shufflingFullHash=t.shufflingFullHash)},e.$on("$destroy",function(){u.startShuffleForm=angular.copy(e.startShuffleForm)}),e.alerts=[{type:"warning",msg:"Your passphrase is needed to start the shuffle on the connected node. Due to security reason this is only allowed on a local node or the dedicated SSL node provided by the foundation. The most secure way is to run your own local node for shuffling. To proceed please enter the recipient public key where to send token/assets or currencies. The recipient account has to be an unused, new account. You can generate a new account from login. Write down the passphrase!"}],e.closeAlert=function(t){e.alerts.splice(t,1)},e.showStart=!0,e.hasPrivateKeyInSession=function(){return!!n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY)},e.startShuffle=function(r){r=r||u.startShuffleForm;e.showStart=!1,e.closeAlert(0);var l,c=r.shufflingFullHash,d=(m.getAccountDetailsFromSession("publicKey"),r.recipientPublickey),p=r.secretPhrase;l=p?o.secretPhraseToPrivateKey(p):n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY),e.stopShufflePromise=t.startShuffler(o.secretPhraseFromPrivateKey(l),c,void 0,d,1).then(function(e){e.errorCode?a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+S(e.errorDescription)},s.startShuffleModalAlert):a.addAlert({type:"success",msg:"Shuffling "+S(e.shuffling)+" successfull started. Recipient: "+e.recipientRS+" "},s.startShuffleModalAlert)},function(e){a.addAlert(a.getNoConnectionMessage(e),s.startShuffleModalAlert)})}}]),angular.module("shufflings").controller("StopShuffleFormController",["$scope","ShufflingService","SessionStorageService","$state","CryptoService","loginConfig","AlertService","alertConfig","$validation","$uibModal","multiStepFormScope","FeeService","$rootScope","CommonsService","AssetsService","CurrenciesService","amountToQuantFilter","$sanitize",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g,h,S){e.stopShuffleForm=angular.copy(u.stopShuffleForm),e.initStep1=function(){var t=e.$getActiveStep().data;e.stopShuffleForm=e.stopShuffleForm||{},t&&(e.stopShuffleForm.shufflingFullHash=t.shufflingFullHash)},e.$on("$destroy",function(){u.stopShuffleForm=angular.copy(e.stopShuffleForm)}),e.alerts=[{type:"warning",msg:"If you stop your already started shuffle (an already fully joined running shuffle) you will be charged 1.000 XIN. "}],e.closeAlert=function(t){e.alerts.splice(t,1)},e.showStop=!0,e.hasPrivateKeyInSession=function(){return!!n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY)},e.stopShuffle=function(r){r=r||u.stopShuffleForm;e.showStop=!1,e.closeAlert(0);var l,c=r.shufflingFullHash,d=r.secretPhrase;l=d?o.secretPhraseToPrivateKey(d):n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY),e.stopShufflePromise=t.stopShuffler(c,o.secretPhraseFromPrivateKey(l),1).then(function(e){if(e.errorCode)a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+S(e.errorDescription)},s.stopShuffleModalAlert);else{var t="Shuffler succesfully stopped",n="success";if(0==e.stoppedShuffler){t="No running shuffler found. Please start the shuffler before stopping.";var n="info"}a.addAlert({type:n,msg:"Stop shuffle: "+S(t)},s.stopShuffleModalAlert)}},function(e){a.addAlert(a.getNoConnectionMessage(e),s.stopShuffleModalAlert)})}}]),angular.module("shufflings").controller("CancelShuffleFormController",["$scope","ShufflingService","SessionStorageService","$state","CryptoService","loginConfig","AlertService","alertConfig","$validation","$uibModal","multiStepFormScope","FeeService","$rootScope","CommonsService","AssetsService","CurrenciesService","amountToQuantFilter","OptionsService","$sanitize",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f,g,h,S,C){e.cancelShuffleForm=angular.copy(u.cancelShuffleForm),e.$on("$destroy",function(){u.cancelShuffleForm=angular.copy(e.cancelShuffleForm)}),e.initStep1=function(){var n=e.$getActiveStep().data;e.cancelShuffleForm=e.cancelShuffleForm||{},n&&(e.cancelShuffleForm.shufflingId=n.shufflingId,n.shufflingStateHash&&n.cancellingAccountId?(e.cancelShuffleForm.shufflingStateHash=n.shufflingStateHash,e.cancelShuffleForm.cancellingAccountId=n.cancellingAccountId):t.getShuffling(n.shufflingId).then(function(t){e.cancelShuffleForm.shufflingStateHash=t.shufflingStateHash,e.cancelShuffleForm.cancellingAccountId=t.assignee,console.log(e.cancelShuffleForm)},function(e){}))},e.hasPrivateKeyInSession=function(){return!!n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY)},e.isLocalhostOrTestnet=t.isLocalHostOrTestnet(),e.cancelShuffle=function(){
var r,l=u.cancelShuffleForm,c=l.shufflingId,d=l.shufflingStateHash,p=l.cancellingAccountId,f=(m.getAccountDetailsFromSession("publicKey"),l.secretPhrase);r=f?o.secretPhraseToPrivateKey(f):n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY),e.cancelShufflePromise=t.cancelShuffle(o.secretPhraseFromPrivateKey(r),c,d,p,1).then(function(t){if(t.errorCode)a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+C(t.errorDescription)},s.cancelShuffleModalAlert);else{var n=t.unsignedTransactionBytes,i=o.signatureHex(n,r);e.transactionBytes=o.signTransactionHex(n,i),e.tx_fee=t.transactionJSON.feeTQT/1e8,e.tx_amount=t.transactionJSON.amountTQT/1e8,e.tx_total=e.tx_fee+e.tx_amount,e.validBytes=!0}},function(e){a.addAlert(a.getNoConnectionMessage(e),s.cancelShuffleModalAlert)})},e.broadcastTransaction=function(t){e.createPollPromise=m.broadcastTransaction(t).then(function(t){e.$emit("close-modal"),p.$broadcast("reload-dashboard"),t.errorCode?a.addAlert({type:"danger",msg:"Unable to broadcast transaction. Reason: "+C(t.errorDescription)}):a.addAlert({type:"success",msg:"Transaction succesfull broadcasted with Id : "+C(t.transaction)})},function(e){a.addAlert(a.getNoConnectionMessage(e),s.cancelShuffleModalAlert)})}}]),angular.module("AT",["baseClient","crypto","ui.router","ui.bootstrap","multiStepForm","node","options"]),angular.module("AT").constant("ATConfig",{ATEndPoint:"api"}),angular.module("AT").config(["RestangularProvider","ATConfig","$stateProvider","$urlRouterProvider",function(e,t,n,r){e.setRestangularFields({options:"_options"}),n.state("client.signedin.at",{url:"^/at",templateUrl:"./at/views/main.html",abstract:!0}).state("client.signedin.at.allats",{url:"^/at/allats",templateUrl:"./at/views/allats.html",controller:"AllATsCtrl"}).state("client.signedin.at.myats",{url:"^/at/myats",templateUrl:"./at/views/myats.html",controller:"MyATsCtrl"})}]),angular.module("AT").service("ATService",["nodeConfig","SessionStorageService","NodeService","baseConfig","Restangular","loginConfig","CryptoService","TransactionService","$rootScope","OptionsService","ATConfig",function(e,t,n,r,o,i,a,s,l,c,u){this.createATProgram=function(e,t,i,a,l,u,d,p,m,f,g){o.setBaseUrl(n.getNodeUrl(c.getOption("CONNECTION_MODE"),c.getOption("RANDOMIZE_NODES")));var h={publicKey:e,requestType:"createATProgram",name:t,description:i,creationBytes:a,code:l,data:u,dpages:d,cspages:p,uspages:m,minActivationAmountTQT:parseInt(f),feeTQT:parseInt(g*r.TOKEN_QUANTS,10),broadcast:"false",deadline:c.getOption("DEADLINE")};return s.createTransaction(h)},this.getAT=function(e){o.setBaseUrl(n.getNodeUrl(c.getOption("CONNECTION_MODE")));var t={requestType:"getAT",at:e};return o.all(u.ATEndPoint).customGET("",t)},this.getATDetails=function(e){o.setBaseUrl(n.getNodeUrl(c.getOption("CONNECTION_MODE")));var t={requestType:"getATDetails",at:e};return o.all(u.ATEndPoint).customGET("",t)},this.getATDetails=function(e){o.setBaseUrl(n.getNodeUrl(c.getOption("CONNECTION_MODE")));var t={requestType:"getATDetails",at:e};return o.all(u.ATEndPoint).customGET("",t)},this.getATIds=function(){o.setBaseUrl(n.getNodeUrl(c.getOption("CONNECTION_MODE")));var e={requestType:"getATIds"};return o.all(u.ATEndPoint).customGET("",e)},this.getAllATs=function(){o.setBaseUrl(n.getNodeUrl(c.getOption("CONNECTION_MODE")));var e={requestType:"getAllATs"};return o.all(u.ATEndPoint).customGET("",e)},this.getATLong=function(e){o.setBaseUrl(n.getNodeUrl(c.getOption("CONNECTION_MODE")));var t={requestType:"getATLong",hexString:e};return o.all(u.ATEndPoint).customGET("",t)},this.getAccountATs=function(e){o.setBaseUrl(n.getNodeUrl(c.getOption("CONNECTION_MODE")));var t={requestType:"getAccountATs",account:e};return o.all(u.ATEndPoint).customGET("",t)}}]),angular.module("AT").controller("MainATCtrl",["$scope","SubscriptionService","amountTQTFilter","timestampFilter","DTOptionsBuilder","DTColumnBuilder","$uibModal","$compile","baseConfig","supplyFilter","searchTermFilter",function(e,t,n,r,o,i,a,s,l,c,u){e.openCreateATModal=function(){a.open({animation:!0,templateUrl:"at/modals/create-at-form.html",size:"lg",controller:"ATFormCtrl",resolve:{params:function(){return{}}}})},e.openATDetailsModal=function(e){a.open({animation:!0,templateUrl:"at/modals/at-details.html",size:"lg",controller:"ATDetailsCtrl",resolve:{params:function(){return{at:e}}}})}}]),angular.module("AT").controller("AllATsCtrl",["$scope","ATService","amountTQTFilter","timestampFilter","DTOptionsBuilder","DTColumnBuilder","$uibModal","$compile","baseConfig","supplyFilter","searchTermFilter","CommonsService","SessionStorageService","txIsValidFilter",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m){e.dtOptions=o.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("serverSide",!1).withDataProp("ats").withOption("processing",!0).withOption("info",!1).withOption("paging",!0).withOption("ordering",!1).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){s(t)(e)}).withOption("ajax",function(e,n,r){var o=e.start+e.length-1;t.getAllATs(e.start,o).then(function(e){n({iTotalRecords:1e3,iTotalDisplayRecords:1e3,ats:e.ats})})}).withDisplayLength(10).withBootstrap(),e.dtColumns=[i.newColumn("at").withTitle("AT").notSortable().renderWith(function(e,t,n,r){return'<button type="button" class="btn btn-success btn-xs" ng-controller="SearchCtrl" ng-click="searchValue(\''+e+'\')"><i class="fa fa-list-ul" aria-hidden="true" style="width:15px;"></i></button>'}),i.newColumn("atRS").withTitle("Account").notSortable().renderWith(function(e,t,n,r){return u(e)}),i.newColumn("at").withTitle("Details").notSortable().renderWith(function(e,t,n,r){return'<button type="button" class="btn btn-default btn-xs"   popover-placement="left" popover-trigger="\'mouseenter\'" uib-popover= "AT Details" ng-controller="MainATCtrl" ng-click="openATDetailsModal(\''+e+'\')"> <i class="fa fa-cog" aria-hidden="true" style="width:15px;"></i> </button>'}),i.newColumn("name").withTitle("Name").notSortable().renderWith(function(e,t,n,r){return e}),i.newColumn("balanceTQT").withTitle("Balance").notSortable().renderWith(function(e,t,r,o){return n(e)}),i.newColumn("minActivation").withTitle("Activation").notSortable().renderWith(function(e,t,r,o){return n(e)}),i.newColumn("finished").withTitle("Finished").notSortable().renderWith(function(e,t,n,r){return m(e)}),i.newColumn("frozen").withTitle("Frozen").notSortable().renderWith(function(e,t,n,r){return m(e)}),i.newColumn("running").withTitle("Running").notSortable().renderWith(function(e,t,n,r){return m(e)}),i.newColumn("stopped").withTitle("Stopped").notSortable().renderWith(function(e,t,n,r){return m(e)}),i.newColumn("dead").withTitle("Dead").notSortable().renderWith(function(e,t,n,r){return m(e)}),i.newColumn("at").withTitle("Action").notSortable().renderWith(function(e,t,n,r){return'<button type="button" class="btn btn-default btn-xs"   popover-placement="left" popover-trigger="\'mouseenter\'" uib-popover= "Run AT" ng-controller="AccountMainCtrl" ng-click="openSendTokenModal (\''+e+'\')"> <i class="fa fa-cogs" aria-hidden="true" style="width:15px;"></i> </button>'})],e.dtInstanceCallback=function(t){e.dtInstance=t},e.reloadAllATs=function(){e.dtInstance&&e.dtInstance._renderer.rerender()}}]),angular.module("AT").controller("MyATsCtrl",["$scope","ATService","amountTQTFilter","timestampFilter","DTOptionsBuilder","DTColumnBuilder","$uibModal","$compile","baseConfig","supplyFilter","searchTermFilter","CommonsService","ATService","txIsValidFilter",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m){e.dtOptions=o.newOptions().withPaginationType("full_numbers").withDOM("frtip").withOption("serverSide",!1).withDataProp("ats").withOption("processing",!0).withOption("info",!1).withOption("paging",!0).withOption("ordering",!1).withOption("bFilter",!1).withOption("fnRowCallback",function(t,n,r,o){s(t)(e)}).withOption("ajax",function(e,t,n){var r=d.getAccountDetailsFromSession("accountId");p.getAccountATs(r).then(function(e){t({iTotalRecords:e.ats.length,iTotalDisplayRecords:e.ats.length,ats:e.ats})})}).withDisplayLength(10).withBootstrap(),e.dtColumns=[i.newColumn("at").withTitle("AT").notSortable().renderWith(function(e,t,n,r){return'<button type="button" class="btn btn-success btn-xs" ng-controller="SearchCtrl" ng-click="searchValue(\''+e+'\')"><i class="fa fa-list-ul" aria-hidden="true" style="width:15px;"></i></button>'}),i.newColumn("atRS").withTitle("Account").notSortable().renderWith(function(e,t,n,r){return u(e)}),i.newColumn("at").withTitle("Details").notSortable().renderWith(function(e,t,n,r){return'<button type="button" class="btn btn-default btn-xs"   popover-placement="left" popover-trigger="\'mouseenter\'" uib-popover= "AT Details" ng-controller="MainATCtrl" ng-click="openATDetailsModal(\''+e+'\')"> <i class="fa fa-cog" aria-hidden="true" style="width:15px;"></i> </button>'}),i.newColumn("name").withTitle("Name").notSortable().renderWith(function(e,t,n,r){return e}),i.newColumn("balanceTQT").withTitle("Balance").notSortable().renderWith(function(e,t,r,o){return n(e)}),i.newColumn("minActivation").withTitle("Activation").notSortable().renderWith(function(e,t,r,o){return n(e)}),i.newColumn("finished").withTitle("Finished").notSortable().renderWith(function(e,t,n,r){return m(e)}),i.newColumn("frozen").withTitle("Frozen").notSortable().renderWith(function(e,t,n,r){return m(e)}),i.newColumn("running").withTitle("Running").notSortable().renderWith(function(e,t,n,r){return m(e)}),i.newColumn("stopped").withTitle("Stopped").notSortable().renderWith(function(e,t,n,r){return m(e)}),i.newColumn("dead").withTitle("Dead").notSortable().renderWith(function(e,t,n,r){return m(e)}),i.newColumn("at").withTitle("Action").notSortable().renderWith(function(e,t,n,r){return'<button type="button" class="btn btn-default btn-xs"   popover-placement="left" popover-trigger="\'mouseenter\'" uib-popover= "Run AT" ng-controller="AccountMainCtrl" ng-click="openSendTokenModal (\''+e+'\')"> <i class="fa fa-cogs" aria-hidden="true" style="width:15px;"></i> </button>'})],e.dtInstanceCallback=function(t){e.dtInstance=t},e.reloadAllATs=function(){e.dtInstance&&e.dtInstance._renderer.rerender()}}]),angular.module("AT").controller("ATDetailsCtrl",["$scope","ATService","params","$uibModalInstance",function(e,t,n,r){e.initATDetails=function(){t.getAT(n.at).then(function(t){e.atDetails=t},function(e){})},e.cancel=function(){r.dismiss("cancel")}}]),angular.module("AT").controller("ATFormCtrl",["$scope","$uibModalInstance","params",function(e,t,n){e.cancel=function(){t.dismiss("cancel")},e.$on("close-modal",function(){t.dismiss("cancel")});var r=[{templateUrl:"at/modals/create-at-details.html",title:"Create AT Step 1",controller:"CreateATFormController",isolatedScope:!0,data:n},{templateUrl:"at/modals/create-at-details-2.html",title:"Create AT Step 2",controller:"CreateATFormController",isolatedScope:!0,data:n},{templateUrl:"at/modals/create-at-confirm.html",title:"Create AT Confirmation",controller:"CreateATFormController",isolatedScope:!0}];e.steps={},e.steps.createATForm=r}]),angular.module("AT").controller("CreateATFormController",["$scope","ATService","SessionStorageService","$state","CryptoService","loginConfig","AlertService","alertConfig","$validation","$uibModal","multiStepFormScope","FeeService","$rootScope","CommonsService","baseConfig",function(e,t,n,r,o,i,a,s,l,c,u,d,p,m,f){e.createATForm=angular.copy(u.createATForm),e.createATForm2=angular.copy(u.createATForm2),e.validateAndMoveNextStep=function(){e.createATForm2;e.$nextStep()},e.$on("$destroy",function(){u.createATForm=angular.copy(e.createATForm),u.createATForm2=angular.copy(e.createATForm2)}),e.hasPrivateKeyInSession=function(){return!!n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY)},e.createAT=function(){var r,l=u.createATForm,c=u.createATForm2,d=l.name,p=l.description,g=parseInt(l.minActivationAmount*f.TOKEN_QUANTS),h=c.code,S=c.data||"",C=c.bytes||"",T=c.dpages,b=c.cspages,y=c.uspages,O=m.getAccountDetailsFromSession("publicKey"),v=l.secretPhrase;r=v?o.secretPhraseToPrivateKey(v):n.getFromSession(i.SESSION_ACCOUNT_PRIVATE_KEY),e.createATPromise=t.createATProgram(O,d,p,C,h,S,T,b,y,g,1).then(function(t){if(t.errorCode)a.addAlert({type:"danger",msg:"Sorry, an error occured! Reason: "+t.errorDescription},s.createATModalAlert);else{var n=t.unsignedTransactionBytes,i=o.signatureHex(n,r);e.transactionBytes=o.signTransactionHex(n,i),e.validBytes=!0,e.tx_fee=t.transactionJSON.feeTQT/1e8,e.tx_amount=t.transactionJSON.amountTQT/1e8,e.tx_total=e.tx_fee+e.tx_amount}},function(e){a.addAlert(a.getNoConnectionMessage(e),s.createATModalAlert)})},e.broadcastTransaction=function(t){e.createATPromise=m.broadcastTransaction(t).then(function(t){e.$emit("close-modal"),p.$broadcast("reload-dashboard"),t.errorCode?a.addAlert({type:"danger",msg:"Unable to broadcast transaction. Reason: "+t.errorDescription}):a.addAlert({type:"success",msg:"Transaction succesfull broadcasted with Id : "+t.transaction})},function(e){a.addAlert(a.getNoConnectionMessage(e),s.createATModalAlert)})}}]),angular.module("client",["login","baseClient","node","account","assets","ui.router","dashboard","clientAlert","search","addressbook","currencies","poll","messages","aliases","options","exchanges","extensions","tools","crowdfunding","subscription","escrow","shufflings","AT"]),angular.module("client").config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("client",{abstract:!0,url:"/",template:"<div ui-view></div>"}).state("client.signedin",{abstract:!0,url:"/",templateUrl:"./commons/signedin.html"}),t.otherwise("/welcome")}]),angular.module("client").service("OptionsConfigurationService",["StateAuthService","$rootScope","OptionsService","OptionsConfigureService","CommonsService","AccountService","controlConfig","SessionStorageService","PeerService","nodeConfig","baseConfig",function(e,t,n,r,o,i,a,s,l,c,u){function d(){if(!t.options){var e=o.getAccountDetailsFromSession("publicKey");n.loadOptions(e,function(e){t.options=e,s.saveToSession(u.SESSION_APP_OPTIONS,e),p()},function(e){t.options=DEFAULT_OPTIONS,s.saveToSession(u.SESSION_APP_OPTIONS,DEFAULT_OPTIONS),p()},function(e){alert("Unable to get active nodes")})}}function p(){var e=o.getAccountDetailsFromSession("accountRs");i.getPhasingOnlyControl(e).then(function(e){e.account?(s.saveToSession(a.SESSION_ACCOUNT_CONTROL_HASCONTROL_KEY,!0),s.saveToSession(a.SESSION_ACCOUNT_CONTROL_JSONCONTROL_KEY,e)):(s.saveToSession(a.SESSION_ACCOUNT_CONTROL_HASCONTROL_KEY,!1),s.saveToSession(a.SESSION_ACCOUNT_CONTROL_JSONCONTROL_KEY,void 0))})}this.loadOptions=d}]),angular.module("client").run(["StateAuthService","$rootScope","OptionsService","OptionsConfigureService","CommonsService","AccountService","controlConfig","SessionStorageService","PeerService","nodeConfig","baseConfig","$confirmModalDefaults",function(e,t,n,r,o,i,a,s,l,c,u,d){function p(){if(!t.options){var e=o.getAccountDetailsFromSession("publicKey");n.loadOptions(e,function(e){t.options=e,s.saveToSession(u.SESSION_APP_OPTIONS,e),m()},function(e){t.options=DEFAULT_OPTIONS,s.saveToSession(u.SESSION_APP_OPTIONS,DEFAULT_OPTIONS),m()},function(e){alert("Unable to get active nodes")})}}function m(){var e=o.getAccountDetailsFromSession("accountRs");i.getPhasingOnlyControl(e).then(function(e){e.account?(s.saveToSession(a.SESSION_ACCOUNT_CONTROL_HASCONTROL_KEY,!0),s.saveToSession(a.SESSION_ACCOUNT_CONTROL_JSONCONTROL_KEY,e)):(s.saveToSession(a.SESSION_ACCOUNT_CONTROL_HASCONTROL_KEY,!1),s.saveToSession(a.SESSION_ACCOUNT_CONTROL_JSONCONTROL_KEY,void 0))})}t.$on("$stateChangeStart",function(t,n){e.authenticate(t,n),s.getFromSession(c.SESSION_PEER_NODES)||l.getPeers().then(function(e){s.saveToSession(c.SESSION_PEER_NODES,e),p()},function(e){window.alert("Unable to get Active nodes")}),p()}),d.templateUrl="global/views/confirm-modal.html"}]),angular.module("client").controller("FooterController",["NodeService","OptionsService","$scope","TransactionService","PeerService","$timeout","LocalHostService","SessionStorageService","baseConfig","$rootScope",function(e,t,n,r,o,i,a,s,l,c){n.init=function(){n.connectionMode=t.getOption("CONNECTION_MODE"),n.connectedURL=e.getNodeUrl(t.getOption("CONNECTION_MODE")),n.totalNodes=e.getNodesCount(),r.getBlockChainStatus().then(function(e){n.currentHeight=e.numberOfBlocks,s.saveToSession(l.SESSION_CURRENT_BLOCK,e.numberOfBlocks)}),n.AssignedDate=Date},n.getState=function(){a.getPeerState(e.getNodeUrl(t.getOption("CONNECTION_MODE"))).then(function(e){n.peerState=e})},n.$on("reload-options",function(){n.init()}),c.$on("peers-updated",function(){n.init()})}]);
//# sourceMappingURL=bundle.min.js.map
